<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<search>
    
     <entry>
        <title>å¼€æºåå‘ä»£ç†åŠè´Ÿè½½å‡è¡¡Envoyåˆæ¢</title>
        <url>/blog/envoy-proxy/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>microservice</tag>
        </tags>
        <content type="html"> Envoyæ˜¯Lyftäº2017å¹´å¼€æºçš„ç½‘ç»œåå‘ä»£ç†å·¥å…·,ç°å±äºCNCFåŸºé‡‘ä¼šçš„æ¯•ä¸šé¡¹ç›®.
å’ŒNginxå’ŒHAProxyç›¸æ¯”,åŠŸèƒ½æ›´å¼ºå¤§,å¼€æºæ›´å½»åº•(æä¾›çš„è®¸å¤šåŠŸèƒ½æ˜¯å…¶ä»–äº§å“çš„ä»˜è´¹åŠŸèƒ½).
æ›´é‡è¦çš„æ˜¯ä½œä¸ºæ–°å…´ä»£ç†,ä¸å¾®æœåŠ¡ç´§å¯†ç»“åˆ,å¯ä»¥åšå…¥å£ä»£ç†/è¾¹ç¼˜ä»£ç†/ä¸­é—´ä»£ç†ç­‰. æµè¡Œçš„Service Meshæ¡†æ¶istioå°±æ˜¯åŸºäºEnvoyæ„å»ºè€Œæˆ.
Envoyæœ¬èº«ç”¨C&#43;&#43;å¼€å‘,å¹¶å‘æ¨¡å‹ä¸Nginxç±»ä¼¼,å…·æœ‰å¾ˆé«˜çš„å¤„ç†æ€§èƒ½.
æœ¬æ–‡å°½é‡è„±ç¦»å¾®æœåŠ¡å’ŒService Mesh,èšç„¦äºEnvoyä»£ç†æœ¬èº«æ‰€æä¾›çš„ä¸°å¯ŒåŠŸèƒ½.

éƒ¨ç½²å’Œä½¿ç”¨ å®˜æ–¹æä¾›ä¸¤ç§éƒ¨ç½²æ–¹å¼.
æœ¬åœ°ç¼–è¯‘ åœ¨Ubuntu 18.04ä¸‹ç¼–è¯‘,å…·ä½“å‚è€ƒå®˜æ–¹è¯´æ˜.
å®‰è£…bazelå‚è€ƒè¿™é‡Œ
# å®‰è£…ä¾èµ– apt-get install ninja-build # æœ¬åœ°ç¼–è¯‘ bazel build //source/exe:envoy-static ç¼–è¯‘åçš„æ–‡ä»¶ä½äº /bazel-bin/source/exe/envoy-static
ä½¿ç”¨dockerå®¹å™¨çš„æ–¹å¼ å¿«é€ŸéªŒè¯
docker pull envoyproxy/envoy-dev:8d1ad35aa724962f64f7535531e408c9a93d364c docker run --rm -d -p 10000:10000 envoyproxy/envoy-dev:8d1ad35aa724962f64f7535531e408c9a93d364c # é»˜è®¤ä½¿ç”¨10000ç«¯å£ curl -v localhost:10000 å®šåˆ¶å’Œæ‰©å±• åŸºäºé…ç½®è§„åˆ™åˆ›å»ºè‡ªå·±çš„envoy.yaml
# Dockfile FROM envoyproxy/envoy-dev:8d1ad35aa724962f64f7535531e408c9a93d364c COPY envoy.yaml /etc/envoy/envoy.yaml æ„å»ºæ–°çš„å®šåˆ¶é•œåƒ
docker build -t envoy:v1 . # 9901ä¸ºç®¡ç†ç«¯å£ docker run -d --name envoy -p 9901:9901 -p 10000:10000 envoy:v1 curl -v localhost:10000 é…ç½® é™æ€é…ç½®æ–‡ä»¶é»˜è®¤ä½äº /etc/envoy/envoy.yaml
åŠ¨æ€é…ç½® åŠ¨æ€é…ç½®æ”¯æŒæ–‡ä»¶å’ŒAPI(é…ç½®æœåŠ¡å™¨)ä¸¤ç§æ–¹å¼.
åŸºäºæ–‡ä»¶çš„åŠ¨æ€é…ç½® å‚è€ƒæ–‡æ¡£: åŠ¨æ€é…ç½®è·¯ç”±
é…ç½®æœåŠ¡å™¨å®ç° å®˜æ–¹æä¾›äº†Goå’ŒJavaä¸¤ä¸ªé»˜è®¤å®ç°
ç›‘æ§å’Œç»Ÿè®¡ å‚è€ƒæ–‡æ¡£: Envoy&#43;Prometheus&#43;Grafanaå®ç°/Demoä»£ç 
åˆ†æµ/è“ç»¿å‘å¸ƒ/æµé‡å¤åˆ¶ Traffic mirroring/shadowing: ç”¨äºç”Ÿäº§ç¯å¢ƒæœåŠ¡çš„éªŒè¯æµ‹è¯•, é•œåƒåŠŸèƒ½å‘é€ä¸€éƒ¨åˆ†ç”Ÿäº§æµé‡å‰¯æœ¬åˆ°é•œåƒæœåŠ¡,é•œåƒè¯·æ±‚é‡‡ç”¨fire&amp;amp;forgotæ¨¡å¼,å“åº”è¢«ä¸¢å¼ƒ.
å‚è€ƒ  å®˜æ–¹:æµé‡è¿ç§»å’Œåˆ†ç¦» æµé‡å¤åˆ¶ç¤ºä¾‹  æ‰©å±•é˜…è¯» ä¸å…¶ä»–ä»£ç†çš„æ¯”è¾ƒ  ä¸å…¶ä»–ä¸»æµä»£ç†çš„æ¯”è¾ƒ traefikåå‘ä»£ç†/è´Ÿè½½å‡è¡¡: Goå®ç°,æ”¯æŒkubernetesç¼–æ’æœåŠ¡å’Œetcd/consulæœåŠ¡æ³¨å†Œ  å­¦ä¹ èµ„æº  kataåœ¨çº¿å®éªŒç¯å¢ƒ åŸºç¡€ learnenvoy: ä¸å†ç»´æŠ¤  åº”ç”¨  eBayæ˜¯å¦‚ä½•å°† Envoy ä½œä¸ºè¾¹ç¼˜ä»£ç†çš„   å°†ç¡¬ä»¶è´Ÿè½½å‡è¡¡å™¨æ›¿æ¢ä¸ºè½¯ä»¶è§£å†³æ–¹æ¡ˆ,åœ¨æ¯ä¸ªé›†ç¾¤çš„è¾¹ç¼˜ä¸Šæœ‰ä¸€ä¸ªâ€œnorth-southâ€ç½‘å…³ï¼Œç”¨æ¥ç®¡ç†æ‰€æœ‰é’ˆå¯¹å¤–éƒ¨çš„ä¼ å…¥å’Œä¼ å‡ºæµé‡.
</content>
    </entry>
    
     <entry>
        <title>bazelæ„å»ºå·¥å…·</title>
        <url>/blog/bazel-build/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>build</tag>
        </tags>
        <content type="html"> Bazelæ˜¯Googleå¼€æºçš„ä¸€ä¸ªæ„å»ºç³»ç»Ÿ,ä¸»è¦æ”¯æŒåˆ†å¸ƒå¼ç¼“å­˜å’Œå¢é‡ç¼–è¯‘,ä½¿å¾—å¤§é¡¹ç›®çš„æ„å»ºæ›´å¿«é€Ÿ, ä¸»è¦ç”¨äºC&#43;&#43;,Java,Goç­‰æœåŠ¡ç«¯é¡¹ç›®æ„å»º.
æœ‰ä¸€ä¸ªä¸ä¹‹ç±»ä¼¼çš„å¿«é€Ÿæ„å»ºç³»ç»ŸBuck(Facebookå¼€æº)åˆ™æ›´å…³æ³¨äºAndroidå’ŒiOSå®¢æˆ·ç«¯çš„æ„å»º. ä¸¤è€…éƒ½å€¾å‘äºmono repo(è€ŒéåŸºäºé¡¹ç›®çš„ä»“åº“)çš„æ„å»º.
ä¹‹å‰çœ‹äº†çœ¼å®˜æ–¹æ•™ç¨‹,è§‰å¾—è¿‡äºå¤æ‚æ²¡æœ‰å¼•èµ·å…´è¶£. æœ€è¿‘çœ‹åˆ°åœ¨Bç«™ä»£ç å’Œenvoyéƒ½ä½œä¸ºæ ‡é…,æ‰€ä»¥å†åšäº›æ·±å…¥äº†è§£.

ä½¿ç”¨åŸºç¡€ åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºWORKSPACEå’ŒBUILDæ–‡ä»¶.
å·¥ä½œåŒº/WORKSPACEé…ç½® bazelæœ‰å·¥ä½œåŒºçš„æ¦‚å¿µ, è¯¥æ–‡ä»¶é…ç½®åŠ è½½bazelç¯å¢ƒéœ€è¦çš„è§„åˆ™å’Œä¾èµ–,å¯ä»¥ä¸ºç©º.
###Â BUILDé…ç½® æ„å»ºé¡¹ç›®ä¿¡æ¯é…ç½®æ–‡ä»¶,è¯­æ³•ç±»ä¼¼äºpython.
java_binary( name = &amp;#34;ProjectRunner&amp;#34;, srcs = [&amp;#34;src/main/java/com/example/ProjectRunner.java&amp;#34;], main_class = &amp;#34;com.example.ProjectRunner&amp;#34;, deps = [&amp;#34;:greeter&amp;#34;], ) java_library( name = &amp;#34;greeter&amp;#34;, srcs = [&amp;#34;src/main/java/com/example/Greeting.java&amp;#34;], visibility = [&amp;#34;//src/main/java/com/example/cmdline:__pkg__&amp;#34;], ) visibility = levelå±æ€§æ”¹å˜ç›®æ ‡çš„å¯è§èŒƒå›´, åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­éœ€è¦æ”¹å˜é»˜è®¤å½“å‰BUILDçš„é™åˆ¶,å› ä¸ºç”¨åˆ°äº†å…¶ä»–BUILDé…ç½®.
æ„å»ºå‘½ä»¤ bazel build //:ProjectRunner æ„å»ºåå°†ç”Ÿæˆä¸€äº›è¾“å‡ºç›®å½•çš„ç¬¦å·é“¾æ¥,å¦‚bazel-binå’Œbazel-out.
å¯éƒ¨ç½² # é»˜è®¤ä¸ä¼šåŒ…å«ä¾èµ–,è€Œé‡‡ç”¨åŠ å…¥CLASSPATHçš„æ–¹å¼ç¡®ä¿æœ¬åœ°å¯ä»¥è¿è¡Œ bazel build //src/main/java/com/example/cmdline:runner # jar tf bazel-bin/src/main/java/com/example/cmdline/runner.jar # å¦‚æœè¦æ±‚å¯éƒ¨ç½²,éœ€è¦åŠ _deployåç¼€ bazel build //src/main/java/com/example/cmdline:runner_deploy.jar Goé¡¹ç›®æ„å»º WORKSPACEæ–‡ä»¶ åŠ è½½Goè§„åˆ™,ä½¿ç”¨gazelleè‡ªåŠ¨ç”Ÿæˆ/æ›´æ–°BUILDæ–‡ä»¶.
load(&amp;#34;@bazel_tools//tools/build_defs/repo:http.bzl&amp;#34;, &amp;#34;http_archive&amp;#34;) http_archive( name = &amp;#34;io_bazel_rules_go&amp;#34;, urls = [&amp;#34;https://github.com/bazelbuild/rules_go/releases/download/0.18.5/rules_go-0.18.5.tar.gz&amp;#34;], sha256 = &amp;#34;a82a352bffae6bee4e95f68a8d80a70e87f42c4741e6a448bec11998fcc82329&amp;#34;, ) http_archive( name = &amp;#34;bazel_gazelle&amp;#34;, urls = [&amp;#34;https://github.com/bazelbuild/bazel-gazelle/releases/download/0.17.0/bazel-gazelle-0.17.0.tar.gz&amp;#34;], sha256 = &amp;#34;3c681998538231a2d24d0c07ed5a7658cb72bfb5fd4bf9911157c0e9ac6a2687&amp;#34;, ) load(&amp;#34;@io_bazel_rules_go//go:deps.bzl&amp;#34;, &amp;#34;go_rules_dependencies&amp;#34;, &amp;#34;go_register_toolchains&amp;#34;) go_rules_dependencies() go_register_toolchains() load(&amp;#34;@bazel_gazelle//:deps.bzl&amp;#34;, &amp;#34;gazelle_dependencies&amp;#34;) gazelle_dependencies() BUILDé…ç½®æ–‡ä»¶ æ·»åŠ 
load(&amp;#34;@bazel_gazelle//:def.bzl&amp;#34;, &amp;#34;gazelle&amp;#34;) # æ›´æ–°ä¸ºå¯¹åº”é¡¹ç›®å gazelle( name = &amp;#34;gazelle&amp;#34;, prefix = &amp;#34;bazeltest&amp;#34;, ) ç”Ÿæˆé…ç½®æ–‡ä»¶
 bazel run //:gazelle
 æ³¨: åœ¨æˆ‘æœ¬åœ°æµ‹è¯•æ—¶,æ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆgo_binaryç›¸å…³é…ç½®, åˆ™éœ€è¦æ›´æ–°é…ç½®å¦‚ä¸‹:
load(&amp;#34;@io_bazel_rules_go//go:def.bzl&amp;#34;, &amp;#34;go_binary&amp;#34;,&amp;#34;go_library&amp;#34;, &amp;#34;go_test&amp;#34;) go_binary( name = &amp;#34;bazeltest&amp;#34;, srcs = [&amp;#34;main.go&amp;#34;], deps = [&amp;#34;:go_default_library&amp;#34;], # embed = [&amp;#34;:go_default_library&amp;#34;], # visibility = [&amp;#34;//visibility:public&amp;#34;], # out = &amp;#34;cmd&amp;#34;, ) æ„å»º # // æ¥è¡¨ç¤ºå½“å‰é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œ ... è¡¨ç¤ºå½“å‰è·¯å¾„ä¸‹æ‰€æœ‰çš„åŒ… bazel build //... # æŒ‡å®šç›®æ ‡ bazel build //cmd/bazeltest æ‰©å±•é˜…è¯»  å®˜æ–¹æ•™ç¨‹Java/C&#43;&#43; ä½¿ç”¨ Bazel æ„å»º Golang é¡¹ç›® ç”¨ Bazel / Buck æ„å»ºå¤§å‹é¡¹ç›® </content>
    </entry>
    
     <entry>
        <title>Goä¾èµ–åº“ç®¡ç†åˆæ¢</title>
        <url>/blog/go-mod/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> Goä½œä¸ºä¸€ä¸ªæ–°è¯­è¨€,å…¶ä¾èµ–ç®¡ç†ç³»ç»Ÿä¸€ç›´ä¸å¤Ÿå®Œå–„,å®˜æ–¹ç›´åˆ°å»å¹´æ‰åœ¨1.11åŠ å…¥modules(ä¹Ÿå«vgo). åœ¨æ­¤ä¹‹å‰ç¤¾åŒºä¸æ»¡å®˜æ–¹çš„å®˜åƒš,è¿˜æœ‰è¿‡ä¸€é˜µæ¿€çƒˆçš„è®¨è®º,è®¨è®ºæµè¡Œç¬¬ä¸‰æ–¹åº“depçš„ä¸è¢«é‡‡çº³è€Œå®˜æ–¹è‡ªé€ è½®å­.
æœ€è¿‘åœ¨é¡¹ç›®é¦–æ¬¡ä½¿ç”¨äº†modulesç³»ç»Ÿ,ä½†è¿˜æ˜¯é‡‡ç”¨çš„å…¼å®¹çš„vendoræ¨¡å¼. æ€»ä½“ç”¨ä¸‹æ¥è¿˜ä¸é”™,ä¸€äº›githubåº“ä¹Ÿå·²ç»ä½¿ç”¨è¯¥æ–¹å¼.
ä¸‹é¢ç®€è¦åˆ—ä¸‹å¸¸è§ç”¨æ³•.

å¼€å¯è¯¥é€‰é¡¹ ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºå¼€å¯çŠ¶æ€: GO111MODULE=on
å¦‚æœä½¿ç”¨Goland IDE, åˆ°é¡¹ç›® [settings]-[Go modules(vgo)]- å‹¾é€‰ &amp;ldquo;Enable Go modules(vgo) integration&amp;rdquo;
ä½¿ç”¨ ä¸»è¦é€šè¿‡å‘½ä»¤ go mod å®ç°, å…·ä½“ç”¨æ³•å‚è€ƒ go help mod
å¸¸ç”¨å‘½ä»¤ # åˆ—å‡ºå½“å‰æ¨¡å—å’Œå®ƒçš„æ‰€æœ‰ä¾èµ–åº“ go list -m all lists # åˆ—å‡ºè¯¦ç»†ä¾èµ–ä¿¡æ¯ go list -m -json all # æŸ¥çœ‹æŸåº“çš„å¯ç”¨ç‰ˆæœ¬ go list -m -versions github.com/BurntSushi/toml # åˆ é™¤ä¸ç”¨çš„ä¾èµ– go mod tidy ä½¿ç”¨vendorç®¡ç†æœ¬é¡¹ç›®ä¾èµ– æ³¨: éœ€è¦è¯´æ˜çš„,è¿™äº›ä¾èµ–åªåŒ…å«æœ¬é¡¹ç›®ç”¨åˆ°çš„ç›´æ¥ä¾èµ–, ç¬¬ä¸‰æ–¹åº“çš„è‡ªèº«ä¾èµ–ç”±å®ƒæœ¬èº«ç»´æŠ¤.
# ç”Ÿæˆæœ¬åœ°ä¾èµ– go mod vendor # æ„å»ºæ—¶æŒ‡å®švendor go build -mod=vendor #æˆ–è€…  GOFLAGS=-mod=ç¯å¢ƒå˜é‡ä¿¡æ¯ è¯­ä¹‰åŒ–ç‰ˆæœ¬ç»´æŠ¤åº“ semantic import versioningçš„æ”¯æŒ.
# æŠŠæ¨¡å—è·¯å¾„å®šä¹‰ä¸ºç±»ä¼¼ rsc.io/quote/v3 çš„æ ¼å¼ ç‰ˆæœ¬ç®¡ç† vendorç›®å½•å’Œgo.mod , go.sumæ–‡ä»¶éƒ½åº”è¯¥æäº¤è‡³ç‰ˆæœ¬åº“.
æ‰©å±•é˜…è¯»  å®˜æ–¹åšå®¢ä»‹ç» å®˜æ–¹wikiä»‹ç» </content>
    </entry>
    
     <entry>
        <title>Go in Action å­¦ä¹ ç¬”è®°</title>
        <url>/blog/go-in-action/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>go</tag><tag>read</tag>
        </tags>
        <content type="html"> åˆå­¦Goæ—¶ä¸»è¦è¯»çš„&amp;lt;Goè¯­è¨€åœ£ç»&amp;gt;,æ­£å¼ä¸­æ–‡ç‰ˆå«&amp;lt;Goç¨‹åºè®¾è®¡è¯­è¨€&amp;gt;, ç”±äºå½“æ—¶å†™çš„ä»£ç è¿˜å¾ˆå°‘,å®é™…ä¸Šå¾ˆå¤šæ˜¯ä¸å¤ªæ‡‚çš„æˆ–åæ¥ä¹Ÿå¿˜äº†.
ä¹‹åæƒ³è¯»äº›å…¶ä»–ä¹¦æ—¶,æœ¬æ¥æƒ³è¯»çš„&amp;lt;Goç¼–ç¨‹å®æˆ˜&amp;gt;åœ¨è±†ç“£çš„è¯„åˆ†åä½,ä¾¿ä¸€ç›´æ²¡è¯». åœ¨å†™è¿‡ä¸€äº›ä»£ç å,å¶ç„¶å†è¯»è¿™æœ¬ä¹¦,å‘ç°å…¶å®æˆ˜æ„ä¹‰å¾ˆé«˜,æ˜¯å¾ˆå¥½çš„ä¸€æœ¬è¿›é˜¶ä¹¦.
ç”±æ­¤çœ‹æ¥è±†ç“£çš„è¯„åˆ†åªèƒ½å½“ä¸ªå‚è€ƒ,éœ€è¦è¯»è¯»çœ‹æ˜¯ä¸æ˜¯é€‚åˆè‡ªå·±.
 åšäº†äº›ç®€å•çš„ç¬”è®°. é¡ºä¾¿è¯´, ç¬¬ä¸€ä½œè€…çš„Ultimate Goè™½ç„¶æ˜¯è‹±æ–‡è§†é¢‘,è®²çš„ä¹Ÿå¾ˆå¥½å¾ˆæ·±å…¥,æœ‰éœ€è¦çš„å¯è”ç³»æˆ‘.
è¯»ä¹¦ç¬”è®° Goç‰¹ç‚¹å’Œçº¦å®š åœ¨Goè¯­è¨€ä¸­ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½ä»¥å€¼çš„æ–¹å¼ä¼ é€’ã€‚
å‘½åæƒ¯ä¾‹: å¦‚æœæ¥å£ç±»å‹åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å‹çš„åå­—ä»¥erç»“å°¾ã€‚
å°†å·¥å‚å‡½æ•°å‘½åä¸ºNewæ˜¯Goè¯­è¨€çš„ä¸€ä¸ªä¹ æƒ¯ã€‚
å› ä¸ºå¤§éƒ¨åˆ†æ–¹æ³•åœ¨è¢«è°ƒç”¨åéƒ½éœ€è¦ç»´æŠ¤æ¥æ”¶è€…çš„å€¼çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªæœ€ä½³å®è·µæ˜¯ï¼Œå°†æ–¹æ³•çš„æ¥æ”¶è€…å£°æ˜ä¸ºæŒ‡é’ˆã€‚
å¹¶å‘ æ¨èä½¿ç”¨WaitGroup(è®¡æ•°ä¿¡å·é‡)æ¥è·Ÿè¸ªgoroutineçš„å·¥ä½œæ˜¯å¦å®Œæˆã€‚
å†™å¹¶å‘ç¨‹åºçš„æ—¶å€™ï¼Œæœ€ä½³åšæ³•æ˜¯ï¼Œåœ¨mainå‡½æ•°è¿”å›å‰ï¼Œæ¸…ç†å¹¶ç»ˆæ­¢æ‰€æœ‰ä¹‹å‰å¯åŠ¨çš„goroutineã€‚
åŒ… æ‰€æœ‰å¤„äºåŒä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œçš„ä»£ç æ–‡ä»¶ï¼Œå¿…é¡»ä½¿ç”¨åŒä¸€ä¸ªåŒ…åã€‚(æŒ‰æƒ¯ä¾‹,åŒ…å’Œæ–‡ä»¶å¤¹åŒå)
initå‡½æ•°åœ¨mainä¹‹å‰æ‰§è¡Œ, initå‡½æ•°ç”¨åœ¨è®¾ç½®åŒ…ã€åˆå§‹åŒ–å˜é‡æˆ–è€…å…¶ä»–è¦åœ¨ç¨‹åºè¿è¡Œå‰ä¼˜å…ˆå®Œæˆçš„å¼•å¯¼å·¥ä½œã€‚
å¯ä»¥åœ¨æŒ‡å®šåŒ…çš„æ—¶å€™ä½¿ç”¨é€šé…ç¬¦ã€‚3ä¸ªç‚¹è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ä¸²ã€‚
ç¬¬å››ç« : æ•°ç»„,åˆ‡ç‰‡å’Œæ˜ å°„ ä¸»è¦ä»‹ç»äº†é›†åˆæ•°æ®ç»“æ„:
æ•°ç»„: é•¿åº¦å›ºå®š,ç±»å‹çš„ç›¸åŒçš„è¿ç»­å—.
åˆ‡ç‰‡: åŠ¨æ€æ•°ç»„
åˆ‡ç‰‡ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºåˆ‡ç‰‡ï¼Œæ˜¯å› ä¸ºåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ‡ç‰‡å°±æ˜¯æŠŠåº•å±‚æ•°ç»„åˆ‡å‡ºä¸€éƒ¨åˆ†
slice := make([]int,3,5) slice := []string{&amp;#34;red&amp;#34;,&amp;#34;blue&amp;#34;} //åˆ›å»ºæœ‰3ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„ array:=[3]int{10,20,30} //åˆ›å»ºé•¿åº¦å’Œå®¹é‡éƒ½æ˜¯3çš„æ•´å‹åˆ‡ç‰‡ slice:=[]int{10,20,30} nilåˆ‡ç‰‡å’Œç©ºåˆ‡ç‰‡æ˜¯ä¸¤ä¸ªä¸œè¥¿.
 åœ¨éœ€è¦æè¿°ä¸€ä¸ªä¸å­˜åœ¨çš„åˆ‡ç‰‡æ—¶ï¼Œnilåˆ‡ç‰‡ä¼šå¾ˆå¥½ç”¨ã€‚ æƒ³è¡¨ç¤ºç©ºé›†åˆæ—¶ç©ºåˆ‡ç‰‡å¾ˆæœ‰ç”¨  //åˆ›å»ºæœ‰5ä¸ªå…ƒç´ çš„æ•´å‹æ•°ç»„ array:=[5]int{10,20,30,40,50} //åˆ›å»ºä¸€ä¸ªæ–°åˆ‡ç‰‡,å…¶é•¿åº¦ä¸º2ä¸ªå…ƒç´ ï¼Œå®¹é‡ä¸º4ä¸ªå…ƒç´  newSlice:=slice[1:3] // ç”Ÿæˆæ–°åˆ‡ç‰‡æ˜¯é™åˆ¶ç¬¬ä¸‰ä¸ªå‚æ•°å®¹é‡å’Œé•¿åº¦ä¸€æ ·,é¿å…æ–°åˆ‡ç‰‡çš„appendæ“ä½œæ”¹å˜åŸåº•å±‚æ•°ç»„å€¼ source:=[]string{&amp;#34;Apple&amp;#34;,&amp;#34;Orange&amp;#34;,&amp;#34;Plum&amp;#34;,&amp;#34;Banana&amp;#34;,&amp;#34;Grape&amp;#34;} slice := source[2:3:3] slice = append(slice,&amp;#34;Kiwi&amp;#34;) // è¿½åŠ s2çš„æ‰€æœ‰å€¼åˆ°s1 append(s1,s2...)  å¸¸ç”¨å‡½æ•°:append, cap, len
range å…³é”®å­—rangeå¯ä»¥ç”¨äºè¿­ä»£æ•°ç»„ã€å­—ç¬¦ä¸²ã€åˆ‡ç‰‡ã€æ˜ å°„å’Œé€šé“ã€‚
rangeè¿­ä»£åˆ‡ç‰‡,è¿”å›çš„ç¬¬äºŒä¸ªå€¼æ˜¯å¯¹åº”å…ƒç´ å€¼çš„å‰¯æœ¬
æ˜ å°„ æ˜¯å­˜å‚¨é”®å€¼å¯¹çš„æ— åºé›†åˆ(æ•£åˆ—è¡¨å®ç°).
å¸¸ç”¨å‡½æ•°: delete.
å°†åˆ‡ç‰‡æˆ–è€…æ˜ å°„ä¼ é€’ç»™å‡½æ•°æˆæœ¬å¾ˆå°ï¼Œå¹¶ä¸”ä¸ä¼šå¤åˆ¶åº•å±‚çš„æ•°æ®ç»“æ„ã€‚
ç¬¬äº”ç« : ç±»å‹ç³»ç»Ÿ ä½¿ç”¨ç»„åˆè®¾è®¡æ¨¡å¼,å¤ç”¨å…¶ä»–ç±»å‹çš„åŠŸèƒ½. ä¸€ä¸ªç±»å‹é€šå¸¸ç”±å…¶ä»–æ›´å°çš„ç±»å‹ç»„åˆè€Œ(é¿å…ä½¿ç”¨å¤æ‚çš„ç»§æ‰¿æ¨¡å‹).
å…³é”®å­—funcå’Œå‡½æ•°åä¹‹é—´çš„å‚æ•°è¢«ç§°ä½œæ¥æ”¶è€…ï¼Œå°†å‡½æ•°ä¸æ¥æ”¶è€…çš„ç±»å‹ç»‘åœ¨ä¸€èµ·ã€‚å¦‚æœä¸€ä¸ªå‡½æ•°æœ‰æ¥æ”¶è€…ï¼Œè¿™ä¸ªå‡½æ•°å°±è¢«ç§°ä¸ºæ–¹æ³•ã€‚
å€¼æ¥æ”¶è€…ä½¿ç”¨å€¼çš„å‰¯æœ¬æ¥è°ƒç”¨æ–¹æ³•ï¼Œè€ŒæŒ‡é’ˆæ¥å—è€…ä½¿ç”¨å®é™…å€¼æ¥è°ƒç”¨æ–¹æ³•ã€‚
 å†…ç½®(åŸå§‹)ç±»å‹: æ•°å€¼ç±»å‹(æ•´å‹,æµ®ç‚¹å‹),å­—ç¬¦ä¸²ç±»å‹,å¸ƒå°”ç±»å‹ å¼•ç”¨ç±»å‹: åˆ‡ç‰‡,æ˜ å°„,é€šé“,æ¥å£,å‡½æ•°ç±»å‹  ç±»å‹çš„æœ¬è´¨ å¤§å¤šæ•°æƒ…å†µä¸‹,ç»“æ„ç±»å‹çš„æœ¬è´¨æ˜¯éåŸå§‹çš„,éœ€è¦ä½¿ç”¨æŒ‡é’ˆæ¥å…±äº«è¿™ä¸ªå€¼.
ç±»å‹çš„å€¼å…·å¤‡éåŸå§‹çš„æœ¬è´¨ï¼Œæ‰€ä»¥æ€»æ˜¯åº”è¯¥è¢«å…±äº«ï¼Œè€Œä¸æ˜¯è¢«å¤åˆ¶ã€‚
æ˜¯ä½¿ç”¨å€¼æ¥æ”¶è€…è¿˜æ˜¯æŒ‡é’ˆæ¥æ”¶è€…ï¼Œä¸åº”è¯¥ç”±è¯¥æ–¹æ³•æ˜¯å¦ä¿®æ”¹äº†æ¥æ”¶åˆ°çš„å€¼æ¥å†³å®šã€‚è¿™ä¸ªå†³ç­–åº”è¯¥åŸºäºè¯¥ç±»å‹çš„æœ¬è´¨ã€‚ è¿™æ¡è§„åˆ™çš„ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼Œéœ€è¦è®©ç±»å‹å€¼ç¬¦åˆæŸä¸ªæ¥å£çš„æ—¶å€™ï¼Œå³ä¾¿ç±»å‹çš„æœ¬è´¨æ˜¯éåŸå§‹æœ¬è´¨çš„ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å€¼æ¥æ”¶è€…å£°æ˜æ–¹æ³•ã€‚è¿™æ ·åšå®Œå…¨ç¬¦åˆæ¥å£å€¼è°ƒç”¨æ–¹æ³•çš„æœºåˆ¶ã€‚
å› ä¸ºä¸æ˜¯æ€»èƒ½è·å–ä¸€ä¸ªå€¼çš„åœ°å€ï¼Œæ‰€ä»¥å€¼(Value)çš„æ–¹æ³•é›†(Method Receivers)åªåŒ…æ‹¬äº†ä½¿ç”¨å€¼æ¥æ”¶è€…å®ç°çš„æ–¹æ³•ã€‚
æ¥å£ æ˜¯å£°æ˜äº†ä¸€ç»„è¡Œä¸ºå¹¶æ”¯æŒå¤šæ€çš„ç±»å‹ã€‚
æ¥å£å…è®¸å¯¹è¡Œä¸º(è€Œä¸æ˜¯ç±»å‹)å»ºæ¨¡. Goçš„æ¥å£æ›´å°,åªå€¾å‘äºå®šä¹‰ä¸€ä¸ªå•ä¸€çš„åŠ¨ä½œ.
å¦‚æœè¦è®©ä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹å®ç°ä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªç”¨æˆ·å®šä¹‰çš„ç±»å‹è¦å®ç°æ¥å£ç±»å‹é‡Œå£°æ˜çš„æ‰€æœ‰æ–¹æ³•ã€‚
åµŒå…¥ç±»å‹ åµŒå…¥ç±»å‹æä¾›äº†æ‰©å±•ç±»å‹çš„èƒ½åŠ›ï¼Œè€Œæ— éœ€ä½¿ç”¨ç»§æ‰¿ã€‚
åµŒå…¥ç±»å‹æ˜¯å°†å·²æœ‰çš„ç±»å‹ç›´æ¥å£°æ˜åœ¨æ–°çš„ç»“æ„ç±»å‹é‡Œã€‚è¢«åµŒå…¥çš„ç±»å‹è¢«ç§°ä¸ºæ–°çš„å¤–éƒ¨ç±»å‹çš„å†…éƒ¨ç±»å‹ã€‚
ç”±äºå†…éƒ¨ç±»å‹çš„æå‡ï¼Œå†…éƒ¨ç±»å‹å®ç°çš„æ¥å£ä¼šè‡ªåŠ¨æå‡åˆ°å¤–éƒ¨ç±»å‹ã€‚å¦‚æœå¤–éƒ¨ç±»å‹å®ç°äº†notifyæ–¹æ³•ï¼Œå†…éƒ¨ç±»å‹çš„å®ç°å°±ä¸ä¼šè¢«æå‡ã€‚
æ‰©å±•é˜…è¯»  ä¹¦ç±é…å¥—ä»£ç  ä½œè€…åšå®¢ Ultimate Go åŸ¹è®­ æ–‡æ¡£ /å¤§çº² </content>
    </entry>
    
     <entry>
        <title>Djangoå†è®°å½•</title>
        <url>/blog/django/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>python</tag><tag>web</tag>
        </tags>
        <content type="html"> Djangoä½œä¸ºpython webå¼€å‘ç¬¬ä¸€æ¡†æ¶,å¾ˆæ—©å°±æœ‰æ‰€äº†è§£, ä¸Šæ¬¡ä½¿ç”¨æ˜¯åœ¨3å¹´å¤šä¹‹å‰. ä½œä¸ºå…¨æ ˆæ¡†æ¶æ¥è¯´,æ˜¯ä¸ªå¾ˆä¼˜ç§€çš„æ¡†æ¶.
æ®æˆ‘æ‰€çŸ¥Instagram,Mozillaç­‰é«˜æµé‡/å¤§å…¬å¸éƒ½åœ¨ä½¿ç”¨.
ä¹‹å‰å‡ ä¸ªé¡¹ç›®ç‰¹æ„ä½¿ç”¨äº†ä»¥è½»é‡è‘—ç§°çš„Flask,ä¸¤è€…ç®—æ˜¯å„æœ‰åƒç§‹å§.
å»å¹´Django2.0æ¨å‡ºåä¸€ç›´æƒ³å°è¯•,æ­£å¥½æœ€è¿‘æ‹¿æ¥è¯•è¯•.
ç”¨ä¸‹æ¥æ„Ÿè§‰ç®€åŒ–éƒ¨ç½²å’Œå¯å®šåˆ¶åŒ–ç›¸æ¯”ä¹‹å‰æ”¹è§‚å¾ˆå¤š,åšä¸‹ç®€è¦ç¬”è®°. manage.pyå‘½ä»¤è¡Œå·¥å…· Djangoçš„å·¥å…·çœŸçš„å¥½ç”¨å¾ˆå¤š.
# åˆ›å»ºé¡¹ç›®mysite django-admin startproject mysite # è¿è¡Œå¼€å‘æœåŠ¡å™¨,ä¹Ÿå¯æŒ‡å®šIP/ç«¯å£ # python manage.py runserver 0:8000 python3 manage.py runserver # æŒ‡å®šé…ç½® --settings SETTINGS  # åˆ›å»ºåº”ç”¨ python3 manage.py startapp polls # åˆ›å»ºè¶…çº§ç®¡ç†å‘˜ python3 manage.py createsuperuser shelläº¤äº’å¼å‘½ä»¤è¡Œ python3 manage.py shell å‡çº§/migration # ä¸º INSTALLED_APPS åˆ›å»ºå¿…è¦çš„æ•°æ®è¡¨ python3 manage.py migrate # makemigrationså‘½ä»¤ä¼šæ£€æµ‹å¯¹æ¨¡å‹çš„ä¿®æ”¹å¹¶ç”Ÿæˆè¿ç§»æ–‡ä»¶,ä½äºmigrationsæ–‡ä»¶å¤¹ python3 manage.py makemigrations polls å¼€å‘åŸºç¡€ æå€¡å¼€å‘å¯é‡ç”¨çš„app, ä¸»è¦åŸºäºModel/View/URL æ¨¡å¼.
App æ·»åŠ åº”ç”¨
# mysite/settings.py INSTALLED_APPS = [ &amp;#39;polls.apps.PollsConfig&amp;#39;,# polls/app.py # verbose_name å¯¹åº”é¡µé¢æ˜¾ç¤ºåç§° class PollsConfig(AppConfig): name = &amp;#39;Polls&amp;#39; verbose_name = &amp;#39;My Polls&amp;#39; Model # polls/models.py class Poll(models.Model): name = models.CharField(max_length=256, verbose_name=&amp;#39;Poll Name&amp;#39;) created = models.DateTimeField(auto_now_add=True) updated = models.DateTimeField(auto_now=True) class Meta: verbose_name = &amp;#39;Poll Display Name&amp;#39; View # polls/views.py from django.shortcuts import render,redirect from django.http import HttpResponse from django.contrib.auth.decorators import login_required # @login_required def index(request): return HttpResponse(&amp;#34;Welcome.&amp;#34;) æ·»åŠ è·¯ç”±/urls æ³¨: Django2.xé‡Œçš„re_path() ç­‰ä»·äºä¹‹å‰çš„url()
# mysite/urls.py urlpatterns = [ path(&amp;#39;polls/&amp;#39;, include(&amp;#39;polls.urls&amp;#39;)), path(&amp;#39;admin/&amp;#39;, admin.site.urls), Adminå®šåˆ¶ æ·»åŠ modelåˆ°Admin # polls/admin.py class PollsAdmin(admin.ModelAdmin): list_display = (&amp;#39;name&amp;#39;,&amp;#39;updated&amp;#39;) search_fields = [&amp;#39;name&amp;#39;] fieldsets = [ (None, {&amp;#39;fields&amp;#39;: [&amp;#39;name&amp;#39;]}), ] admin.site.register(Polls, PollsAdmin) ä¸°å¯Œæ˜¾ç¤º # è‡ªå®šä¹‰list_filter from django.contrib.admin import SimpleListFilter å†…ç½®å…³è”: InlineModelAdmin çš„ä¸¤ä¸ªå­ç±»TabularInlineå’ŒStackedInline
ä¿®æ”¹Adminæ˜¾ç¤º # mysite/urls.py # ä»¥æœ€ç®€æ–¹å¼ä¿®æ”¹æ ‡é¢˜ç­‰ admin.site.site_header = &amp;#39;Test header&amp;#39; admin.site.site_title = &amp;#39;Test title&amp;#39; admin.site.index_title = &amp;#39;Test index&amp;#39; AdminåŠŸèƒ½æ‰©å±• é«˜çº§åŠŸèƒ½å®šåˆ¶ç»å¸¸ç”¨åˆ°çš„ç±»:
django.contrib.admin.sites.AdminSite django.contrib.admin.options.ModelAdmin django.forms.models.ModelForm django.contrib.admin.options.InlineModelAdmin django.forms.formsets æ¨¡æ¿ åœ¨é¡¹ç›®æ–‡ä»¶å¤¹åˆ›å»ºtemplateså­˜æ”¾æ¨¡æ¿æ–‡ä»¶
# settings.py TEMPLATE_DIR = os.path.join(BASE_DIR, &amp;#39;templates&amp;#39;) TEMPLATES = [ { &amp;#39;BACKEND&amp;#39;: &amp;#39;django.template.backends.django.DjangoTemplates&amp;#39;, &amp;#39;DIRS&amp;#39;: [TEMPLATE_DIR], ... å¸¸ç”¨æ¨¡æ¿:
admin/base.html admin/index.html admin/change_form.html admin/change_list.html å¯é‡è½½æ¨¡æ¿:
åŸºäºé¡¹ç›®çš„: admin/change_form.html åŸºäºappçš„: admin/&amp;lt;my_app&amp;gt;/change_form.html åŸºäºæ¨¡å‹çš„: admin/&amp;lt;my_app&amp;gt;/&amp;lt;my_model&amp;gt;/change_form.html è¦ç‚¹:
 ä½¿ç”¨extendè€Œä¸æ˜¯ é‡è½½/override ä½¿ç”¨ {{ block.super }} æ‰©å±• blocks å¦‚æœæ¶‰åŠæ¨¡æ¿çš„é€’å½’,ä½¿ç”¨è½¯é“¾æ¥çš„æ–¹å¼ åœ¨base.htmlæ‰©å±•å…¨å±€é€šç”¨å—  é…ç½® é…ç½®æ–‡ä»¶ æŒ‡å®šé…ç½®æ–‡ä»¶: ç”¨ DJANGO_SETTINGS_MODULEç¯å¢ƒå˜é‡
# åœ¨Pythonä»£ç ä¸­ä½¿ç”¨settings # settingsæ˜¯å¯¹è±¡è€Œéæ¨¡å—ï¼Œä¸è¦è¿è¡Œæ—¶ä¿®æ”¹ from django.conf import settings  é‚®ä»¶é…ç½® # è®¾ç½®é‚®ä»¶åç«¯ä¸ºConsoleç”¨äºæµ‹è¯•ç›®çš„ # EMAIL_BACKEND = &amp;#39;django.core.mail.backends.console.EmailBackend&amp;#39; EMAIL_HOST = &amp;#39;smtp.exmail.qq.com&amp;#39; EMAIL_PORT = &amp;#39;465&amp;#39; EMAIL_HOST_USER = &amp;#39;demo@xulizhao.com&amp;#39; EMAIL_HOST_PASSWORD = &amp;#39;xxxxxxxx&amp;#39; EMAIL_USE_SSL = True DEFAULT_FROM_EMAIL = &amp;#39;demo@xulizhao.com&amp;#39; éƒ¨ç½² æ€»ä½“ä½¿ç”¨Nginx&#43;gunicorn&#43;wsgiçš„æ–¹å¼éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒ.
ç”Ÿäº§ç¯å¢ƒä¸€å®šè¦ä¿®æ”¹settings.pyä¸ºDEBUG = False
é™æ€æ–‡ä»¶ # settings.py STATIC_ROOT = &amp;#39;/home/xulz/www/mysite/static/&amp;#39; ä¹‹åè¿è¡Œ
# é¦–æ¬¡éƒ¨ç½²è¿è¡Œ # æˆ–é™æ€æ–‡ä»¶æ›´æ–°åè¿è¡Œ ./manage.py collectstatic gunicorn ä¹‹å‰ç”¨Apache&#43;wsgiçš„æ–¹å¼éƒ¨ç½²,ç›¸å¯¹éº»çƒ¦. è¿™æ¬¡ç›´æ¥ä½¿ç”¨gunicorn, ç®€å•åˆ°å†ä¹Ÿä¸æƒ³æApache.
# -D å¸¸é©»è¿›ç¨‹ # -b å¯æŒ‡å®šIP/ç«¯å£ # -w 8 å¯æŒ‡å®šworkerè¿›ç¨‹æ•° gunicorn -D mysite.wsgi --log-file=log.txt --access-logfile=access.log --log-level=info Nginx server { listen 8000; server_name localhost; location / { proxy_pass http://127.0.0.1:8000; proxy_set_header X-Forwarded-For $remote_addr; proxy_set_header Host $http_host; } location /static { autoindex on; alias /home/xulz/www/mysite/static; } } é“¾æ¥ å®˜æ–¹æ–‡æ¡£:
 å¤šè¯­è¨€ è®¾è®¡ç†å¿µ  ç¬¬ä¸‰æ–¹åº”ç”¨:
 django-registration / ä½¿ç”¨æ•™å­¦ DjangoPackages: ç¬¬ä¸‰æ–¹appæ‰©å±•æ±‡æ€»ç½‘ç«™  æ‰©å±•é˜…è¯»:
 Customizing the Django Admin Slide  å…¶ä»–:
 gunicorn poæ–‡ä»¶ç¼–è¾‘
 </content>
    </entry>
    
     <entry>
        <title>Mindsetè¯»ä¹¦ç¬”è®°</title>
        <url>/blog/mindset/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag>
        </tags>
        <content type="html"> Mindsetæ˜¯ä¸€æœ¬è®²æ€ç»´æ¨¡å¼çš„ä¹¦,ä½œè€…æ˜¯æ–¯å¦ç¦å¤§å­¦å¿ƒç†å­¦æ•™æˆ, ä¸å…¶è¯´è¿™æ˜¯ä¸€æœ¬å¿ƒç†å­¦æˆ–æˆåŠŸå­¦è‘—ä½œ, æ›´é‡è¦çš„è¿™æ˜¯ä¸€æœ¬å¾ˆå¥½çš„æ•™è‚²ç†å¿µçš„ä¹¦, å½“ç„¶å¯¹äºä¸ªäººçš„æˆé•¿ä¹Ÿæ˜¯å¾ˆæœ‰å¸®åŠ©çš„.
å¥½å¤šå¹´å‰çœ‹åˆ°æœ‰äººæ¨èè¿™è¾¹ä¹¦,å½“æ—¶åªçŸ¥é“è‹±æ–‡åå­—,è‹±æ–‡ç‰ˆè¯»èµ·æ¥ä¹Ÿå¾ˆæ…¢. åæ¥æ‰çŸ¥é“åŸæ¥å·²æœ‰ä¸­è¯‘ç‰ˆ, äººé‚®çš„&amp;lt;å¿ƒç†å®šå‘ä¸æˆåŠŸ &amp;gt;,ä¸­ä¿¡çš„&amp;lt;çœ‹è§æˆé•¿çš„è‡ªå·± &amp;gt;å’Œæœ€æ–°åæµªçš„&amp;lt;ç»ˆèº«æˆé•¿&amp;gt;å…¶å®éƒ½æ˜¯è¿™æœ¬ä¹¦.
ä¹‹å‰åªçœ‹äº†å¼€å¤´å‡ ç« , ä¹Ÿè®¸å¥½ä¹¦ä½ å¾ˆéš¾é”™è¿‡,å› ä¸ºæ€»ä¼šçœ‹åˆ°æœ‰äººæ¨è,äºæ˜¯æœ€è¿‘å¼€å§‹ç»§ç»­é˜…è¯».

æ¦‚è¦ æœ¬ä¹¦ä»¥ä½œè€…10å¤šå¹´çš„ç ”ç©¶è¡¨æ˜æˆ‘ä»¬è·å¾—çš„æˆåŠŸå¹¶ä¸æ˜¯èƒ½åŠ›å’Œå¤©èµ‹å†³å®šçš„ï¼Œæ›´å—åˆ°æˆ‘ä»¬åœ¨è¿½æ±‚ç›®æ ‡çš„è¿‡ç¨‹ä¸­å±•ç°çš„æ€ç»´æ¨¡å¼çš„å½±å“ã€‚
æˆ‘ä»¬é€šå¸¸å…·æœ‰ä¸¤ç§æ€ç»´æ¨¡å¼ä¸­çš„ä¸€ç§ï¼šå›ºå®šå‹æˆ–æˆé•¿å‹ï¼Œå®ƒä»¬ä½“ç°äº†åº”å¯¹æˆåŠŸä¸å¤±è´¥ã€æˆç»©ä¸æŒ‘æˆ˜æ—¶çš„ä¸¤ç§åŸºæœ¬å¿ƒæ€ã€‚
ä½ è®¤ä¸ºæ‰æ™ºå’ŒåŠªåŠ›å“ªä¸ªé‡è¦ï¼Œèƒ½åŠ›èƒ½å¦é€šè¿‡åŠªåŠ›æ”¹å˜ï¼Œå†³å®šäº†ä½ æ˜¯ä¼šæ»¡è¶³äºæ—¢æœ‰æˆæœè¿˜æ˜¯ä¼šç§¯ææ¢ç´¢æ–°çŸ¥ã€‚åªæœ‰ç”¨æ­£ç¡®çš„æ€ç»´æ¨¡å¼çœ‹å¾…é—®é¢˜ï¼Œæ‰èƒ½æ›´å¥½åœ°è¾¾æˆäººç”Ÿå’ŒèŒä¸šç›®æ ‡ã€‚
é€šè¿‡äº†è§£è‡ªå·±çš„æ€ç»´æ¨¡å¼å¹¶åšå‡ºæ”¹å˜ï¼Œäººä»¬èƒ½ä»¥æœ€ç®€å•çš„æ–¹å¼åŸ¹å…»å¯¹å­¦ä¹ çš„çƒ­æƒ…ï¼Œå’Œåœ¨ä»»ä½•é¢†åŸŸå†…å–å¾—æˆåŠŸéƒ½éœ€è¦çš„æŠ—å‹åŠ›ã€‚
ä¸¤ç§æ€ç»´æ¨¡å¼ è¦åŸ¹å…»è‡ªå·±/å„¿ç«¥å…·æœ‰æˆé•¿å‹æ€ç»´æ¨¡å¼,æ”¹å˜åŸæ¥çš„å›ºå®šå‹æ€ç»´æ¨¡å¼.
ç†å¿µ(å‰æ) å›ºå®šå‹: ç›¸ä¿¡è‡ªå·±çš„æ‰èƒ½æ˜¯ä¸€æˆä¸å˜çš„
æˆé•¿å‹: èƒ½åŠ›æ˜¯å¯ä»¥é€šè¿‡ä½ çš„åŠªåŠ›æ¥åŸ¹å…»çš„
ç”Ÿæ´»æ€åº¦(å¯¹å¾…çƒ¦å¿ƒäº‹) å›ºå®šå‹: æŠŠå‘ç”Ÿçš„äº‹å½“ä½œä¸€ä¸ªè¡¡é‡è‡ªå·±çš„èƒ½åŠ›å’Œä»·å€¼çš„ç›´æ¥æ ‡å°º
æˆé•¿å‹: ä¸ä¼šç»™è‡ªå·±è´´ä¸Šæ ‡ç­¾,æˆ–å¯¹è‡ªå·±å¤±å»ä¿¡å¿ƒ.å³ä½¿æ„Ÿåˆ°æ²®ä¸§,ä¹Ÿå‡†å¤‡å¥½å»æ‰¿æ‹…é£é™©,ç›´é¢æŒ‘æˆ˜,ç»§ç»­ä¸ºæ­¤å¥‹æ–—
å¯¹ç»“æœçš„æ€åº¦ å›ºå®šå‹: æ‰€æœ‰çš„ä¸€åˆ‡éƒ½æ˜¯ä¸ºäº†ç»“æœ.
æˆé•¿å‹: äº«å—è¿‡ç¨‹å¸¦æ¥çš„ä¹è¶£.
å¯¹äºæŒ«æŠ˜å’Œå¤±è´¥
å›ºå®šå‹: è®¤ä¸ºæ²¡æœ‰èƒ½åŠ›åšå¥½,éœ€è¦å¦è¾Ÿè¹Šå¾„. ä¸ä¼šä»å¤±è´¥ä¸­å­¦ä¹ å¹¶çº æ­£è‡ªå·±çš„å¤±è´¥,ç›¸å,å¯èƒ½åªæ˜¯å»å°è¯•ä¿®å¤è‡ªå°Š(æ‰¾å€Ÿå£).
æˆé•¿å‹: æ›´åŠªåŠ›çš„å­¦ä¹ å’Œä»˜å‡º
æˆåŠŸçš„æ„ä¹‰
å›ºå®šå‹: å¸Œæœ›èƒ½å¤Ÿç¡®ä¿è‡ªå·±çš„æˆåŠŸ,è®¤ä¸ºèªæ˜çš„äººåº”è¯¥æ°¸è¿œæ˜¯æˆåŠŸçš„ (ä¸æƒ³æš´éœ²ä¸è¶³)
æˆé•¿å‹: æˆåŠŸæ„å‘³ç€æ‹“å±•è‡ªå·±çš„èƒ½åŠ›èŒƒç•´,å˜å¾—è¶Šæ¥è¶Šèªæ˜ (æ‰ä½æœºä¼šå­¦ä¹ )
å¯¹åŠªåŠ›çš„è®¤è¯† å›ºå®šå‹: å¦‚æœéœ€è¦ä¸ºæŸäº‹ä»˜å‡ºåŠªåŠ›,æ˜¯è‡ªå·±ä¸æ“…é•¿åšæŸäº‹. å®³æ€•åŠªåŠ›åä¾ç„¶å¤±è´¥.
æˆé•¿å‹: å¤©æ‰ä¹Ÿè¦é€šè¿‡åŠªåŠ›è¾¾åˆ°æˆåŠŸ,åŠªåŠ›æ‰èƒ½æ¿€å‘èƒ½åŠ›.
æˆé•¿å‹æ€ç»´æ¨¡å¼ æƒ³è¾¾æˆé‡è¦æˆå°±éœ€è¦æ˜ç¡®çš„å…³æ³¨ç‚¹,å…¨èº«å¿ƒçš„åŠªåŠ›,æ— ç©·æ— å°½çš„ç­–ç•¥,è¿˜æœ‰å­¦ä¹ ä¸­çš„åŒä¼´.
æŒæ¡å­¦ä¹ è¿‡ç¨‹å’ŒåŠ¨åŠ›,åœ¨å­¦ä¹ æ–¹é¢æ„¿æ„å°è¯•å„ç§ä¸åŒçš„æ–¹æ³•. (å…´è¶£æˆ–è€…å¥½å¥‡å¿ƒæ˜¯ä¸»è¦é©±åŠ¨åŠ›)
çˆ±ä¸Šè‡ªå·±åšçš„äº‹,å³ä½¿é¢å¯¹å›°éš¾ä¹Ÿä¼šç»§ç»­çƒ­çˆ±.æœ‰æ—¶æŠ•å…¥ä¸€ä»¶äº‹æƒ…,æ°æ°æ˜¯å› ä¸ºä¸æ“…é•¿åšè¿™ä»¶äº‹.
å¯»æ±‚æŒ‘æˆ˜,æŒ‘æˆ˜è¶Šå¤§,æˆé•¿ç©ºé—´å°±è¶Šå¤§.åœ¨æ‹“å±•è‡ªå·±çš„è¿‡ç¨‹ä¸­æ„Ÿåˆ°å…´å¥‹ä¸å·².
å›ºå®šå‹æ€ç»´æ¨¡å¼ TBC.
</content>
    </entry>
    
     <entry>
        <title>ç”¨kubeadmæ‰‹åŠ¨æ­å»ºKubernetesé›†ç¾¤</title>
        <url>/blog/kubeadm/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag>
        </tags>
        <content type="html"> ç”¨kubesprayåŸºäºAnsibleè‡ªåŠ¨åŒ–å·¥å…·æ­å»ºé›†ç¾¤æ˜¯å¾ˆæ–¹ä¾¿,ä½†æ˜¯ä¸€æ—¦é‡åˆ°é—®é¢˜æŸ¥èµ·æ¥ç»å¸¸æ‰¾ä¸åˆ°å¤´ç»ª,å› ä¸ºä¸çŸ¥æ‰€ä»¥ç„¶.
æ‰€ä»¥å›å½’æœ¬æº,ç”¨å®˜æ–¹æä¾›çš„kubeadmä¸€æ­¥æ­¥å»ºç«‹ä¸€ä¸ªå•ä¸»çš„é›†ç¾¤,å¯ä»¥è®©æˆ‘ä»¬æ›´å®¹æ˜“å¼„æ¸…å®ƒçš„éƒ¨ç½²æ¶æ„.
è¿™ä¹Ÿæ˜¯æ­¤æ–‡/è¿™æ¬¡å®è·µçš„ç›®çš„æ‰€åœ¨.

å‰ææ¡ä»¶ ç¦ç”¨swap sudo swapoff -a # æ°¸ä¹…æ€§ç¦ç”¨ # ç¼–è¾‘/etc/fstabå¹¶æ³¨é‡Šæ‰swapé‚£ä¸€è¡Œ ä¿ç•™ç«¯å£ MasterèŠ‚ç‚¹
   ç»„ä»¶ ç«¯å£ æ³¨é‡Š     API server 6443 å¯é‡æ–°å®šä¹‰   etcd 2379-2380    Kubelet API 10250    kube-scheduler 10251    kube-controller-manage 10252     æ³¨: 2 CPU&#43;
WorkerèŠ‚ç‚¹
   ç»„ä»¶ ç«¯å£ æ³¨é‡Š     Kubelet API 6443    NodePort Services 30000-32767 å¯é‡æ–°å®šä¹‰    Docker å®¹å™¨è¿è¡Œæ—¶é»˜è®¤ä½¿ç”¨docker
å®‰è£…è¯´æ˜ kubeadm, kubelet, kubectl  kubeadm: é›†ç¾¤å¼•å¯¼å‘½ä»¤è¡Œ kubelet: é›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰(Node Agent),ç”¨äºå¯åŠ¨Pod/å®¹å™¨ç­‰ kubectl: äº¤äº’å¼é›†ç¾¤ç®¡ç†å‘½ä»¤è¡Œ  æ³¨: kubeletçš„ç‰ˆæœ¬å·ä¸åº”è¯¥è¶…è¿‡API server
# Ubuntu apt-get update &amp;amp;&amp;amp; apt-get install -y apt-transport-https curl curl -s https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add - cat &amp;lt;&amp;lt;EOF &amp;gt;/etc/apt/sources.list.d/kubernetes.list deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main EOF apt-get update apt-get install -y kubelet kubeadm kubectl apt-mark hold kubelet kubeadm kubectl kubeadm init # å¯ä»¥å…ˆè¿è¡Œä¸‹é¢å‘½ä»¤æ£€æŸ¥åˆ°gcr.ioçš„è¿æ¥æ€§ # kubeadm config images pull # è§£å†³etcd pullå¤±è´¥çš„é—®é¢˜ docker pull xulz/coreos-etcd:v3.2.24 docker tag xulz/coreos-etcd:v3.2.24 gcr.mirrors.ustc.edu.cn/google-containers/etcd:3.2.24 kubeadm init --kubernetes-version=v1.13.1 --image-repository=gcr.mirrors.ustc.edu.cn/google-containers --pod-network-cidr=192.168.0.0/16 # --image-repository æŒ‡å®šé•œåƒmirror,é»˜è®¤k8s.gcr.io # ä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶çš„å½¢å¼ imageRepository: &amp;lt;private-registry&amp;gt;  # rootç”¨æˆ·è¿è¡Œ export KUBECONFIG=/etc/kubernetes/admin.conf # è®°å½•ä¸‹å…³äº kubeadm joinçš„è¾“å‡ºç”¨äºæ·»åŠ èŠ‚ç‚¹ æ³¨: tokenç”¨æˆ·masterå’ŒåŠ å…¥èŠ‚ç‚¹é—´çš„åŒå‘è®¤è¯,éœ€ä¿å¯†. ä¹Ÿå¯ç”¨ kubeadm tokenå‘½ä»¤ç®¡ç†token.
# kubeletç¯å¢ƒå˜é‡ # /var/lib/kubelet/kubeadm-flags.env # kubeleté…ç½®æ–‡ä»¶ # /var/lib/kubelet/config.yaml å®‰è£…Podç½‘ç»œæ’ä»¶ pod networking provider
è¿™é‡Œä½¿ç”¨çš„CNI network pluginæ˜¯Calico,å®ƒéœ€è¦æä¾›CIDR(é»˜è®¤ä½¿ç”¨192.168.0.0/16), å·²ç»åœ¨ä¸Šæ­¥çš„initæä¾›.
# å…ˆè·å–æœ¬åœ°é•œåƒå¹¶tag docker pull xulz/calico-node:v3.3.2 docker tag xulz/calico-node:v3.3.2 quay.io/calico/node:v3.3.2 docker pull xulz/calico-cni:v3.3.2 docker tag xulz/calico-cni:v3.3.2 quay.io/calico/cni:v3.3.2 docker pull quay.mirrors.ustc.edu.cn/calico/typha:v3.3.2 docker tag quay.mirrors.ustc.edu.cn/calico/typha:v3.3.2 quay.io/calico/typha:v3.3.2 ä»¥Calicoä¸ºä¾‹:
kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/rbac-kdd.yaml kubectl apply -f https://docs.projectcalico.org/v3.3/getting-started/kubernetes/installation/hosted/kubernetes-datastore/calico-networking/1.7/calico.yaml # æ£€æŸ¥çŠ¶æ€, CoreDNS podåº”è¯¥å·²ç»è¿è¡Œ kubectl get pods --all-namespaces æ·»åŠ èŠ‚ç‚¹ kubeadm join --token &amp;lt;token&amp;gt; &amp;lt;master-ip&amp;gt;:&amp;lt;master-port&amp;gt; --discovery-token-ca-cert-hash sha256:&amp;lt;hash&amp;gt; # è·å–token kubeadm token list # è·å– --discovery-token-ca-cert-hashçš„å€¼ openssl x509 -pubkey -in /etc/kubernetes/pki/ca.crt | openssl rsa -pubin -outform der 2&amp;gt;/dev/null | \  openssl dgst -sha256 -hex | sed &amp;#39;s/^.* //&amp;#39; # æ£€æŸ¥çŠ¶æ€ kubectl get nodes  åˆ é™¤èŠ‚ç‚¹/æ¸…é™¤ åœ¨MasterèŠ‚ç‚¹æ‰§è¡Œ
kubectl drain &amp;lt;node name&amp;gt; --delete-local-data --force --ignore-daemonsets kubectl delete node &amp;lt;node name&amp;gt; åœ¨è¦åˆ é™¤çš„èŠ‚ç‚¹æ‰§è¡Œ:
# é‡ç½®çŠ¶æ€ kubeadm reset # æ¸…ç†iptables iptables -F &amp;amp;&amp;amp; iptables -t nat -F &amp;amp;&amp;amp; iptables -t mangle -F &amp;amp;&amp;amp; iptables -X å‚è€ƒ kubeadm å‘½ä»¤å‚è€ƒ # è¾“å‡ºé»˜è®¤é…ç½® kubeadm config print # è¾“å‡ºæŒ‡å®šapiå¯¹è±¡ kubeadm config print-default --api-objects KubeletConfiguration # åˆ—å‡º/è·å–kubeadméœ€è¦çš„å®¹å™¨é•œåƒ kubeadm config images list kubeadm config images pull # æŒ‡å®šç‰ˆæœ¬, è·³è¿‡è¯¥åœ°å€çš„æ£€æŸ¥ https://dl.k8s.io/release/stable-1.txt --kubernetes-version=v1.13.1# --configæŒ‡å®šé…ç½®æ–‡ä»¶ kubeadm init --config kubeadm-config.yaml kubeleté…ç½® inité˜¶æ®µ
 /var/lib/kubelet/config.yaml : åŒæ—¶ä¸Šä¼ è‡³kubelet-config-1.Xçš„ConfigMap /etc/kubernetes/kubelet.conf : å­˜å‚¨å®¢æˆ·ç«¯è¯ä¹¦ç”¨äºå’ŒAPI Serveré€šè®¯ /var/lib/kubelet/kubeadm-flags.env : å®ä¾‹ç‰¹å®šçš„ä¿¡æ¯åŠcgroup driver,CRI runtime socket  joiné˜¶æ®µ
 è¯»å–ConfigMapå¹¶å†™å…¥/var/lib/kubelet/config.yaml /etc/kubernetes/bootstrap-kubelet.conf åŒ…å«CA è¯ä¹¦å’ŒBootstrap Token. è¯»å–ä¸Šæ­¥çš„æ–‡ä»¶ç”Ÿæˆ/etc/kubernetes/kubelet.conf  systemdä½¿ç”¨çš„é…ç½®
/etc/systemd/system/kubelet.service.d/10-kubeadm.conf
kubeadm init è¾“å‡ºæ—¥å¿— [init] Using Kubernetes version: v1.13.1 [preflight] Running pre-flight checks [preflight] Pulling images required for setting up a Kubernetes cluster [preflight] This might take a minute or two, depending on the speed of your internet connection [preflight] You can also perform this action in beforehand using &amp;#39;kubeadm config images pull&amp;#39; [kubelet-start] Writing kubelet environment file with flags to file &amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34; [kubelet-start] Writing kubelet configuration to file &amp;#34;/var/lib/kubelet/config.yaml&amp;#34; [kubelet-start] Activating the kubelet service [certs] Using certificateDir folder &amp;#34;/etc/kubernetes/pki&amp;#34; [certs] Generating &amp;#34;front-proxy-ca&amp;#34; certificate and key [certs] Generating &amp;#34;front-proxy-client&amp;#34; certificate and key [certs] Generating &amp;#34;etcd/ca&amp;#34; certificate and key [certs] Generating &amp;#34;etcd/server&amp;#34; certificate and key [certs] etcd/server serving cert is signed for DNS names [xulz-master1 localhost] and IPs [192.168.10.1 127.0.0.1 ::1] [certs] Generating &amp;#34;etcd/peer&amp;#34; certificate and key [certs] etcd/peer serving cert is signed for DNS names [xulz-master1 localhost] and IPs [192.168.10.1 127.0.0.1 ::1] [certs] Generating &amp;#34;apiserver-etcd-client&amp;#34; certificate and key [certs] Generating &amp;#34;etcd/healthcheck-client&amp;#34; certificate and key [certs] Generating &amp;#34;ca&amp;#34; certificate and key [certs] Generating &amp;#34;apiserver&amp;#34; certificate and key [certs] apiserver serving cert is signed for DNS names [xulz-master1 kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local] and IPs [10.96.0.1 192.168.10.1] [certs] Generating &amp;#34;apiserver-kubelet-client&amp;#34; certificate and key [certs] Generating &amp;#34;sa&amp;#34; key and public key [kubeconfig] Using kubeconfig folder &amp;#34;/etc/kubernetes&amp;#34; [kubeconfig] Writing &amp;#34;admin.conf&amp;#34; kubeconfig file [kubeconfig] Writing &amp;#34;kubelet.conf&amp;#34; kubeconfig file [kubeconfig] Writing &amp;#34;controller-manager.conf&amp;#34; kubeconfig file [kubeconfig] Writing &amp;#34;scheduler.conf&amp;#34; kubeconfig file [control-plane] Using manifest folder &amp;#34;/etc/kubernetes/manifests&amp;#34; [control-plane] Creating static Pod manifest for &amp;#34;kube-apiserver&amp;#34; [control-plane] Creating static Pod manifest for &amp;#34;kube-controller-manager&amp;#34; [control-plane] Creating static Pod manifest for &amp;#34;kube-scheduler&amp;#34; [etcd] Creating static Pod manifest for local etcd in &amp;#34;/etc/kubernetes/manifests&amp;#34; [wait-control-plane] Waiting for the kubelet to boot up the control plane as static Pods from directory &amp;#34;/etc/kubernetes/manifests&amp;#34;. This can take up to 4m0s [apiclient] All control plane components are healthy after 21.502262 seconds [uploadconfig] storing the configuration used in ConfigMap &amp;#34;kubeadm-config&amp;#34; in the &amp;#34;kube-system&amp;#34; Namespace [kubelet] Creating a ConfigMap &amp;#34;kubelet-config-1.13&amp;#34; in namespace kube-system with the configuration for the kubelets in the cluster [patchnode] Uploading the CRI Socket information &amp;#34;/var/run/dockershim.sock&amp;#34; to the Node API object &amp;#34;xulz-master1&amp;#34; as an annotation [mark-control-plane] Marking the node xulz-master1 as control-plane by adding the label &amp;#34;node-role.kubernetes.io/master=&amp;#39;&amp;#39;&amp;#34; [mark-control-plane] Marking the node xulz-master1 as control-plane by adding the taints [node-role.kubernetes.io/master:NoSchedule] [bootstrap-token] Using token: r4p7.6fuglhjtitmb [bootstrap-token] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles [bootstraptoken] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials [bootstraptoken] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [bootstraptoken] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [bootstraptoken] creating the &amp;#34;cluster-info&amp;#34; ConfigMap in the &amp;#34;kube-public&amp;#34; namespace [addons] Applied essential addon: CoreDNS [addons] Applied essential addon: kube-proxy Your Kubernetes master has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME/.kube sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config sudo chown $(id -u):$(id -g) $HOME/.kube/config You should now deploy a pod network to the cluster. Run &amp;#34;kubectl apply -f [podnetwork].yaml&amp;#34; with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of machines by running the following on each node as root: kubeadm join 192.168.10.1:6443 --token r4p7.6fuglhjtitmb --discovery-token-ca-cert-hash sha256:12345660bf8a5ff727b3563a4be19abee27785fcc806bbf2e20f82a15a82be06 æ·»åŠ èŠ‚ç‚¹è¾“å‡ºæ—¥å¿— [preflight] Running pre-flight checks [discovery] Trying to connect to API Server &amp;#34;192.168.10.1:6443&amp;#34; [discovery] Created cluster-info discovery client, requesting info from &amp;#34;https://192.168.10.1:6443&amp;#34; [discovery] Requesting info from &amp;#34;https://192.168.10.1:6443&amp;#34; again to validate TLS against the pinned public key [discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server &amp;#34;192.168.10.1:6443&amp;#34; [discovery] Successfully established connection with API Server &amp;#34;192.168.10.1:6443&amp;#34; [join] Reading configuration from the cluster... [join] FYI: You can look at this config file with &amp;#39;kubectl -n kube-system get cm kubeadm-config -oyaml&amp;#39; [kubelet] Downloading configuration for the kubelet from the &amp;#34;kubelet-config-1.13&amp;#34; ConfigMap in the kube-system namespace [kubelet-start] Writing kubelet configuration to file &amp;#34;/var/lib/kubelet/config.yaml&amp;#34; [kubelet-start] Writing kubelet environment file with flags to file &amp;#34;/var/lib/kubelet/kubeadm-flags.env&amp;#34; [kubelet-start] Activating the kubelet service [tlsbootstrap] Waiting for the kubelet to perform the TLS Bootstrap... [patchnode] Uploading the CRI Socket information &amp;#34;/var/run/dockershim.sock&amp;#34; to the Node API object &amp;#34;xulz-node1&amp;#34; as an annotation This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run &amp;#39;kubectl get nodes&amp;#39; on the master to see this node join the cluster. æ–‡ç« åˆ—è¡¨  Installing kubeadm Creating a single master cluster with kubeadm *Creating a Custom Cluster from Scratch </content>
    </entry>
    
     <entry>
        <title>å†æé•œåƒç«™çš„ä½¿ç”¨</title>
        <url>/blog/mirror/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>python</tag>
        </tags>
        <content type="html"> æŠŠæ—¶é—´èŠ±åœ¨ä¸‹è½½è½¯ä»¶æˆ–å¿…é¡»ç¿»è¿‡å»è®¿é—®å¤–éƒ¨ç½‘ç»œæ˜¯è®©äººè‹¦æ¼çš„ä¸€ä»¶äº‹, é•œåƒç«™èƒ½å¾ˆå¥½åœ°è§£å†³ä¸€äº›é—®é¢˜.
æœ€æ—©æ—¶ä½¿ç”¨Ubuntuå›½å†…é•œåƒåŠ é€Ÿè½¯ä»¶æ›´æ–°,åæ¥ä½¿ç”¨è±†ç“£çš„pypié•œåƒå®‰è£…PythonåŒ…,å› ä¸ºä¹‹å‰çš„pypiç«™å®åœ¨å¤ªæ…¢,ç»å¸¸è¶…æ—¶.
æœ€è¿‘ç”¨Dockerå’ŒKuberneteså°±ä¸å¾—ä¸ä½¿ç”¨é•œåƒç«™,ä¹‹å‰ç”¨é˜¿é‡Œçš„è¾ƒå¤š.
å…¶å®è¿˜æœ‰ä¸¤ä¸ªå¾ˆå¥½çš„å›½å†…é•œåƒç«™å°±æ˜¯æ¸…åTUNAå’Œä¸­å›½ç§‘å¤§é•œåƒå¼€æºç«™.
è¿™ä¸¤ä¸ªç«™ç‚¹åŸºæœ¬åŒ…æ‹¬äº†å¸¸ç”¨çš„è½¯ä»¶å¼€å‘å·¥å…·å’Œç¯å¢ƒç­‰,ä¸¾ä¾‹å¦‚ä¸‹:
 Linuxå‘è¡Œç‰ˆ: Ubuntu,CentOS å®‰è£…é•œåƒåŠè½¯ä»¶ä»“åº“ Python: Anaconda,pypi,saltstack Docker CE Grafaba,InfluxData MySQL,PostgreSQL,Percona,MongoDB Apacheå„é¡¹ç›® Cygwin, VirtualBox, Adobeå¼€æºå­—ä½“ Homebrew, MacPort Elastic Stack, Gitlab Android: AOSP Tex: CTAN  å®˜æ–¹è¿˜æä¾›äº†ä¸€ä¸ªpythonè„šæœ¬,æ–¹ä¾¿æœ¬åœ°ç¯å¢ƒä¸€é”®ä½¿ç”¨.
wget https://tuna.moe/oh-my-tuna/oh-my-tuna.py python oh-my-tuna.py ç§‘å¤§çš„è¡¥å……:
 Nginx Golang Kubernetesçš„gcr.ioå’Œquay.io (æ­¤å¤„ç»™ç§‘å¤§çš„åŒå­¦ä¸€ä¸ªå¤§å¤§çš„ğŸ‘)  Kubernetesçš„ä½¿ç”¨è¯´æ˜
# gcr.io/namespace/image_name:image_tag # æ›¿æ¢ä¸º # gcr.mirrors.ustc.edu.cn/namespace/image_name:image_tag gcr.mirrors.ustc.edu.cn/kubernetes-helm/tiller # Kuberneteså®˜æ–¹æ•™ç¨‹ç»å¸¸ç”¨åˆ°k8s.gcr.io, # ç›¸åº”çš„ k8s.gcr.io ç­‰åŒäº gcr.io/google-containers/ # å› æ­¤ k8s.gcr.io/busybox ç­‰ä»·äº gcr.mirrors.ustc.edu.cn/google-containers/busybox # quay.io/calico/cni æ›¿æ¢ä¸º quay.mirrors.ustc.edu.cn/calico/cni P.S: ä¹‹å‰æˆ‘ä½¿ç”¨çš„é•œåƒå·²åœæ­¢ç»´æŠ¤,å‚è€ƒè¿™é‡Œ.
[update]
å†è¡¥ä¸€ä¸ª: é˜¿é‡Œå¼€æºé•œåƒç«™
</content>
    </entry>
    
     <entry>
        <title>ä¹¦æ³•ä¸æ–‡å­—</title>
        <url>/read/shufa/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag><tag>classic</tag>
        </tags>
        <content type="html"> æœ€è¿‘éšç€å¯¹å›½å­¦å’Œå”æ–‡åŒ–çš„å–œçˆ±,å¼€å§‹é‡æ–°æ‹¾èµ·æ¯›ç¬”æ‰¾ä¸€ç‚¹ç©ºéš™æ—¶é—´ç»ƒå­—.

ä¹‹å‰æ‹¿æ¯›ç¬”åº”è¯¥æ˜¯ä¸Šå°å­¦æœŸé—´äº†,å°è±¡æ¯”è¾ƒæ·±çš„æ—¶å†™çš„å­—æ²¡æœ‰ä¸€ä¸ªè¢«æ ‡çº¢åœˆçš„(å†™çš„å¥½),ä¹Ÿæ‰“å‡»äº†å½“æ—¶å­¦ä¹ çš„çƒ­æƒ…. æ¯•ä¸šåä¹Ÿå°è¯•æ”¹è¿›è‡ªå·±å†™å­—çš„ä¼˜ç¾ç¨‹åº¦(å†™å¥½å­—ä¸€ç›´æ˜¯æˆ‘çš„ä¸€ä¸ªç—›ç‚¹),å¤šå¹´å‰ä»å›¾ä¹¦å¤§å¦ä¹°äº†ç”°è‹±ç« çš„ç¡¬ç¬”è¡Œä¹¦æŠ€æ³•,å½“æ—¶ä¸å¾—è¦é¢†åªæ˜¯æ‘¹å†™,åŠ ä¸Šç¡¬ç¬”ç»ƒå¾—å°‘åæ¥ä¾¿è’åºŸäº†.
å¹¸è¿çš„æ—¶ç°åœ¨äº’è”ç½‘çŸ¥è¯†ä¼ æ’­å·²å¾ˆå‘è¾¾,äºæ˜¯é€šè¿‡çŸ¥ä¹/å…¬ä¼—å·/ç”µå­ä¹¦/è§†é¢‘åšäº†ç®€å•çš„ç³»ç»Ÿè®¤çŸ¥, å› æ­¤å­¦èµ·æ¥ä¹Ÿç®—èµ°äº†äº›æ·å¾„. åŒäº‹æ¨èçš„&amp;lt;ç”°è•´ç« æ¯æ—¥ä¸€é¢˜æ¯æ—¥ä¸€å­—&amp;gt;ä¹Ÿè®©æˆ‘å—ç›Šè‰¯å¤š.
æ¯›ç¬”æ¯”ç¡¬ç¬”çš„å¥½å¤„æ˜¯ä»ªå¼æ„Ÿæ›´å¼º, å¯¹å†™å­—çš„è®¤è¯†å’Œè¦æ±‚ä½“ä¼šä¹Ÿæ›´æ·±. é‡è¦çš„æ˜¯åŠŸåˆ©å¿ƒæ€æ¯”è¾ƒè½»,æ›´å¤šä½œä¸ºæ”¾æ¾èº«å¿ƒçš„æ–¹å¼.
æœ€è¿‘åœ¨è¯»çš„&amp;lt;æç®€ä¸­å›½ä¹¦æ³•å²&amp;gt;(åˆ˜æ¶›è‘—)ä¹Ÿè®©æˆ‘å¯¹ä¹¦æ³•çš„å†å²æœ‰äº†æ›´æ·±çš„äº†è§£, æ›´èƒ½ç†è§£ä¸­å›½æ–‡å­—æœ¬èº«å’Œä¹¦å†™ä¹‹ç¾.
ä»çœ‹åˆ°é¸Ÿå…½åœ¨é›ªåœ°çš„è„šå°å¾—åˆ°çµæ„Ÿåˆ›é€ æ–‡å­—,åˆ°æœ€åˆæ—¶çš„è±¡å½¢ä¼šæ„æ— ä¸ä¼ ç¥, å†åˆ°åé¢å„ä¹¦ä½“çš„å‘å±•.
å¤§ç¯†åˆ°å°ç¯†åˆ°æ±‰éš¶çš„åŒ–ç¹ä¸ºç®€,éš¶ä¹¦å‘å±•è‡³è¡Œè‰çš„ç”±é™åˆ°åŠ¨çš„å˜åŒ–ä¹‹ç¾,åˆ°ç°åœ¨ç¬¬ä¸€ä¹¦ä½“æ¥·ä¹¦çš„ç«¯åº„ä¹‹ç¾.
(æœ€å¼€å§‹ä¸ç†è§£ç¯†ä½“ç°ä»£çš„æ„æ€,äº†è§£åæ‰çŸ¥é“ä¸å­¦ä¹ ç¯†ä½“ä½ å°±ä¸çŸ¥é“æ±‰å­—çš„æ¸Šæº,æ¯”å¦‚æœ‰/å³çš„ç¬¬ä¸€ç¬”æ’‡ç”»ä¸ºä»€ä¹ˆå¼€å§‹ç»å¸¸è§åˆ°çŸ­æ¨ª)
é¡ºä¾¿è¯´, äº”å››è¿åŠ¨ä¹‹åæå€¡ç™½è¯æ–‡,è§£æ”¾ååºŸé™¤ç¹ä½“å­—,è¿™äº›å¯¹äºæ–‡å­—ä¹¦å†™è™½ç„¶ä¸åˆ©,ä½†ä¸èƒ½æˆä¸ºæˆ‘ä»¬ä¸å­¦ä¹ æ–‡è¨€æ–‡å’Œç¹ä½“å­—çš„ç†ç”±.
ä¹¦æ³•ä½œä¸ºå›½å­¦çš„ä¸€éƒ¨åˆ†, æ— ç–‘å›½å­¦è¿™ä¸ªå®åº“åº”è¯¥è¢«æ›´å¤šå›½äººå‘ç°å’Œå¼€å‘.
è‡ªå·±æ˜¯ä»æ¬§æ¥·å­¦èµ·çš„,ä¹Ÿè®¸éœ€è¦å¾ˆé•¿ä¸€æ®µæ—¶é—´æ‰èƒ½çœ‹åˆ°æˆæœ, è®¡åˆ’ä¹‹åå†å­¦é¢œæŸ³èµµè¯¸å¤§å®¶,ä½œä¸ºä¸€ä¸ªé•¿ä¹…çš„çˆ±å¥½å§.
</content>
    </entry>
    
     <entry>
        <title>åˆ©å™¨ä¹‹iTerm2</title>
        <url>/blog/iterm2/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>mac</tag><tag>terminal</tag>
        </tags>
        <content type="html"> å¹³æ—¶ç”¨çš„æœ€å¤šçš„ç³»ç»Ÿæ˜¯Windows10å’ŒUbuntu,å¦‚æœè¯´è‹¹æœç³»ç»ŸMacOSæœ‰ä»€ä¹ˆè®©æˆ‘ç¦»ä¸å¼€çš„ç‰¹æ€§çš„è¯,iTerm2ç»å¯¹æ’ç¬¬ä¸€.
å¯è¿™ä¸ªç»å¸¸ä½¿ç”¨çš„å…è´¹ç»ˆç«¯å±…ç„¶æœ‰ä¸€äº›æˆ‘ä¸çŸ¥é“çš„å¥½ç”¨åŠŸèƒ½,ç‰¹è®°å½•ä¸æ­¤.

å‹å¥½ç‰¹æ€§ Split Panels æˆ‘ç»å¸¸ç”¨åˆ°tmux,å±…ç„¶å¿½è§†äº†è¯¥åŠŸèƒ½.
å³é”®å°±å¯ä»¥çœ‹åˆ°.
å¿«æ·é”®: Cmd&#43;d å‚ç›´åˆ†å‰²/ Cmd&#43;Shift&#43;d æ°´å¹³åˆ†å‰²
Autocomplete Cmd &#43; ;è°ƒå‡ºè‡ªåŠ¨æç¤º.
Paste History Cmd &#43; Shift &#43; h
[Preferences]-[General]-&amp;ldquo;Magic&amp;rdquo;-&amp;ldquo;&amp;ldquo;Save copy/paste and command history to disk&amp;rdquo;
é€‰ä¸­å³å¤åˆ¶ æ”¯æŒé¼ æ ‡å’ŒæŸ¥æ‰¾æ¨¡å¼(Cmd&#43;f)çš„Tabå¤åˆ¶
ç³»ç»Ÿçƒ­é”®è°ƒå‡º Hotkeyå®ç°ç±»ä¼¼Linuxä¸­YakuakeåŠŸèƒ½.
[Preferences]-[Keys]ä¸­è®¾ç½®.
å¸¸ç”¨å¿«æ·é”® Cmd&#43;w : å…³é—­çª—å£/é¢æ¿
</content>
    </entry>
    
     <entry>
        <title>LaTeXç”ŸæˆPDFå®è·µ</title>
        <url>/blog/latex/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>document</tag>
        </tags>
        <content type="html"> LaTeXæœ€å¹¿æ³›çš„ç”¨é€”åº”è¯¥æ˜¯åœ¨å­¦æœ¯é¢†åŸŸå†™è®ºæ–‡, å…¶å®åœ¨æ’ç‰ˆ(å°¤å…¶å…¬å¼,æ ¼å¼)ä¸Šä¹Ÿèƒœè¿‡Wordå¾ˆå¤š,ç»å¯¹ä¸“ä¸š.
æœ€è¿‘ä¸ºäº†åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªPDF,åšäº†ä¸€äº›äº†è§£.

ç®€ä»‹ TeX -&amp;gt; LaTeX -&amp;gt; XeLaTex
XeLaTeX æ˜¯åŸºäºTeXçš„ä¸€ä¸ªä¸“ä¸šæ’å­—ç³»ç»Ÿ, å¯¹äºUnicode å’Œ OpenTypeå­—ä½“çš„æ”¯æŒå¾ˆå¥½. å¯ä»¥ç”¨æ¥åˆ›å»ºå¥½çœ‹çš„PDFæ–‡æ¡£.
ç¼–è¾‘å™¨å’Œç¼–è¯‘ TeXLiveåº”è¯¥æ˜¯ç¬¬ä¸€é€‰æ‹©,æ–‡ä»¶å®‰è£…åŒ…æœ‰ç‚¹å¤§(3ä¸ªG),æ¨èåœ¨æ¸…åå¼€æºé•œåƒä¸‹è½½.
 TexLive Windows TexLive Mac - MacTex  ä¸æ¨èä½¿ç”¨BasicTeX/å®‰è£…ä¾èµ–åŒ… æœ€åˆæˆ‘ä½¿ç”¨äº†ç®€æ˜“ç‰ˆçš„BasicTeX, ä½¿ç”¨èµ·æ¥å¾ˆç¹ç,éœ€è¦å®‰è£…å¤§é‡çš„åŒ…/æ ·å¼.
å¦‚æœç›´æ¥å®‰è£…TextLive Fullå¯å¿½ç•¥è¯¥é˜¶æ®µ.
# åœ¨ä½¿ç”¨å‰éœ€è¦å…ˆæ›´æ–°PATH export PATH=/usr/local/texlive/2018basic/bin/x86_64-darwin:$PATH # ä½¿ç”¨åŒ…ç®¡ç†å·¥å…· tlmgr sudo tlmgr update --self --repository http://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet sudo tlmgr install latexmk --repository http://mirrors.tuna.tsinghua.edu.cn/CTAN/systems/texlive/tlnet sudo tlmgr install ctex # å…¶ä»–å¸¸ç”¨ä¾èµ– cjk cjkpunct zhnumber environ trimspaces subfigure multirow tocbibind placeins datatool è§£å†³é”™è¯¯
# å¦‚æœé‡åˆ°ç±»ä¼¼ä¸‹åˆ—é”™è¯¯ # LaTeX Error: File `ctexbook.cls&amp;#39; not found # LaTeX Error: File &amp;#39;&amp;#39;picins.sty&amp;#39;&amp;#39; not Found # å®‰è£…ç›¸åº”åŒ… sudo tlmgr install picins å¯¹Macæ¥è¯´æ–‡ä»¶å®‰è£…åœ¨/usr/local/texlive/2018basic/texmf-dist/tex/latex/, å› æ­¤ä¹Ÿå¯ä»¥é€šè¿‡åˆ›å»ºæ–‡ä»¶å¤¹, æŠŠæ ·å¼å¤åˆ¶åˆ°ç›¸åº”æ–‡ä»¶å¤¹, æˆ–è€…ç›´æ¥å¤åˆ¶åˆ°æ–‡æ¡£ç›®å½•ä¸‹.
èµ„æºé“¾æ¥
 algorithmsåŒ… BasicTeXå®‰è£…è¯´æ˜  ç”ŸæˆPDFæ–‡æ¡£ å®‰è£…å®ŒTexLiveå, æ‰“å¼€TeXworks, Typeseté€‰æ‹©XeLateX
ä¸­æ–‡æ’ç‰ˆ æ¶‰åŠä¸­æ–‡ä¸€èˆ¬ä¼šç”¨åˆ°CTeXå®åŒ…
CTeX-kit æ˜¯ä¸€ç³»åˆ— TeX/LaTeX/ConTeXt å®åŒ…çš„é›†åˆ, ç›¸å…³è„šæœ¬å’Œèµ„æºæ–‡ä»¶, ä¸»è¦é’ˆå¯¹ä¸­æ–‡TeXç”¨æˆ·.
ä¸­æ–‡å­—ä½“ .texæ–‡ä»¶é…ç½®
\setCJKmainfont[AutoFakeBold=true]{AdobeSongStd-Light} \setCJKsansfont{AdobeHeitiStd-Regular} \setCJKmonofont{AdobeFangsongStd-Regular} ä¸­æ˜“å®‹ä½“(SimSun)å’Œåæ–‡å®‹ä½“(STSong)åˆ†åˆ«æ˜¯ Windows å’Œ Mac OS X é»˜è®¤çš„ç®€ä½“ä¸­æ–‡å®‹ä½“.
é€šå¸¸ä¹Ÿä¼šç”¨åˆ°Adobeä¸­æ–‡å­—ä½“,å¯åˆ°ä»¥ä¸‹ç½‘å€ä¸‹è½½:
 å­—ä½“åº“ä¸‹è½½ fontsmarket  # æŸ¥çœ‹å½“å‰ç³»ç»Ÿä¸­æ–‡å­—ä½“ # Macç›´æ¥ä½¿ç”¨ç³»ç»Ÿçš„Font Book/å­—ä½“å†Œ # æ‰¾åˆ°å¯¹åº”å­—ä½“æŒ‰Command&#43;ié”®,å°±ä¼šæ˜¾ç¤ºå­—ä½“çš„è¯¦ç»†ä¿¡æ¯,postScriptå³å­—ä½“å  fc-list;lang=zh-cn æ‰©å±•é˜…è¯»  ctanå®˜æ–¹åŒ…ä»“åº“ Travis-CIä¸Latexæ„å»ºå¼€æºä¸­æ–‡PDF ä¸­ç§‘å¤§è®ºæ–‡æ¨¡æ¿ </content>
    </entry>
    
     <entry>
        <title>Kuberneteså‘½åç©ºé—´çš„åº”ç”¨</title>
        <url>/blog/k8s-namespace/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag>
        </tags>
        <content type="html"> åœ¨å®é™…åº”ç”¨ä¸­å­˜åœ¨ä¸€ä¸ªKubernetesé›†ç¾¤ä¸­å¤šä¸ªéƒ¨ç½²ç¯å¢ƒçš„é—®é¢˜,æ¯”å¦‚å­˜åœ¨dev,qa,stageç­‰.
å¦‚æœéƒ¨ç½²åœ¨ä¸€ä¸ªé›†ç¾¤ä¼šçœå»ä¸å°‘è¿ç»´æˆæœ¬ä¸”èŠ‚çœèµ„æºå ç”¨.
é€šå¸¸è¿™ä¼šç”¨åˆ°å‘½åç©ºé—´çš„ç‰¹æ€§.

Namespaces å‘½åç©ºé—´ å‘½åç©ºé—´å¯ä»¥è¢«çœ‹åšvirtual cluster/è™šæ‹Ÿé›†ç¾¤.
é»˜è®¤å­˜åœ¨defaultå’Œkube-systemä¸¤ä¸ªå‘½åç©ºé—´.
ç”¨æˆ·çš„æ™®é€šåº”ç”¨é»˜è®¤æ˜¯åœ¨defaultä¸‹ï¼Œä¸é›†ç¾¤ç®¡ç†ç›¸å…³çš„ä¸ºæ•´ä¸ªé›†ç¾¤æä¾›æœåŠ¡çš„åº”ç”¨ä¸€èˆ¬éƒ¨ç½²åœ¨kube-systemçš„namespaceä¸‹.
åˆ›å»ºæ–°çš„å‘½åç©ºé—´
namespace-dev.yml
kind:NamespaceapiVersion:v1metadata:name:dev-spacelabels:name:dev-space  kubectl create -f namespace-dev.yml
 kubectl get ns # æŒ‡å®šå‘½åç©ºé—´ kubectl -n &amp;lt;namespace&amp;gt; kubectl get services â€”namespace=&amp;lt;my-space&amp;gt; ç»™å‘½åç©ºé—´æŒ‡æ´¾context/ä¸Šä¸‹æ–‡ ä¸€æ—¦åˆ‡æ¢ä¸Šä¸‹æ–‡, kubectlå‘½ä»¤çš„æ‰§è¡Œ(å¢æ”¹åˆ )ä¼šåœ¨è¯¥å‘½åç©ºé—´è¿è¡Œ.
# ç»‘å®šå‘½åç©ºé—´å’Œä¸Šä¸‹æ–‡çš„å…³ç³» kubectl config set-context dev --namespace=dev --cluster=minikube --user=minukube # åˆ‡æ¢åˆ°Dev context kubectl config use-context dev # æ ¸å®å½“å‰context kubectl config current-context # Delete dev namespace kubectl delete namespaces dev æ‰©å±•é˜…è¯»  Dynamic Environments with Kubernetes Gitlabå’ŒKubernetesåšé›†æˆéƒ¨ç½² </content>
    </entry>
    
     <entry>
        <title>è¿ç§»è‡³Python3</title>
        <url>/blog/python3/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>python</tag>
        </tags>
        <content type="html"> ç”¨è¿‡Pythonçš„éƒ½çŸ¥é“,ä»–æœ‰ä¸¤ä¸ªäº’ä¸å…¼å®¹çš„å¤§ç‰ˆæœ¬Python2å’ŒPython3,ç”±äºå†å²é—ç•™é—®é¢˜è®¸å¤šç”Ÿäº§ç¯å¢ƒæˆ–åº“è¿˜åªæ”¯æŒè€ç‰ˆæœ¬Python2.
å®é™…ä¸Š2.7å·²ç»å‘å¸ƒäº†è¿‘8å¹´,ä¸”æ˜¯æœ€åä¸€ä¸ª2.xçš„å¤§ç‰ˆæœ¬,å¹¶ä¸”å°†äº2010(ä¸¤å¹´å)å½»åº•åœæ­¢ç»´æŠ¤,é€€å‡ºå†å²èˆå°.
Python3åœ¨ä¸¤å¹´å‰åŠæ›´æ—©æ—¶çš„åº“æ”¯æŒå’Œåº”ç”¨èŒƒå›´ç¡®å®ä¸å¤ªå¥½,æœ‰é€‰æ‹©å›°éš¾ç—‡çš„åŒå­¦éƒ½è½¬å»Goè¯­è¨€äº†:) .
å¹¸è¿çš„æ˜¯è¿‘ä¸¤å¹´ä¸»æµåº“/æ¡†æ¶éƒ½å·²æ”¯æŒPython3,æ¯•ç«Ÿå‘å¸ƒå·²ç»10å¹´å¤šäº†,åœ¨æ–°é¡¹ç›®ä¸­æ¯«æ— ç–‘é—®å¿…é¡»ç”¨Python3.
ä¹‹å‰æˆ‘åœ¨ä¸¤ä¸ªæ–°é¡¹ç›®å·²ç»ä½¿ç”¨Python3,æœ€è¿‘æŠŠä¸€ä¸ªè€é¡¹ç›®ä¹Ÿå½»åº•è¿ç§»è¿‡æ¥, è¿™é‡Œè®°å½•ä¸‹ä¸€äº›çŸ¥è¯†ç‚¹.

stringå’Œunicode Python 2 çš„ str æ˜¯ bytes, Python 3 çš„ str æ˜¯ unicode.
# å­—ç¬¦ä¸²å’ŒäºŒè¿›åˆ¶è½¬æ¢ unicode_string.encode() # é»˜è®¤utf-8 byte_string.decode() # splitç°åœ¨æ˜¯bytesçš„æ–¹æ³• # requests.get(xxx).contentè¿”å›bytesç±»å‹ your_content.split(b&amp;#39;,&amp;#39;) # base64ç¼–ç åè¿”å›å­—èŠ‚ç±»å‹,è½¬æ¢ä¸ºstr base64.b64encode(some_bytes).decode() è¯­æ³•å˜åŒ–  ä½¿ç”¨print() exceptè¯­å¥  æœ‰ç”¨çš„æŠ€å·§ ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æç¤ºå…¼å®¹æ€§é—®é¢˜:
 python2 -3å‚æ•° æç¤ºwarning python3 -bbå‚æ•° æç¤ºå­—ç¬¦ä¸²å¤„ç†å·®å¼‚  # åˆ¤æ–­å½“å‰è¿è¡Œç‰ˆæœ¬ PY3 = sys.version_info[0] == 3# å®‰è£…pip3 python3 -m ensurepip å…¼å®¹2å’Œ3 é™¤éè¿«ä¸å¾—å·²,åº”è¯¥åªæ”¯æŒPython3
å¦‚æœè¦å…¼å®¹å‚è€ƒ:
 å®˜æ–¹è¿ç§»æŒ‡å— Cheat Sheet: Writing Python 2-3 compatible code:å¦‚ä½•å†™å…¼å®¹çš„ä»£ç   æ‰©å±•é˜…è¯»  Pragmatic Unicode :å…³äºunicodeçš„é€šä¿—è®²è§£  ä»£ç ç‰‡æ®µ # å¯¹ç§°åŠ å¯†ç§»é™¤paddingçš„å¸®åŠ©å‡½æ•°(py2ç‰ˆæœ¬ä¸é€‚ç”¨äºpy3) def unpad(bytestring, k=16): &amp;#34;&amp;#34;&amp;#34; Remove the PKCS#7 padding from a text bytestring. &amp;#34;&amp;#34;&amp;#34; val = bytestring[-1] if val &amp;gt; k: raise ValueError(&amp;#39;Input is not padded or padding is corrupt&amp;#39;) l = len(bytestring) - val return bytestring[:l] def pad(bytestring, k=16): &amp;#34;&amp;#34;&amp;#34; Pad an input bytestring according to PKCS#7 &amp;#34;&amp;#34;&amp;#34; l = len(bytestring) val = k - (l % k) return bytestring &#43; bytearray([val] * val)</content>
    </entry>
    
     <entry>
        <title>è®¾è®¡æ•°æ®å¯†é›†å‹åº”ç”¨ç¬”è®°</title>
        <url>/blog/ddia/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>distributed</tag><tag>database</tag>
        </tags>
        <content type="html"> å»å¹´å°±çœ‹åˆ°æ€»æœ‰äººæ¨èè¿™æœ¬ä¹¦(ç®€ç§°DDIA),æœ€åˆæ‰‹é‡Œåªæœ‰è‹±æ–‡ç‰ˆ,ç¼“æ…¢çš„è¯»äº†ä¸ªå¼€å¤´åæ¥å°±å¿™åˆ«çš„å»äº†.
ä»Šå¹´å¶ç„¶çœ‹åˆ°ç½‘ä¸Šæœ‰ä¸­è¯‘ç‰ˆ,æƒ­æ„§çš„æ˜¯åˆ°äº†å¹´åº•,æœ€è¿‘å‡ ä¸ªæœˆæ‰è¯»æ¥.
ä¹¦çš„ä¿¡æ¯é‡å¾ˆå¤§,å¯¹æ•°æ®åº“å’Œåˆ†å¸ƒå¼ç³»ç»Ÿæ„Ÿå…´è¶£çš„å°¤å…¶å€¼å¾—ä¸€è¯».

æš‚æ—¶è¿˜å‰©ç¬¬ä¸‰éƒ¨åˆ†æ²¡è¯»å®Œ,å…ˆè®°äº›å‡Œä¹±çš„ç¬”è®°.
æ•°æ®å¯†é›†å‹:
 æ•°æ®æ˜¯ä¸»è¦æŒ‘æˆ˜,æ¶‰åŠæ•°æ®é‡,æ•°æ®å¤æ‚åº¦å’Œæ•°æ®å˜åŒ–é€Ÿåº¦. äºæ­¤å¯¹åº”çš„æ˜¯è®¡ç®—å¯†é›†å‹.  ç¬¬ä¸€éƒ¨åˆ†:æ•°æ®ç³»ç»ŸåŸºç¡€ æ•°æ®ç³»ç»Ÿè®¾è®¡çš„åŸºæœ¬æ€æƒ³
ç¬¬ä¸€ç« : å¯é æ€§,å¯æ‰©å±•æ€§,å¯ç»´æŠ¤æ€§ å¯é æ€§:
 è¦è®¾è®¡å…·æœ‰å®¹é”™/éŸ§æ€§çš„ç³»ç»Ÿä»¥åº”å¯¹å„ç§æ•…éšœ. å¸¸è§çš„æ•…éšœç§ç±»: ç¡¬ä»¶æ•…éšœ è½¯ä»¶é”™è¯¯ äººä¸ºé”™è¯¯  å¯æ‰©å±•æ€§: ç”¨è´Ÿè½½å‚æ•°æè¿°è´Ÿè½½
æè¿°æ€§èƒ½:
 Throughout Response Time(å®¢æˆ·ç«¯æ„Ÿå—æ—¶é—´,åŒºåˆ«äºLatency). å“åº”æ—¶é—´é‡è§†æ—¶é—´åˆ†å¸ƒ,å³ä½¿ç”¨ç™¾åˆ†ä½è€Œä¸æ˜¯å¹³å‡æ•°  è½¯ä»¶ç³»ç»Ÿçš„ä¸‰ä¸ªè®¾è®¡åŸåˆ™
 å¯æ“ä½œæ€§(è¿ç»´å‹å¥½) ç®€å•æ€§(å¥½çš„æŠ½è±¡) å¯æ¼”åŒ–æ€§/å¯æ‰©å±•æ€§/å¯ä¿®æ”¹æ€§/å¯å¡‘æ€§  ç¬¬äºŒç« :æ•°æ®æ¨¡å‹å’ŒæŸ¥è¯¢è¯­è¨€ æ•°æ®æ¨¡å‹: æ•°æ®çš„å­˜å‚¨å’ŒæŸ¥è¯¢ç­‰
 å…³ç³»æ¨¡å‹: äº‹åŠ¡å¤„ç†å’Œæ‰¹å¤„ç† æ–‡æ¡£æ¨¡å‹: å¯¹å¤šå¯¹å¤šå’Œè¿æ¥(è®°å½•ä¹‹é—´å­˜åœ¨å…³ç³»)æ”¯æŒè¾ƒå·® å›¾æ¨¡å‹  å…³ç³»æ¨¡å‹ å­˜å‚¨IDè¿˜æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²æ˜¯ä¸ªå‰¯æœ¬(duplication)é—®é¢˜,å»é™¤å†—ä½™å‰¯æœ¬æ˜¯æ•°æ®åº“è§„èŒƒåŒ–çš„å…³é”®æ€æƒ³.
å£°æ˜å¼æŸ¥è¯¢è¯­è¨€(SQL)ç›¸å¯¹å‘½ä»¤å¼çš„ä¼˜åŠ¿:
 æ¯”å‘½ä»¤å¼APIæ›´ç®€æ´å’Œå®¹æ˜“ éšè—äº†æ•°æ®å¼•æ“çš„å®ç°ç»†èŠ‚  æ–‡æ¡£æ•°æ®åº“ é€‚ç”¨äºå¤§å¤šæ•°å…³ç³»éƒ½æ˜¯ä¸€å¯¹å¤šå…³ç³»(æ ‘çŠ¶ç»“æ„åŒ–æ•°æ®)
æ–‡æ¡£æ•°æ®åº“çš„åº”ç”¨åœºæ™¯æ˜¯ï¼šæ•°æ®é€šå¸¸æ˜¯è‡ªæˆ‘åŒ…å«çš„ï¼Œè€Œä¸”æ–‡æ¡£ä¹‹é—´çš„å…³ç³»éå¸¸ç¨€å°‘ã€‚
å‡†ç¡®çš„è¯´æ–‡æ¡£æ•°æ®åº“ å¹¶ä¸æ˜¯æ— æ¨¡å¼(schemaless),åº”è¯¥æ˜¯schema-on-read(éšå«çš„æ•°æ®ç»“æ„).
JSONè¡¨ç¤ºæ¯”å¤šè¡¨æ¨¡å¼å…·æœ‰æ›´å¥½çš„å±€éƒ¨æ€§(locality).
ç¬¬ä¸‰ç«  ä¸»æµçš„ä¸¤å¤§ç±»å­˜å‚¨å¼•æ“ï¼š
 æ—¥å¿—ç»“æ„ï¼ˆlog-structuredï¼‰çš„å­˜å‚¨å¼•æ“ é¢å‘é¡µé¢ï¼ˆpage-orientedï¼‰çš„å­˜å‚¨å¼•æ“ï¼ˆä¾‹å¦‚Bæ ‘ï¼‰  æ—¥å¿—ç»“æ„å­¦æ´¾ æ—¥å¿—/log:ä»…è¿½åŠ çš„æ•°æ®æ–‡ä»¶. (åªå…è®¸é™„åŠ åˆ°æ–‡ä»¶å’Œåˆ é™¤è¿‡æ—¶çš„æ–‡ä»¶ï¼Œä½†ä¸ä¼šæ›´æ–°å·²ç»å†™å…¥çš„æ–‡ä»¶)
å“ˆå¸Œç´¢å¼•: Bitcask(Riaké»˜è®¤å­˜å‚¨å¼•æ“)
SSTables(æ’åºå­—ç¬¦ä¸²è¡¨ï¼ˆSorted String Tableï¼‰)åˆ¶ä½œLSMæ ‘/æ—¥å¿—ç»“æ„åˆå¹¶æ ‘
Bloomè¿‡æ»¤å™¨/å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ç”¨äºè¿‘ä¼¼é›†åˆå†…å®¹çš„å†…å­˜é«˜æ•ˆæ•°æ®ç»“æ„ï¼Œå®ƒå¯ä»¥å‘Šè¯‰æ‚¨æ•°æ®åº“ä¸­æ˜¯å¦å‡ºç°é”®ï¼Œä»è€Œä¸ºä¸å­˜åœ¨çš„é”®èŠ‚çœè®¸å¤šä¸å¿…è¦çš„ç£ç›˜è¯»å–æ“ä½œ.
LSMæ ‘æ€§èƒ½ä¼˜åŠ¿:
ç”±äºæ•°æ®æŒ‰æ’åºé¡ºåºå­˜å‚¨ï¼Œå› æ­¤å¯ä»¥é«˜æ•ˆåœ°æ‰§è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ˆæ‰«ææ‰€æœ‰é«˜äºæŸäº›æœ€å°å€¼å’Œæœ€é«˜å€¼çš„æ‰€æœ‰é”®ï¼‰ï¼Œå¹¶ä¸”å› ä¸ºç£ç›˜å†™å…¥æ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥LSMæ ‘å¯ä»¥æ”¯æŒéå¸¸é«˜çš„å†™å…¥ååé‡ã€‚
å°±åœ°æ›´æ–°å­¦æ´¾ å°†ç£ç›˜è§†ä¸ºä¸€ç»„å¯ä»¥è¦†ç›–çš„å›ºå®šå¤§å°çš„é¡µé¢ã€‚ä¾‹å­:Bæ ‘.
æ—¥å¿—ç»“æ„ç´¢å¼•å°†æ•°æ®åº“åˆ†è§£ä¸ºå¯å˜å¤§å°çš„æ®µï¼Œé€šå¸¸æ˜¯å‡ å…†å­—èŠ‚æˆ–æ›´å¤§çš„å¤§å°ï¼Œå¹¶ä¸”æ€»æ˜¯æŒ‰é¡ºåºç¼–å†™æ®µã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒBæ ‘å°†æ•°æ®åº“åˆ†è§£æˆå›ºå®šå¤§å°çš„å—æˆ–é¡µé¢.
ä¸ºäº†ä½¿æ•°æ®åº“å¯¹å´©æºƒå…·æœ‰éŸ§æ€§ï¼ŒBæ ‘å®ç°é€šå¸¸ä¼šå¸¦æœ‰ä¸€ä¸ªé¢å¤–çš„ç£ç›˜æ•°æ®ç»“æ„ï¼šé¢„å†™å¼æ—¥å¿—ï¼ˆWAL, write-ahead-logï¼‰/ é‡åšæ—¥å¿—(redo log)
å¹¶å‘æ§åˆ¶ä½¿ç”¨é”å­˜å™¨ï¼ˆlatchesï¼‰ï¼ˆè½»é‡çº§é”ï¼‰ä¿æŠ¤æ ‘çš„æ•°æ®ç»“æ„æ¥å®Œæˆ.
æ ¹æ®ç»éªŒï¼Œé€šå¸¸LSMæ ‘çš„å†™å…¥é€Ÿåº¦æ›´å¿«ï¼Œè€ŒBæ ‘çš„è¯»å–é€Ÿåº¦æ›´å¿«ã€‚ LSMæ ‘ä¸Šçš„è¯»å–é€šå¸¸æ¯”è¾ƒæ…¢ï¼Œå› ä¸ºå®ƒä»¬å¿…é¡»åœ¨å‹ç¼©çš„ä¸åŒé˜¶æ®µæ£€æŸ¥å‡ ä¸ªä¸åŒçš„æ•°æ®ç»“æ„å’ŒSSTablesã€‚
å†…å­˜æ•°æ®åº“çš„æ€§èƒ½ä¼˜åŠ¿å¹¶ä¸æ˜¯å› ä¸ºå®ƒä»¬ä¸éœ€è¦ä»ç£ç›˜è¯»å–çš„äº‹å®ã€‚ç›¸åï¼Œå®ƒä»¬æ›´å¿«çš„åŸå› åœ¨äºçœå»äº†å°†å†…å­˜æ•°æ®ç»“æ„ç¼–ç ä¸ºç£ç›˜æ•°æ®ç»“æ„çš„å¼€é”€ã€‚
æ•°æ®ä»“åº“ æ•°æ®ä»“åº“æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ•°æ®åº“ï¼Œåˆ†æäººå‘˜å¯ä»¥æŸ¥è¯¢éœ€è¦çš„å†…å®¹ï¼Œè€Œä¸å½±å“OLTPæ“ä½œã€‚ æ•°æ®ä»“åº“åŒ…å«å…¬å¸æ‰€æœ‰å„ç§OLTPç³»ç»Ÿä¸­çš„åªè¯»æ•°æ®å‰¯æœ¬ã€‚ ä»OLTPæ•°æ®åº“ä¸­æå–æ•°æ®ï¼ˆä½¿ç”¨å®šæœŸçš„æ•°æ®è½¬å‚¨æˆ–è¿ç»­çš„æ›´æ–°æµï¼‰ï¼Œè½¬æ¢æˆé€‚åˆåˆ†æçš„æ¨¡å¼ï¼Œæ¸…ç†å¹¶åŠ è½½åˆ°æ•°æ®ä»“åº“ä¸­ã€‚å°†æ•°æ®å­˜å…¥ä»“åº“çš„è¿‡ç¨‹ç§°ä¸º&amp;rdquo;æŠ½å–-è½¬æ¢-åŠ è½½ï¼ˆETLï¼‰&amp;rdquo;
 åœ¨çº¿äº‹åŠ¡å¤„ç†ï¼ˆOLTP, OnLine Transaction Processingï¼‰ åœ¨çº¿åˆ†æå¤„ç†ï¼ˆOLAP, OnLine Analytice Processingï¼‰  æ˜Ÿå‹æ¨¡å¼/ç»´åº¦å»ºæ¨¡
ç”±äº‹å®è¡¨å’Œç»´åº¦è¡¨ç»„æˆ.
åˆ—å­˜å‚¨
ç¬¬å››ç« :ç¼–ç ä¸æ¼”åŒ– å°†æ•°æ®ç»“æ„è½¬æ¢ä¸ºç½‘ç»œä¸­çš„å­—èŠ‚æˆ–ç£ç›˜ä¸Šçš„å­—èŠ‚çš„å‡ ç§æ–¹æ³•ã€‚æˆ‘ä»¬çœ‹åˆ°äº†è¿™äº›ç¼–ç çš„ç»†èŠ‚ä¸ä»…å½±å“å…¶æ•ˆç‡ï¼Œæ›´é‡è¦çš„æ˜¯åº”ç”¨ç¨‹åºçš„ä½“ç³»ç»“æ„å’Œéƒ¨ç½²å®ƒä»¬çš„é€‰é¡¹ã€‚
æœåŠ¡æ”¯æŒæ»šåŠ¨å‡çº§éœ€è¦æä¾›å‘åå…¼å®¹æ€§ï¼ˆæ–°ä»£ç å¯ä»¥è¯»å–æ—§æ•°æ®ï¼‰å’Œå‘å‰å…¼å®¹æ€§ï¼ˆæ—§ä»£ç å¯ä»¥è¯»å–æ–°æ•°æ®ï¼‰çš„æ–¹å¼è¿›è¡Œç¼–ç .
 ç¼–ç¨‹è¯­è¨€ç‰¹å®šçš„ç¼–ç  JSONï¼ŒXMLå’ŒCSVç­‰æ–‡æœ¬æ ¼å¼ äºŒè¿›åˆ¶æ¨¡å¼é©±åŠ¨æ ¼å¼  äºŒè¿›åˆ¶æ¨¡å¼é©±åŠ¨æ ¼å¼å…è®¸ä½¿ç”¨æ¸…æ™°å®šä¹‰çš„å‰å‘å’Œåå‘å…¼å®¹æ€§è¯­ä¹‰è¿›è¡Œç´§å‡‘ï¼Œé«˜æ•ˆçš„ç¼–ç ã€‚
å¯¹äºé™æ€ç±»å‹ç¼–ç¨‹è¯­è¨€çš„ç”¨æˆ·æ¥è¯´ï¼Œä»æ¨¡å¼ç”Ÿæˆä»£ç çš„èƒ½åŠ›æ˜¯æœ‰ç”¨çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚
 Thrift Protocol Buffers Avro  æ•°æ®æµçš„å‡ ç§æ¨¡å¼
 æ•°æ®åº“ RPCå’ŒREST API å¼‚æ­¥æ¶ˆæ¯ä¼ é€’(æ¶ˆæ¯ä»£ç†æˆ–Actoræ¨¡å‹)  RESTä¼¼ä¹æ˜¯å…¬å…±APIçš„ä¸»è¦é£æ ¼ã€‚ RPCæ¡†æ¶çš„ä¸»è¦é‡ç‚¹åœ¨äºåŒä¸€ç»„ç»‡æ‹¥æœ‰çš„æœåŠ¡ä¹‹é—´çš„è¯·æ±‚ï¼Œé€šå¸¸åœ¨åŒä¸€æ•°æ®ä¸­å¿ƒå†…ã€‚
ç¬¬äºŒéƒ¨åˆ†:åˆ†å¸ƒå¼æ•°æ®ç³»ç»Ÿ  å…±äº«æ¶æ„:  å…±äº«å†…å­˜æ¶æ„ï¼ˆshared-memory architectureï¼‰: å‚ç›´æ‰©å±•ï¼ˆvertical scalingï¼‰æˆ–å‘ä¸Šæ‰©å±•ï¼ˆscale upï¼‰ å…±äº«ç£ç›˜æ¶æ„ï¼ˆshared-disk architectureï¼‰: ç½‘ç»œé™„å±å­˜å‚¨ï¼ˆNetwork Attached Storage, NASï¼‰æˆ–å­˜å‚¨åŒºç½‘ç»œï¼ˆStorage Area Network, SANï¼‰  æ— å…±äº«æ¶æ„ï¼ˆshared-nothing architectureï¼‰: æ°´å¹³æ‰©å±•ï¼ˆhorizontal scaleï¼‰ æˆ–å‘å¤–æ‰©å±•ï¼ˆscale outï¼‰  NUMA: éå‡åŒ€å†…å­˜è®¿é—®ï¼ˆnonuniform memory accessï¼‰
æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šæœ‰ä¸¤ç§å¸¸è§çš„æ–¹å¼ï¼š
 å¤åˆ¶ï¼ˆReplicationï¼‰ åˆ†åŒº (Partitioning) : ä¸åŒçš„åˆ†åŒºå¯ä»¥æŒ‡æ´¾ç»™ä¸åŒçš„èŠ‚ç‚¹ï¼ˆnodeï¼‰, äº¦ç§°åˆ†ç‰‡ï¼ˆshardï¼‰  ç¬¬äº”ç« : å¤åˆ¶ å•ä¸»å¤åˆ¶ åŠåŒæ­¥ï¼ˆsemi-synchronousï¼‰é…ç½®: åœ¨æ•°æ®åº“ä¸Šå¯ç”¨åŒæ­¥å¤åˆ¶ï¼Œé€šå¸¸æ„å‘³ç€å…¶ä¸­ä¸€ä¸ªè·Ÿéšè€…æ˜¯åŒæ­¥çš„ï¼Œè€Œå…¶ä»–çš„åˆ™æ˜¯å¼‚æ­¥çš„ã€‚è¿™ä¿è¯ä½ è‡³å°‘åœ¨ä¸¤ä¸ªèŠ‚ç‚¹ä¸Šæ‹¥æœ‰æœ€æ–°çš„æ•°æ®å‰¯æœ¬ï¼šä¸»åº“å’ŒåŒæ­¥ä»åº“ã€‚
å¤„ç†èŠ‚ç‚¹å®•æœº
 ä»åº“å¤±æ•ˆï¼šè¿½èµ¶æ¢å¤ ä¸»åº“å¤±æ•ˆï¼šæ•…éšœè½¬ç§»ï¼ˆfailoverï¼‰,éœ€è¦è®¤çœŸè€ƒè™‘å¯èƒ½çš„æƒ…å†µ  å¤åˆ¶æ—¥å¿—çš„å®ç°
 åŸºäºè¯­å¥çš„å¤åˆ¶(å‰¯ä½œç”¨å¤ªå¤§,é€šå¸¸ä¸ä½¿ç”¨) ä¼ è¾“é¢„å†™å¼æ—¥å¿—ï¼ˆWALï¼‰ é€»è¾‘æ—¥å¿—å¤åˆ¶ï¼ˆåŸºäºè¡Œï¼‰: å¤åˆ¶å’Œå­˜å‚¨å¼•æ“ä½¿ç”¨ä¸åŒçš„æ—¥å¿—æ ¼å¼ åŸºäºè§¦å‘å™¨çš„å¤åˆ¶: è¾ƒçµæ´»,ä½†å¼€é”€è¾ƒå¤§  å¤šä¸»å¤åˆ¶ å¤šé¢†å¯¼è€…é…ç½®ï¼ˆä¹Ÿç§°å¤šä¸»ã€å¤šæ´»å¤åˆ¶ï¼‰,é€šå¸¸ç”¨äºå¤šæ•°æ®ä¸­å¿ƒ.
å®ç°: CouchDB
æ— ä¸»å¤åˆ¶ leaderless
å¤åˆ¶å»¶è¿Ÿé—®é¢˜(æœ€ç»ˆä¸€è‡´æ€§)  è¯»å·±ä¹‹å†™ å•è°ƒè¯»ï¼ˆMonotonic readsï¼‰: æ¯”å¼ºä¸€è‡´æ€§ï¼ˆstrong consistencyï¼‰æ›´å¼±ï¼Œä½†æ¯”æœ€ç»ˆä¸€è‡´æ€§ï¼ˆeventually consistencyï¼‰æ›´å¼ºçš„ä¿è¯ ä¸€è‡´å‰ç¼€è¯»: å¦‚æœä¸€ç³»åˆ—å†™å…¥æŒ‰æŸä¸ªé¡ºåºå‘ç”Ÿï¼Œé‚£ä¹ˆä»»ä½•äººè¯»å–è¿™äº›å†™å…¥æ—¶ï¼Œä¹Ÿä¼šçœ‹è§å®ƒä»¬ä»¥åŒæ ·çš„é¡ºåºå‡ºç°  ç¬¬å…­ç« : åˆ†åŒº/Partitions é”®å€¼æ•°æ®çš„åˆ†åŒº
 æ ¹æ®é”®çš„èŒƒå›´åˆ†åŒº:å­˜åœ¨åæ–œå’Œçƒ­ç‚¹çš„é—®é¢˜ æ ¹æ®é”®çš„æ•£åˆ—åˆ†åŒº  åˆ†ç‰‡ä¸æ¬¡çº§ç´¢å¼•
 æŒ‰æ–‡æ¡£çš„äºŒçº§ç´¢å¼•/æ–‡æ¡£åˆ†åŒºç´¢å¼•/æœ¬åœ°ç´¢å¼•: åˆ†æ•£/èšé›†ï¼ˆscatter/gatherï¼‰æ–¹æ³• æ ¹æ®å…³é”®è¯(Term)çš„äºŒçº§ç´¢å¼•/å…¨å±€ç´¢å¼•  åˆ†åŒºå†å¹³è¡¡ç­–ç•¥
 å›ºå®šæ•°é‡çš„åˆ†åŒº:åˆ›å»ºæ¯”èŠ‚ç‚¹æ›´å¤šçš„åˆ†åŒºï¼Œå¹¶ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ†é…å¤šä¸ªåˆ†åŒº åŠ¨æ€åˆ†åŒº: æŒ‰èŠ‚ç‚¹æ¯”ä¾‹åˆ†åŒº  ç¬¬ä¸ƒç« : äº‹åŠ¡ äº‹åŠ¡é€šå¸¸è¢«ç†è§£ä¸ºï¼Œå°†å¤šä¸ªå¯¹è±¡ä¸Šçš„å¤šä¸ªæ“ä½œåˆå¹¶ä¸ºä¸€ä¸ªæ‰§è¡Œå•å…ƒçš„æœºåˆ¶
ACIDä»£è¡¨åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼Œä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼Œéš”ç¦»æ€§ï¼ˆIsolationï¼‰å’ŒæŒä¹…æ€§ï¼ˆDurabilityï¼‰
 åŸå­æ€§/å¯ä¸­æ­¢æ€§ï¼ˆabortabilityï¼‰: èƒ½å¤Ÿåœ¨é”™è¯¯æ—¶ä¸­æ­¢äº‹åŠ¡ï¼Œä¸¢å¼ƒè¯¥äº‹åŠ¡è¿›è¡Œçš„æ‰€æœ‰å†™å…¥å˜æ›´çš„èƒ½åŠ›ã€‚ ä¸€è‡´æ€§: å¯¹æ•°æ®çš„ä¸€ç»„ç‰¹å®šé™ˆè¿°å¿…é¡»å§‹ç»ˆæˆç«‹ã€‚å³ä¸å˜é‡ï¼ˆinvariantsï¼‰ åŸå­æ€§ï¼Œéš”ç¦»æ€§å’ŒæŒä¹…æ€§æ˜¯æ•°æ®åº“çš„å±æ€§ï¼Œè€Œä¸€è‡´æ€§ï¼ˆåœ¨ACIDæ„ä¹‰ä¸Šï¼‰æ˜¯åº”ç”¨ç¨‹åºçš„å±æ€§ã€‚ éš”ç¦»æ€§: åŒæ—¶æ‰§è¡Œçš„äº‹åŠ¡æ˜¯ç›¸äº’éš”ç¦»çš„  å¹¶å‘æ§åˆ¶å¸¸ç”¨çš„éš”ç¦»çº§åˆ«  è¯»å·²æäº¤æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„éš”ç¦»çº§åˆ«,é€šè¿‡ä½¿ç”¨è¡Œé”ï¼ˆrow-level lockï¼‰ æ¥é˜²æ­¢è„å†™ å¿«ç…§éš”ç¦»/å¯é‡å¤è¯»: é€šå¸¸ä½¿ç”¨å¤šç‰ˆæœ¬å¯¹è±¡/å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCC, multi-version concurrentcy controlï¼‰å®ç° å¯åºåˆ—åŒ–(Serializabilityï¼‰:é€šå¸¸è¢«è®¤ä¸ºæ˜¯æœ€å¼ºçš„éš”ç¦»çº§åˆ«ã€‚å®ƒä¿è¯å³ä½¿äº‹åŠ¡å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæœ€ç»ˆçš„ç»“æœä¹Ÿæ˜¯ä¸€æ ·çš„  ä¸€äº›å¯èƒ½é‡åˆ°çš„é—®é¢˜:
è„è¯»/è„å†™/è¯»å–åå·®(ä¸å¯é‡å¤è¯»)/æ›´æ–°ä¸¢å¤±/å†™åå·®/å¹»è¯»/å­—é¢æ„ä¹‰ä¸Šçš„ä¸²è¡Œæ‰§è¡Œ(å•æ ¸CPU)/ä¸¤é˜¶æ®µé”å®š/å¯ä¸²è¡ŒåŒ–å¿«ç…§éš”ç¦»ï¼ˆSSIï¼‰
MySQL/InnoDBçš„å¯é‡å¤è¯»å¹¶ä¸ä¼šè‡ªåŠ¨æ£€æµ‹ä¸¢å¤±çš„æ›´æ–°
æ¯”è¾ƒå¹¶è®¾ç½®ï¼ˆCAS, Compare And Setï¼‰
å¹»è¯»ï¼ˆphantomsï¼‰:å³ä¸€ä¸ªäº‹åŠ¡æ”¹å˜å¦ä¸€ä¸ªäº‹åŠ¡çš„æœç´¢æŸ¥è¯¢çš„ç»“æœ
è®°å½•ç³»ç»Ÿå’Œè¡ç”Ÿæ•°æ®ç³»ç»Ÿä¹‹é—´çš„åŒºåˆ«ä¸åœ¨äºå·¥å…·ï¼Œè€Œåœ¨äºåº”ç”¨ç¨‹åºä¸­çš„ä½¿ç”¨æ–¹å¼ã€‚
ç¬¬å…«ç« : åˆ†å¸ƒå¼ç³»ç»Ÿçš„éº»çƒ¦ åˆ†å¸ƒå¼ç³»ç»Ÿä¸è¿è¡Œåœ¨å•å°è®¡ç®—æœºä¸Šçš„ç¨‹åºçš„ä¸åŒä¹‹å¤„ï¼š
 æ²¡æœ‰å…±äº«å†…å­˜ï¼Œåªæœ‰é€šè¿‡å¯å˜å»¶è¿Ÿçš„ä¸å¯é ç½‘ç»œä¼ é€’çš„æ¶ˆæ¯ ç³»ç»Ÿå¯èƒ½é­å—éƒ¨åˆ†å¤±æ•ˆ ä¸å¯é çš„æ—¶é’Ÿå’Œå¤„ç†æš‚åœ  ç‰©ç†æ—¶é’Ÿ:æ—¶é’Ÿå’Œå•è°ƒé’Ÿ
æ—¶é’Ÿ: æ ¹æ®æŸä¸ªæ—¥å†ï¼ˆä¹Ÿç§°ä¸ºæŒ‚é’Ÿæ—¶é—´ï¼ˆwall-clock timeï¼‰ï¼‰è¿”å›å½“å‰æ—¥æœŸå’Œæ—¶é—´,é€šå¸¸ç¨‹åºè¿”å›è‡ªepochï¼ˆ1970å¹´1æœˆ1æ—¥ åˆå¤œ UTCï¼Œæ ¼é‡Œé«˜åˆ©å†ï¼‰ä»¥æ¥çš„ç§’æ•°ï¼ˆæˆ–æ¯«ç§’ï¼‰.éœ€è¦æ ¹æ®NTPæœåŠ¡å™¨è®¾ç½®åŒæ­¥. å•è°ƒé’Ÿ: é€‚ç”¨äºæµ‹é‡æŒç»­æ—¶é—´ï¼ˆæ—¶é—´é—´éš”ï¼‰ï¼Œä¾‹å¦‚è¶…æ—¶æˆ–æœåŠ¡çš„å“åº”æ—¶é—´. ä¿è¯æ€»æ˜¯å‰è¿›çš„äº‹å®ï¼ˆè€Œæ—¶é’Ÿå¯ä»¥åŠæ—¶è·³å›ï¼‰.å•è°ƒé’Ÿä¸éœ€è¦åŒæ­¥.
æ‹œå åº­å°†å†›é—®é¢˜: åœ¨ä¸ä¿¡ä»»çš„ç¯å¢ƒä¸­è¾¾æˆå…±è¯†çš„é—®é¢˜.
ç¬¬ä¹ç« : ä¸€è‡´æ€§ä¸å…±è¯† å…±è¯†ï¼ˆconsensusï¼‰ï¼šå°±æ˜¯è®©æ‰€æœ‰çš„èŠ‚ç‚¹å¯¹æŸä»¶äº‹è¾¾æˆä¸€è‡´
äº‹åŠ¡éš”ç¦»ä¸»è¦æ˜¯ä¸ºäº†ï¼Œé¿å…ç”±äºåŒæ—¶æ‰§è¡Œäº‹åŠ¡è€Œå¯¼è‡´çš„ç«äº‰çŠ¶æ€ï¼Œè€Œåˆ†å¸ƒå¼ä¸€è‡´æ€§ä¸»è¦å…³äºï¼Œé¢å¯¹å»¶è¿Ÿå’Œæ•…éšœæ—¶ï¼Œå¦‚ä½•åè°ƒå‰¯æœ¬é—´çš„çŠ¶æ€ã€‚
æœ€å¼ºä¸€è‡´æ€§æ¨¡å‹ä¹‹ä¸€: çº¿æ€§ä¸€è‡´æ€§ï¼ˆlinearizabilityï¼‰
çº¿æ€§ä¸€è‡´æ€§ï¼ˆlinearizabilityï¼‰/ åŸå­ä¸€è‡´æ€§ï¼ˆatomic consistencyï¼‰/ å¼ºä¸€è‡´æ€§ï¼ˆstrong consistencyï¼‰/ ç«‹å³ä¸€è‡´æ€§ï¼ˆimmediate consistencyï¼‰/ å¤–éƒ¨ä¸€è‡´æ€§ï¼ˆexternal consistency ï¼‰
åŸºæœ¬æ€æƒ³ï¼šä½¿ç³»ç»Ÿçœ‹èµ·æ¥å¥½åƒåªæœ‰ä¸€ä¸ªæ•°æ®å‰¯æœ¬,æ˜¯è¯»å–å’Œå†™å…¥å¯„å­˜å™¨ï¼ˆå•ä¸ªå¯¹è±¡ï¼‰çš„æ–°é²œåº¦ä¿è¯
ä¾èµ–çº¿æ€§ä¸€è‡´æ€§çš„åœºæ™¯:
 é”å®šå’Œé¢†å¯¼é€‰ä¸¾ çº¦æŸå’Œå”¯ä¸€æ€§ä¿è¯ è·¨ä¿¡é“çš„æ—¶åºä¾èµ–  CAPå®šç†çš„æ­£å¼å®šä¹‰ä»…é™äºå¾ˆç‹­éš˜çš„èŒƒå›´ï¼Œå°½ç®¡CAPåœ¨å†å²ä¸Šæœ‰ä¸€äº›å½±å“åŠ›ï¼Œä½†å¯¹äºè®¾è®¡ç³»ç»Ÿè€Œè¨€å¹¶æ²¡æœ‰å®é™…ä»·å€¼.
å› æœä¸€è‡´æ€§ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªè¾ƒå¼±çš„ä¸€è‡´æ€§æ¨¡å‹
ç‰ˆæœ¬å‘é‡å¯ä»¥åŒºåˆ†ä¸¤ä¸ªæ“ä½œæ˜¯å¹¶å‘çš„ï¼Œè¿˜æ˜¯ä¸€ä¸ªå› æœä¾èµ–å¦ä¸€ä¸ªï¼›è€Œå…°ä¼¯ç‰¹æ—¶é—´æˆ³(æ›´åŠ ç´§å‡‘)æ€»æ˜¯æ–½è¡Œä¸€ä¸ªå…¨åºã€‚
çº¿æ€§ä¸€è‡´çš„CASï¼ˆæˆ–è‡ªå¢å¹¶è¿”å›ï¼‰å¯„å­˜å™¨ä¸å…¨åºå¹¿æ’­éƒ½éƒ½ç­‰ä»·äºå…±è¯†é—®é¢˜
å…±è¯†å¯ä»¥è§£å†³çš„é—®é¢˜:
 çº¿æ€§ä¸€è‡´æ€§çš„CASå¯„å­˜å™¨ åŸå­äº‹åŠ¡æäº¤ å…¨åºå¹¿æ’­ é”å’Œç§Ÿçº¦ æˆå‘˜/åè°ƒæœåŠ¡ å”¯ä¸€æ€§çº¦æŸ  ZooKeeperè¿™æ ·çš„å·¥å…·ä¸ºåº”ç”¨æä¾›äº†â€œå¤–åŒ…â€çš„å…±è¯†ã€æ•…éšœæ£€æµ‹å’Œæˆå‘˜æœåŠ¡ã€‚
ç¬¬ä¸‰éƒ¨åˆ†: æ´¾ç”Ÿæ•°æ® ç¬¬åç« : æ‰¹å¤„ç†ç®—æ³•å’Œæ¡†æ¶ ä¸Unixè®¾è®¡ç›¸é€š Unixè®¾è®¡åŸåˆ™åŒ…æ‹¬ï¼šè¾“å…¥æ˜¯ä¸å¯å˜çš„ï¼Œè¾“å‡ºæ˜¯ä¸ºäº†ä½œä¸ºå¦ä¸€ä¸ªï¼ˆä»æœªçŸ¥çš„ï¼‰ç¨‹åºçš„è¾“å…¥ï¼Œè€Œå¤æ‚çš„é—®é¢˜æ˜¯é€šè¿‡ç¼–å†™â€œåšå¥½ä¸€ä»¶äº‹â€çš„å°å·¥å…·æ¥è§£å†³çš„.
åœ¨Unixä¸–ç•Œä¸­ï¼Œå…è®¸ç¨‹åºä¸ç¨‹åºç»„åˆçš„ç»Ÿä¸€æ¥å£æ˜¯æ–‡ä»¶ä¸ç®¡é“ï¼›åœ¨MapReduceä¸­ï¼Œè¯¥æ¥å£æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚
åˆ†å¸ƒå¼æ‰¹å¤„ç†/MapReduce æ‰¹å¤„ç†çš„å¸¸è§ç”¨é€”:
æœç´¢,æ„å»ºæœºå™¨å­¦ä¹ ç³»ç»Ÿï¼Œä¾‹å¦‚åˆ†ç±»å™¨ï¼ˆæ¯”å¦‚åƒåœ¾é‚®ä»¶è¿‡æ»¤å™¨ï¼Œå¼‚å¸¸æ£€æµ‹ï¼Œå›¾åƒè¯†åˆ«ï¼‰ä¸æ¨èç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼Œä½ å¯èƒ½è®¤è¯†çš„äººï¼Œä½ å¯èƒ½æ„Ÿå…´è¶£çš„äº§å“æˆ–ç›¸å…³çš„æœç´¢)
åˆ†å¸ƒå¼æ‰¹å¤„ç†æ¡†æ¶éœ€è¦è§£å†³çš„ä¸¤ä¸ªä¸»è¦é—®é¢˜æ˜¯ï¼š
 åˆ†åŒº: åœ¨MapReduceä¸­ï¼ŒMapperæ ¹æ®è¾“å…¥æ–‡ä»¶å—è¿›è¡Œåˆ†åŒºã€‚ å®¹é”™: MapReduceç»å¸¸å†™å…¥ç£ç›˜;æ•°æ®æµå¼•æ“æ›´å¤šåœ°å°†ä¸­é—´çŠ¶æ€ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œæ›´å°‘åœ°ç‰©åŒ–ä¸­é—´çŠ¶æ€;ç¡®å®šæ€§ç®—å­å‡å°‘äº†éœ€è¦é‡ç®—çš„æ•°æ®é‡.  åˆ†å¸ƒå¼æ‰¹å¤„ç†å¼•æ“æœ‰ä¸€ä¸ªåˆ»æ„é™åˆ¶çš„ç¼–ç¨‹æ¨¡å‹ï¼šå›è°ƒå‡½æ•°ï¼ˆæ¯”å¦‚Mapperå’ŒReducerï¼‰è¢«å‡å®šæ˜¯æ— çŠ¶æ€çš„. ä½¿å¾—æ‰¹å¤„ç†ä½œä¸šä¸­çš„ä»£ç æ— éœ€æ“å¿ƒå®ç°å®¹é”™æœºåˆ¶.
MapReduceçš„è¿æ¥ç®—æ³•
 æ’åºåˆå¹¶è¿æ¥ å¹¿æ’­æ•£åˆ—è¿æ¥ åˆ†åŒºæ•£åˆ—è¿æ¥  æ•°æ®æµå¼•æ“çš„ä¼˜åŒ– Tezæ˜¯ä¸€ä¸ªç›¸å½“è–„çš„åº“ï¼Œå®ƒä¾èµ–äºYARN shuffleæœåŠ¡æ¥å®ç°èŠ‚ç‚¹é—´æ•°æ®çš„å®é™…å¤åˆ¶ï¼Œè€ŒSparkå’ŒFlinkåˆ™æ˜¯åŒ…å«äº†ç‹¬ç«‹ç½‘ç»œé€šä¿¡å±‚ï¼Œè°ƒåº¦å™¨ï¼ŒåŠç”¨æˆ·å‘APIçš„å¤§å‹æ¡†æ¶ã€‚
Hiveï¼ŒSparkå’ŒFlinkéƒ½æœ‰åŸºäºä»£ä»·çš„æŸ¥è¯¢ä¼˜åŒ–å™¨å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œç”šè‡³å¯ä»¥æ”¹å˜è¿æ¥é¡ºåºï¼Œæœ€å°åŒ–ä¸­é—´çŠ¶æ€çš„æ•°é‡.
å›¾æ‰¹é‡å¤„ç† åœ¨æ•´ä¸ªå›¾ä¸Šæ‰§è¡ŒæŸç§ç¦»çº¿å¤„ç†æˆ–åˆ†æ,è¿™ç§éœ€æ±‚ç»å¸¸å‡ºç°åœ¨æœºå™¨å­¦ä¹ åº”ç”¨ï¼ˆå¦‚æ¨èå¼•æ“ï¼‰æˆ–æ’åºç³»ç»Ÿä¸­,æœ€ç€åçš„å›¾å½¢åˆ†æç®—æ³•ä¹‹ä¸€æ˜¯PageRank.
ä½¿ç”¨æ‰¹é‡åŒæ­¥å¹¶è¡Œï¼ˆBSPï¼‰è®¡ç®—æ¨¡å‹,å³Pregelæ¨¡å‹.
ä¸€äº›æ¦‚å¿µ äº‹ä»¶æ—¥å¿—: æè¿°ç™»å½•ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šåšçš„äº‹æƒ…ï¼ˆç§°ä¸ºæ´»åŠ¨äº‹ä»¶ï¼ˆactivity eventsï¼‰æˆ–ç‚¹å‡»æµæ•°æ®ï¼ˆclickstream dataï¼‰.äº‹ä»¶æ—¥å¿—æ˜¯äº‹å®è¡¨ï¼Œç”¨æˆ·æ•°æ®åº“æ˜¯å…¶ä¸­çš„ä¸€ä¸ªç»´åº¦ã€‚
ç‰©åŒ–ï¼ˆmaterializationï¼‰: å°†ä¸­é—´çŠ¶æ€å†™å…¥æ–‡ä»¶çš„è¿‡ç¨‹
ç®—å­(operators)æ˜¯Mapå’ŒReduceçš„æ³›åŒ–
é«˜çº§APIå’Œè¯­è¨€:
Mahoutåœ¨MapReduceï¼ŒSparkå’ŒFlinkä¹‹ä¸Šå®ç°äº†ç”¨äºæœºå™¨å­¦ä¹ çš„å„ç§ç®—æ³•
ç©ºé—´ç®—æ³•: å¦‚æœ€è¿‘é‚»æœç´¢ï¼ˆk-nearest neghbors, kNNï¼‰
ç¬¬åä¸€ç« : æµå¤„ç†(stream processing) æ¶ˆæ¯ç³»ç»Ÿçš„åˆ†ç±»:
 ç›´æ¥ä»ç”Ÿäº§è€…ä¼ é€’ç»™æ¶ˆè´¹è€… æ¶ˆæ¯ä»£ç†(message broker) / æ¶ˆæ¯é˜Ÿåˆ—(message queue)  AMQP/JMSé£æ ¼çš„æ¶ˆæ¯ä»£ç†: é€‚ç”¨äºåœ¨æ¶ˆæ¯å¤„ç†ä»£ä»·é«˜æ˜‚ï¼Œå¸Œæœ›é€æ¡å¹¶è¡Œå¤„ç†ï¼Œé¡ºåºä¸é‡è¦çš„æƒ…å†µä¸‹ åŸºäºæ—¥å¿—çš„æ¶ˆæ¯ä»£ç†: é€‚ç”¨äºæ¶ˆæ¯ååé‡å¾ˆé«˜ï¼Œå¤„ç†è¿…é€Ÿï¼Œé¡ºåºå¾ˆé‡è¦çš„æƒ…å†µä¸‹   ä¸€ä¸ªè®°å½•/äº‹ä»¶(event)ç”±ç”Ÿäº§è€…ï¼ˆproducerï¼‰/å‘å¸ƒè€…ï¼ˆpublisherï¼‰/å‘é€è€…ï¼ˆsenderï¼‰ç”Ÿæˆä¸€æ¬¡ï¼Œç„¶åå¯èƒ½ç”±å¤šä¸ªæ¶ˆè´¹è€…ï¼ˆconsumerï¼‰/è®¢é˜…è€…ï¼ˆsubscribersï¼‰/æ¥æ”¶è€…ï¼ˆrecipientsï¼‰è¿›è¡Œå¤„ç†.
è®¸å¤šå¼€æºåˆ†å¸ƒå¼æµå¤„ç†æ¡†æ¶çš„è®¾è®¡éƒ½æ˜¯é’ˆå¯¹åˆ†æè®¾è®¡çš„ï¼šä¾‹å¦‚Apache Stormï¼ŒSpark Streamingï¼ŒFlinkï¼ŒConcordï¼ŒSamzaå’ŒKafka Streamsã€‚
æµå¤„ç†çš„å‡ ç§ç›®çš„:
 æœç´¢äº‹ä»¶æ¨¡å¼ï¼ˆå¤æ‚äº‹ä»¶å¤„ç†ï¼‰ è®¡ç®—åˆ†çª—èšåˆï¼ˆæµåˆ†æ) ä¿è¯è¡ç”Ÿæ•°æ®ç³»ç»Ÿå¤„äºæœ€æ–°çŠ¶æ€ï¼ˆç‰©åŒ–è§†å›¾ï¼‰ã€‚  æµå¼è¿æ¥
æµå¤„ç†ä¸­å¯èƒ½å‡ºç°çš„ä¸‰ç§è¿æ¥ç±»å‹ï¼š
 æµæµè¿æ¥ æµè¡¨è¿æ¥ è¡¨è¡¨è¿æ¥  å®¹é”™
æµå¤„ç†ä¸­å®ç°å®¹é”™å’Œæ°å¥½ä¸€æ¬¡è¯­ä¹‰çš„æŠ€æœ¯: å¯ä»¥ä½¿ç”¨æ›´ç»†ç²’åº¦çš„æ¢å¤æœºåˆ¶ï¼ŒåŸºäºå¾®æ‰¹æ¬¡ï¼Œå­˜æ¡£ç‚¹ï¼Œäº‹åŠ¡ï¼Œæˆ–å¹‚ç­‰å†™å…¥ã€‚
Sparkåœ¨æ‰¹å¤„ç†å¼•æ“ä¸Šæ‰§è¡Œæµå¤„ç†ï¼Œå°†æµåˆ†è§£ä¸ºå¾®æ‰¹æ¬¡ï¼ˆmicrobatchesï¼‰, è€ŒApache Flinkåˆ™åœ¨æµå¤„ç†å¼•æ“ä¸Šæ‰§è¡Œæ‰¹å¤„ç†.
å¹‚ç­‰æ€§ï¼ˆidempotenceï¼‰: å¹‚ç­‰æ“ä½œæ˜¯å¤šæ¬¡é‡å¤æ‰§è¡Œä¸å•æ¬¡æ‰§è¡Œæ•ˆæœç›¸åŒçš„æ“ä½œã€‚
ç¬¬åäºŒç« :æ•°æ®ç³»ç»Ÿçš„æœªæ¥ (ä¸²è”èµ·å‰è¾¹ç« èŠ‚çš„æ±‡æ€»ç¯‡)
æ‰¹å¤„ç†ä¸æµå¤„ç† åœ¨ç»´æŠ¤è¡ç”Ÿæ•°æ®æ—¶ï¼Œæ‰¹å¤„ç†å’Œæµå¤„ç†éƒ½æ˜¯æœ‰ç”¨çš„ã€‚æµå¤„ç†å…è®¸å°†è¾“å…¥ä¸­çš„å˜åŒ–ä»¥ä½å»¶è¿Ÿåæ˜ åœ¨è¡ç”Ÿè§†å›¾ä¸­ï¼Œè€Œæ‰¹å¤„ç†å…è®¸é‡æ–°å¤„ç†å¤§é‡ç´¯ç§¯çš„å†å²æ•°æ®ä»¥ä¾¿å°†æ–°è§†å›¾å¯¼å‡ºåˆ°ç°æœ‰æ•°æ®é›†ä¸Šã€‚
Lambdaæ¶æ„
æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡å°†ä¸å¯å˜äº‹ä»¶é™„åŠ åˆ°ä¸æ–­å¢é•¿çš„æ•°æ®é›†æ¥è®°å½•ä¼ å…¥æ•°æ®ï¼Œè¿™ç±»ä¼¼äºäº‹ä»¶æº¯æºã€‚
ä¸ºäº†ä»è¿™äº›äº‹ä»¶ä¸­è¡ç”Ÿå‡ºè¯»å–ä¼˜åŒ–çš„è§†å›¾, Lambdaæ¶æ„å»ºè®®å¹¶è¡Œè¿è¡Œä¸¤ä¸ªä¸åŒçš„ç³»ç»Ÿï¼šæ‰¹å¤„ç†ç³»ç»Ÿï¼ˆå¦‚Hadoop MapReduceï¼‰å’Œç‹¬ç«‹çš„æµå¤„ç†ç³»ç»Ÿï¼ˆå¦‚Stormï¼‰ã€‚
åœ¨Lambdaæ–¹æ³•ä¸­ï¼Œæµå¤„ç†å™¨æ¶ˆè€—äº‹ä»¶å¹¶å¿«é€Ÿç”Ÿæˆå¯¹è§†å›¾çš„è¿‘ä¼¼æ›´æ–°ï¼›æ‰¹å¤„ç†å™¨ç¨åå°†ä½¿ç”¨åŒä¸€ç»„äº‹ä»¶å¹¶ç”Ÿæˆè¡ç”Ÿè§†å›¾çš„æ›´æ­£ç‰ˆæœ¬ã€‚
</content>
    </entry>
    
     <entry>
        <title>è¯»å›½å­¦</title>
        <url>/read/guoxue/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag><tag>classic</tag>
        </tags>
        <content type="html"> å›½å­¦çš„ç«çƒ­ä¼¼ä¹èµ·è‡ªåå¤šå¹´å‰ç™¾å®¶è®²å›çš„äºä¸¹ç³»åˆ—,æœ€è¿‘å‡ å¹´ä¹Ÿæ€»èƒ½å¬åˆ°æ•™å„¿ç«¥è¯»å¼Ÿå­è§„æˆ–è€…å„åœ°å¼€å¥³å¾·ç­ç­‰çš„æ— å…³çœŸæ­£å›½å­¦çš„è´Ÿé¢æ–°é—».
æœ€è¿‘è¯»ç« å¤ªç‚çš„å›½å­¦è®²ä¹‰æ‰çŸ¥é“,å›½å­¦æœ€æ—©æ˜¯åœ¨ä¸€ä¸ªä¸–çºªå‰æå‡ºçš„,å½“æ—¶ç¤¾ä¼šå˜é©æ”¶åˆ°è¥¿æ–¹å…ˆè¿›æ€æƒ³æ–‡åŒ–çš„å†²å‡»,äººä»¬è¯•å›¾é‡ç°å®¡è§†ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–æŒ–æ˜å…¶ç²¾åå’Œä»·å€¼.
å…ˆè¯´å®šä¹‰,å›½å­¦æ³›æŒ‡ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–å’Œå­¦æœ¯(è¿™ä¸ªæ¶µç›–å„è¡Œå„ä¸š). ä¸€èˆ¬ä½¿ç”¨ä¼ ç»Ÿåˆ†ç±»: ç»å²å­é›†, åŒºåˆ«äºç°ä»£ä½¿ç”¨çš„è¥¿æ–¹å­¦ç§‘åˆ†ç±»æ³•.
 ç»: æœ¬æ„æ˜¯çº¿è£…ç»å…¸ä¹¦,åœ¨æ±‰åˆå®šä¹‰,æ±‰ä¹‹å‰çš„ç»å…¸ä¹¦éƒ½ç®—æ­¤ç±». ä¸»è¦åŒ…æ‹¬&amp;lt;è¯—ç»&amp;gt;,&amp;lt;è®ºè¯­&amp;gt;,&amp;lt;å­Ÿå­&amp;gt;,&amp;lt;å°šä¹¦&amp;gt;,&amp;lt;å·¦ä¼ &amp;gt;ç­‰ å²: &amp;lt;å²è®°&amp;gt;,&amp;lt;æ±‰ä¹¦&amp;gt;ç­‰æœä»£å²,å‰ä¸¤éƒ¨ä¹Ÿæœ‰å¾ˆé«˜çš„æ–‡å­¦ä»·å€¼. å°šä¹¦å¼€çºªä¼ ä½“ä¹‹å…ˆ,å·¦ä¼ ä¸ºç¼–å¹´ä½“ä¹‹å…ˆ. å­: å…ˆç§¦è¯¸å­åŠå„ç§è¡Œä¸šè‘—ä½œ(ä¹æµ) é›†: è¯—è¯èµ‹æ–‡å­¦  ä¹‹å‰è¯»è¿‡äº›åæ‰è¯»æ‡‚å­™å­å…µæ³•,å¶å°”ä¹Ÿè¯»è®ºè¯­çš„è§£è¯»,åŸºæœ¬æ˜¯æ±‡é›†å„å®¶ä¹‹é•¿,åŒæ—¶ç»“åˆç°å®å®è·µ. ä¸¤åƒæ¥å¹´çš„å„’å­¦ä¹Ÿæ€»æœ‰ä»–çš„å¯å–ä¹‹å¤„.
ä½œä¸ºç†ç§‘å‡ºèº«,ç¡®å®è¯¥æé«˜ä¸‹å¤æ–‡å­¦é‰´èµå’Œå¤æ–‡é˜…è¯»èƒ½åŠ›,æ¯•ç«Ÿè¿™æ˜¯ä¸­æ–‡ä¹‹æœ¬,å­¦å¥½æ¯è¯­çš„åŸºç¡€.
</content>
    </entry>
    
     <entry>
        <title>è¯»è¯—è¯</title>
        <url>/read/poem/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag><tag>classic</tag>
        </tags>
        <content type="html"> ä¸ºäº†å¬è’™æ›¼å“æœ€ç¾å”è¯—å†²äº†ä¼šå‘˜,ä¹Ÿå› æ­¤æ”¶å¬åˆ°äº†æ›´å¤šçš„éŸ³é¢‘,æ¯•ç«Ÿå–œæ¬¢çš„è¿˜æœ‰éƒ¦æ³¢å“è¯»å”¯ç¾è¯—è¯åç¯‡, è™½ç„¶æˆ‘ä¹‹å‰ä»æ²¡çœ‹è¿‡è¯—è¯å¤§ä¼šä¹‹ç±»çš„èŠ‚ç›®.
å¬è¿‡ä¸€äº›ä¹‹åçš„æ„Ÿè§‰æ˜¯,å”è¯—çœŸçš„æ˜¯æ–‡å­¦é‡Œæœ€ç¾çš„èŠ±, ä¸åŒäºå­¦ç”Ÿæ—¶ä»£çš„æ­»è®°ç¡¬èƒŒ,åœ¨äººç”Ÿç»å†ä¸°å¯Œå,æ›´èƒ½ä½“ä¼šåˆ°è¯—çš„æ–‡å­—ç²¾ç‚¼ä¹‹ç¾,éŸ³éŸµä¹‹ç¾.
å› ä¸ºæƒ³ç†æ¸…å”è¯—çš„å‘å±•å†ç¨‹,åˆæ‰¾æ¥äº†é—»ä¸€å¤šçš„å”è¯—æ‚è®º,æœ±è‡ªæ¸…çš„ç»å…¸å¸¸è°ˆç­‰ç»å…¸è‘—ä½œæ¥è¯», ä¹Ÿå†æ¬¡å¼•å‘æˆ‘çš„ä¸‹ç¯‡, å¯¹äºå›½å­¦çš„äº†è§£.
ä¼¼ä¹èŒä¸šä¹ æƒ¯çš„æ¯›ç—…,è”ç½‘åŒ–äº†.
è¿™å‡ ç¯‡æ–‡ç« ä¹‹åæ…¢æ…¢æ›´æ–°å§,å…ˆå†™ä¸ªç‚¹é¢˜çš„å¼€å¤´.
éŸ³éŸµ
ä»¥å‰ä¸å¤ªç†è§£å¤šéŸ³å­—,å¬å”è¯—è®²è¯¾å¤šäº†æ‰ç†è§£å…¶ä¸­åŸå› . æ¯”å¦‚å‡ ä¸ªç¼˜æ•…:
 å†å²å‘å±•/æµå˜: æ¯”å¦‚ &amp;ldquo;è½¦&amp;rdquo;æœ€åˆè¡¨ç¤ºæˆ˜è½¦è¯»ju,åæ¥ç»Ÿç§°è½¦ç±»å°±è¯»che åè¯,åŠ¨è¯ç­‰è¯æ€§ä¸åŒ: æ¯”å¦‚ &amp;ldquo;å† &amp;rdquo;å››å£°è¡¨ç¤ºåŠ¨è¯ä¸€å£°è¡¨ç¤ºåè¯ æ­£å¼æˆ–å£è¯­è¡¨ç¤º: æ¯”å¦‚ &amp;ldquo;è¡€&amp;rdquo;çš„xue/xie ä¸åŒå«ä¹‰: æ¯”å¦‚ &amp;ldquo;æ€&amp;rdquo;çš„ä¸€å£°å’Œå››å£°(è¡¨ç¤ºå¿ƒæƒ…,æ€ç»ª) æŠ¼éŸµ: æ¯”å¦‚ &amp;ldquo;æ–œ&amp;rdquo;åœ¨è¯—æ­Œé‡Œä¸€èˆ¬è¯»xia  æ€»ç»“èµ·æ¥,è¿™å°±æ˜¯æ±‰è¯­çš„åšå¤§ç²¾æ·±ä¹‹åˆ,å³å¤§é“è‡³ç®€. å› ä¸ºåœ¨ä½ äº†è§£äº†è¿™äº›çŸ¥è¯†/å¸¸è¯†å, æ”¾åœ¨ä¸Šä¸‹æ–‡é‡Œå°±èƒ½å‡†ç¡®çš„è¡¨è¾¾å«ä¹‰. æ¯”æ‹‰ä¸è¯­ç³»çš„ä¸åŒè¯æ€§éƒ½é€ ä¸ªç”Ÿè¯è¦é«˜æ˜çš„å¤š.
</content>
    </entry>
    
     <entry>
        <title>è¯»å†å²</title>
        <url>/read/history/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag><tag>classic</tag>
        </tags>
        <content type="html">  ç¼˜èµ· åœ¨å¹´åˆçš„æ—¶å€™,å› å¶ç„¶æœºä¼šè¿½äº†ä¸€éƒ¨å›½äº§å‰§,å³ç½‘å‰§å¤§å†›å¸ˆå¸é©¬æ‡¿. å½“æ—¶æ˜¯å¾ˆç€è¿·çš„, å› ä¸ºçœ‹çš„ä¸‹è½½ç‰ˆ,å¯ä»¥è¯´çœ‹çš„ä¸èˆæ˜¼å¤œ.
è¯„ä»·å˜›,ä¸Šéƒ¨æ˜æ˜¾å¥½äºä¸‹éƒ¨,åˆ¶ä½œç²¾è‰¯,æ¼”æŠ€æ€»ä½“ç»™åŠ›. ç¼ºç‚¹å°±æ˜¯æ”¹åŠ¨å¤ªéšæ„,å¥½å¤šä¸ç¬¦åˆå†å²çš„æƒ…æ™¯.
å‰§æœ¬ä½ å¯ä»¥æ”¹ç¼–,ä½†å¤§çš„å†å²äººç‰©äº‹ä»¶è¿˜æ˜¯è¦å°Šé‡çš„,å¦åˆ™ä½ æä¸ªæˆè¯´ä¹Ÿè¡Œ,æˆ–è€…å¹²è„†æ¶ç©ºå†å².
ä¹Ÿå› ä¸ºè¿™ç‚¹,äº†è§£äº†å¾ˆå¤šé­æ™‹çš„å†å². æ›´é‡è¦çš„æ—¶å¼€å§‹è¯»æ˜“ä¸­å¤©è€å¸ˆçš„ä¸­åå²ç³»åˆ—,ä¸€å‘è€Œä¸å¯æ”¶æ‹¾,æ–­æ–­ç»­ç»­è¯»äº†éš‹å”åŠä¹‹å‰å¤§éƒ¨åˆ†å†å².
å¤ä»£å² ä½œä¸ºä¸­åçš„ä¸€ä»½å­, æœ€æƒ³äº†è§£çš„å°±æ˜¯é‚£æ®µå…‰è¾‰å²æœˆ: ç§¦æ±‰å’Œéš‹å”.
ç”±äºä¸­åå²åšçº¯ç²¹çš„å†å²ä¹¦çœ‹çš„è¯,ä¼šç¨æ˜¾ç»†èŠ‚ä¸å¤Ÿ. ä¸Šä¸ªæœˆå¼€å§‹åœ¨è·¯ä¸Šè¡¥éš‹å²,è€Œä¸”æ˜¯é€šè¿‡æ›´æ–¹ä¾¿ç¢ç‰‡çš„å–œé©¬æ‹‰é›…å¬ä¹¦,ä¸»è¦å¬çš„è’™æ›¼è€å¸ˆçš„ç™¾å®¶è®²å›éŸ³é¢‘:å¤§éš‹é£äº‘.
ä¹Ÿå› æ­¤å–œæ¬¢ä¸Šäº†è’™è€å¸ˆ,åˆé‡æ–°å¼•èµ·è‡ªå·±å¯¹äºå”è¯—ç¾çš„æ¬£èµ(å…·ä½“è§ä¸‹ç¯‡).
å¬å®Œå,åˆæ”¶å¬äº†æ˜“ä¸­å¤©è¯´ç¦…,ä½œä¸ºä¸­åæ™ºæ…§çš„ä¸€éƒ¨åˆ†,æ”¶è·å°±æ˜¯åšäººæœ‰æ—¶è¦æ”¾å¼ƒæ‰§å¿µ(ç ´æ‰§),å½“ç„¶åšäº‹è¿˜æ˜¯è¦è®¤çœŸçš„.
å›å¤´æŠŠå…ˆç§¦(æ˜¥ç§‹æˆ˜å›½)è¡¥ä¸Š,æ¯•ç«Ÿå‡ºäº†é‚£ä¹ˆå¤§æ€æƒ³å®¶å“²å­¦å®¶.
ç§¦ çŸ­æš‚è€Œåˆ›é€ è¾‰ç…Œçš„æ—¶ä»£, ç§¦å§‹çš‡çš„åŠŸç»©åœ°ä½æ¯‹åº¸ç½®ç–‘, ç»Ÿä¸€ä¸­å, å¼€åˆ›å¸å›½æ—¶ä»£.
çš‡å¸è¿™ä¸ªåè¯å°±æ˜¯ä»–å‘æ˜çš„, ç»Ÿä¸€çš„ä¸ä»…æ˜¯é¢†åœŸ,æ›´æ˜¯æ–‡å­—,åº¦é‡è¡¡ç­‰,ä¿ƒè¿›æ²Ÿé€šå’Œç¹è£.
æˆè´¥éƒ½åœ¨æ³•å®¶å’Œåæ²»,åœ¨æ—¶ä»£å¤§å˜é©ä¹‹é™…ä½¿ç”¨é«˜å‹ä¼å›¾å¤§ä¸€ç»Ÿ,æœ€ç»ˆä¿ƒæˆäº†èµ·ä¹‰å’ŒåæŠ—. è¿‡åœ¨ç„šä¹¦.
æ±‰ åˆ˜é‚¦çš„æˆå’Œé¡¹ç¾½çš„è´¥æ˜¯å¿…ç„¶çš„,ä¸€ä¸ªä¼˜ç§€å›¢é˜Ÿå¯¹ä¸€ä¸ªæœ‰è‹±é›„ä¸»ä¹‰çš„äºº, æ±‰é«˜ç¥–æœ‰å…¶ä¸ªäººé­…åŠ›.
å¼ è‰¯è¿ç­¹å¸·å¹„,éŸ©ä¿¡å›½å£«æ— åŒ.
ä¼—è¯¸ä¾¯ä¸‹åœºå¾ˆæƒ¨,æœ‰å…¶æ—¶ä»£å¿…ç„¶æ€§,ä»å°å»ºåˆ°é›†æƒä¸å¾—å·²è€Œä¸ºä¹‹. ä¹Ÿå¯¼è‡´äº†ä¹‹åæ±‰çš„å¤–æˆšå’Œå®¦å®˜æ”¿æ²».
æ±‰æ­¦å¸ç¡®æ˜¯ä¸€ä»£è‹±ä¸»,é‚£ä¹Ÿæ˜¯ä¸€ä¸ªä¼ å¥‡çš„æ—¶ä»£,å«é’éœå»ç—…ç”Ÿé€¢å…¶æ—¶.
ä¸‰å›½é­æ™‹ ä¹‹å‰ä¸€ç›´è¯¯è§£æ›¹æ“äº†,çœŸæ˜¯ä¸€ä»£æ­é›„,ä¹Ÿæˆå°±äº†é­. åªå¯æƒœä¹‹åä¸¤ä»£ç”Ÿå‘½çŸ­æš‚,æœ€ååˆæ‰˜å­¤ä¸å¦¥ä»æ­¤æ–­é€.
ä¹Ÿæ˜¯äº†è§£å†å²åæ‰çŸ¥é“ç‹è€…æ¸¸æˆé‡Œçš„ç”„å§¬åŸæ˜¯ç”„å®“.
èœ€å› ä¸ºåè‘—ä¸‰å›½æ¼”ä¹‰æˆå°±äº†åˆ˜å¤‡å’Œè¯¸è‘›äº®ç­‰è¯¸åå°†,æ›´å› ä¸ºç†æƒ³ä¸»ä¹‰è¢«äººä»¬ä¼ ä¸ºä½³è¯.
å´çš„åŠŸæ˜¯å‘å±•äº†æ±Ÿå—,ä¹Ÿå› ä¸ºä¹‹åå¸é©¬æ°çš„å–„å¾…,æ‰æœ‰äº†ä¸œæ™‹çš„å»ºç«‹å’Œå—æ–¹çš„å¼€å‘.
èœ€å´çš„é—®é¢˜æ˜¯äºŒä»£å¤ªå·®,æ›´é‡è¦çš„æ˜¯å®åŠ›çœŸçš„ä¸èƒ½å’ŒåŒ—æ–¹æŠ—è¡¡,è´¥ä¹Ÿå±å¿…ç„¶äº†.
æ™‹æœ€å¤§çš„é—®é¢˜æ˜¯å› ä¸ºæ˜¯ç¯¡æ¥çš„ç‹æœ,åˆ¶åº¦å»ºè®¾å’Œå­å¥³æ•™è‚²çœŸæ˜¯é—®é¢˜,æ³¨å®šäº†çŸ­å‘½ç‹æœ,ç•™ä¸‹äº†æ™‹æƒ å¸ç«‹é•¿è¿™ä¸ªåé¢å…¸å‹å’Œæ¯”å¯Œçš„æ•…äº‹.
å¥½åœ¨ç•™ä¸‹å£«äººé£éª¨å’Œè¯—æ­Œä¹¦æ³•çš„å®è´µé—äº§,è®°èµ·çš„æœ‰æœé¢„(æœç”«å’Œæœç‰§çš„å…ˆç¥–),é™†æœº,ç‹è°¢ç­‰å¤§å®¶.
è¯»åˆ°äº”èƒ¡ä¹±åæ—¶çœŸæ˜¯ç—›å¿ƒ,å¯ä¹Ÿå› æ­¤æœ‰äº†å—åŒ—ä¹‹è¯´. åå…­å›½é‡Œèƒ½è®°å¾—çš„åªæœ‰è‹»åšäº†,æ°”å€™ç¡®å®ä¸å¤Ÿ.
å—åŒ—æœ å› ä¸ºé•¿æ±Ÿè€Œæœ‰äº†å—åŒ—,æœŸé—´ä¹Ÿä¿ƒè¿›äº†æ°‘æ—èåˆå’Œæ–‡åŒ–å‘å±•.
åŒ—é­å‘å±•ä¹Ÿç®—ä¼ å¥‡,ä¸€ä¸ªå°éƒ¨è½æœ‰å¦‚æ­¤å¤§å‘å±•,ä¸æ— ç†ç”±.
æ‹“è·‹å®çš„æ”¹é©å’Œèåˆè½½å…¥æ•™ç§‘ä¹¦,å¯æƒœçš„æ˜¯ç”Ÿå‘½å¤ªçŸ­. å¦ä¸€æ–¹é¢æ”¹é©ä¹ŸåŸ‹ä¸‹äº†é™‡è¥¿å…­é•‡(ä¹‹åçš„å…³é™‡è´µæ—)åå›çš„éšæ‚£.
è¥¿é­çš„å®‡æ–‡æ³°ä¸€ä»£æ­é›„,å—æœæ¢å…ƒå¸æ±Ÿé™µç„šä¹¦è‡­åæ˜­è‘—.
éš‹ éš‹å”çœŸçš„å’Œç§¦æ±‰å¥½åƒå•Š,è€Œä¸”éš‹å”çš„å…³ç³»æ›´è¿‘, æ¨å¹¿è¿™ä¸ªç‚€å¸çš„ç§°å·æœ‰äº›è¿‡äº†.
æ¨åšçš„å†å²åœ°ä½è¿˜æ˜¯å¾ˆé«˜çš„,ä»¥è¾ƒå°çš„ä»£ä»·ç»Ÿä¸€å—åŒ—,å¼€åˆ›ç§‘ä¸¾,å»ºç«‹éš‹å¾‹,å¼€ä¸‰çœå…­éƒ¨è¡Œæ”¿ä½“ç³»,ç¡®å®šä¸œäºšéœ¸ä¸»åœ°ä½.
å½“ç„¶è¿™äº›åè‡£ä¹ŸåŠŸä¸å¯æ²¡çš„è½½å…¥å†å²,é«˜ç‚¯,é•¿å­™æ˜‡ç­‰.
æ¨å¹¿çš„æ€¥åŠŸè¿‘åˆ©,åˆšæ„è‡ªç”¨,å¥½å¤§å–œåŠŸçœŸæ˜¯å°è±¡æ·±åˆ», ä¹Ÿåº”äº†ä¸ä½œå°±ä¸ä¼šæ­»è¿™å¥è¯.
ä»äººçš„æˆé•¿çœ‹,è¿‡æ—©çš„ä¸€å¸†é£é¡ºçœŸçš„æœ‰å…¶å¼Šç—…å•Š,ä¸€æ¬¡æ‰“å‡»(ä¸œå¾é«˜å¥ä¸½)å°±å†ä¹Ÿèµ·ä¸æ¥äº†.
å¤§è¿æ²³é€šå—åŒ—,ä¸œéƒ½æ´›é˜³è¿ä¸œè¥¿,å†é€šè¥¿åŸŸè¿˜æ˜¯å¾ˆæœ‰åŠŸåŠ³çš„,ä¸è¿‡æ‰§è¡Œæ€¥äº†äº›. ä¹Ÿåº”äº†æ€§æ ¼å†³å®šå‘½è¿è¿™å¥è¯,è¿™ä¸ªé”…æœ‰ç‹¬å­¤æ°ä¸€ä»½.
å” å”æ˜¯æˆ‘å¿ƒç›®ä¸­æœ€è¾‰ç…Œçš„æ—¶ä»£,å¼€æ”¾å’ŒåŒ…å®¹,æ–‡åŒ–å¤§å‘å±•,å†å²å½±å“æœ€å¤§.
å”è¯—,ä¹¦æ³•,ç¦…å®—æ°¸æµä¼ .
å”å¤ªå®—æä¸–æ°‘ç»å¯¹å¯ä»¥ä¸Šå¸ç‹æ’è¡Œæ¦œå‰å‡ ä½,è™½ç„¶æœ‰ç„æ­¦é—¨æ”¿å˜å’Œæ”¹å²ç¾åŒ–è‡ªå·±çš„é—®é¢˜,ä½†ä»åå…«å­¦å£«å’Œé‡ç”¨é­å¾ç­‰å¾ˆå¤šå²å®çœ‹,å´ä¹Ÿæ˜¯ç»¼åˆå®åŠ›æœ€å¼ºçš„å¤ªå­.
å¯æƒœçš„æ˜¯æ™šå¹´é€‰å¤ªå­ä¸å¤Ÿå¦¥å½“,ä¹Ÿå› æ­¤æˆå°±äº†å¤§æ”¿æ²»å®¶æ­¦åˆ™å¤©çš„ä¼ å¥‡.
æ­£å¦‚æ— å­—ç¢‘ä¸€æ ·,æ­¦åˆ™å¤©åŠŸè¿‡å¾ˆéš¾è¯´,å´æ˜¯å›½å†…å²ä¸Šå”¯ä¸€å¥³çš‡å¸.
å”ç„å®—ä¹Ÿæ˜¯æ™šå¹´å‡ºäº†å¤§é—®é¢˜,ç›´æ¥é€ æˆå®‰å²ä¹‹ä¹±è€Œç”±æç››è½¬è¡°,ä¹‹åé•¿æœŸçš„å®¦å®˜å¹²æ”¿å’Œè—©é•‡å‰²æ®è¿™ä¸ªé”…ä»–å¿…é¡»èƒŒ.
ç”±æ­¤çœ‹,åšä¸€è¾ˆå­å¥½äººçœŸéš¾,èƒ½åšåˆ°å­Ÿå­æ‰€è°“å¤§ä¸ˆå¤«çœŸæ˜¯éœ€è¦æé«˜çš„ä¿®å…»äº†.
</content>
    </entry>
    
     <entry>
        <title>è‡ªåŠ¨ç”ŸæˆSSLè¯ä¹¦çš„åˆ©å™¨acme.sh</title>
        <url>/blog/acme/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>web</tag><tag>secuirty</tag>
        </tags>
        <content type="html"> å·²ç»ä½¿ç”¨letsencryptçš„å…è´¹è¯ä¹¦ä¸€æ®µæ—¶é—´äº†ï¼Œæ˜¯ä¹‹å‰æŠ˜è…¾Ghoståšå®¢æ—¶è‡ªåŠ¨å®‰è£…çš„ï¼Œè€Œåå°å…¶å®ä¹Ÿæ˜¯ç”¨çš„acme.shè¿™ä¸ªå·¥å…·ã€‚
é‡åˆ°çš„é—®é¢˜æ˜¯ä¸çŸ¥å“ªé‡Œçš„é…ç½®é”™è¯¯ï¼Œæˆ‘çš„è¯ä¹¦è‡ªåŠ¨æ›´æ–°æœ‰é—®é¢˜ï¼Œæ¯æ¬¡éƒ½æ˜¯é‡åˆ°è¯ä¹¦å·²ç»è¿‡æœŸï¼Œç½‘ç«™å½»åº•ä¸èƒ½è®¿é—®äº†ï¼Œå¿…é¡»è¦æ‰‹åŠ¨æ›´æ–°ã€‚
ä¹‹å‰ç”¨çš„HTTPçš„éªŒè¯æ–¹å¼ï¼Œç”±äºä¸€çŸ¥åŠè§£ï¼Œè¿™å—æ¯æ¬¡æ‰‹åŠ¨é…ç½®ä¹Ÿä¼šèŠ±è´¹ä¸€äº›æ—¶é—´ã€‚
ä»Šå¤©é‡è¯»äº†å®˜æ–¹æ–‡æ¡£ï¼Œæ‰å‘ç°æœ‰ä¸€äº›ç»†èŠ‚çš„ä½¿ç”¨ï¼Œå…¶å®å¯ä»¥åšåˆ°ä¸€åŠ³æ°¸é€¸ã€‚

å®‰è£… curl https://get.acme.sh |sudo sh # é»˜è®¤å®‰è£…åœ¨~/.acme.sh/ # æ¯å¤©0ç‚¹è‡ªåŠ¨æ£€æµ‹æ˜¯å¦è¿‡æœŸï¼Œå¹¶ä¼šé€šè¿‡cronjobè‡ªåŠ¨æ›´æ–°è¯ä¹¦ ç”Ÿæˆè¯ä¹¦ æ”¯æŒä¸¤ç§éªŒè¯æ–¹å¼ã€‚
æ³¨ï¼šè®°å¾—å¸¦ä¸Šwww.mydomain.comè¿™ç§å½¢å¼çš„åŸŸåã€‚
HTTP æˆ‘ä¹‹å‰ä¸€ç›´ç”¨è¿™ç§ï¼Œç›¸æ¯”DNSæ–¹å¼è¿˜æ˜¯éº»çƒ¦äº›ã€‚
acme.sh --issue -d mydomain.com -d www.mydomain.com --webroot /home/xulz/wwwroot/mydomain.com/ # ä¹‹å‰éƒ½ä¸çŸ¥é“è¿˜å¯ä»¥æŒ‡å®šnginxæ™ºèƒ½è¯†åˆ« acme.sh --issue -d mydomain.com --nginx DNS è¿™ä¸ªæ˜¯çœŸçš„è‡ªåŠ¨åŒ–äº†ã€‚
# ä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ # ä¸‹é¢çš„ä¿¡æ¯å­˜åœ¨~/.acme.sh/account.confï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ export Ali_Key=&amp;#34;sdfsdfsdfljlbj&amp;#34; export Ali_Secret=&amp;#34;jlsdflanljkljlfdsaklkjflsa&amp;#34; acme.sh --issue --dns dns_ali -d mydomain.com -d www.mydomain.com å®‰è£…è¯ä¹¦ è¿™æ­¥å¸¸è¢«å¿½ç•¥ã€‚
æ³¨ï¼š é»˜è®¤ç”Ÿæˆçš„è¯ä¹¦éƒ½æ”¾åœ¨å®‰è£…ç›®å½•ä¸‹: ~/.acme.sh/, è¯·ä¸è¦ç›´æ¥ä½¿ç”¨æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶
# æ³¨ï¼šNginx çš„é…ç½® ssl_certificate éœ€è¦ä½¿ç”¨ /etc/nginx/ssl/fullchain.cer  acme.sh --installcert -d &amp;lt;domain&amp;gt;.com \  --key-file /etc/nginx/ssl/&amp;lt;domain&amp;gt;.key \  --fullchain-file /etc/nginx/ssl/fullchain.cer \  --reloadcmd &amp;#34;service nginx force-reload&amp;#34; å…¶ä»– # æ›´æ–°acme.sh # V2ç‰ˆæœ¬å·²æ”¯æŒwildcardè¯ä¹¦ acme.sh --upgrade # è°ƒè¯•ï¼Œæ‰“å°æ›´è¯¦ç»†ä¿¡æ¯ acme.sh --issue ... --debug </content>
    </entry>
    
     <entry>
        <title>JVMå’ŒGCè°ƒä¼˜</title>
        <url>/blog/jvm/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>java</tag><tag>performance</tag>
        </tags>
        <content type="html"> æ›¾å¤šæ¬¡æ¥è§¦Javaçš„GCå‚æ•°è°ƒä¼˜å’Œæ—¥å¿—åˆ†æï¼Œé›¶æ•£çš„è®°å½•åœ¨å„å¤„ï¼Œæ—¶é—´ä¸€é•¿ä¹Ÿå¿˜çš„å·®ä¸å¤šäº†ï¼Œæ±‡æ€»äºæ­¤ã€‚

Hotspot JVM è¿™é‡Œçš„JVMç‰¹æŒ‡Oracleçš„ Hotspot JVM.
ç”± class loader, the runtime data areasï¼ˆå«heapï¼‰, å’Œexecution engineï¼ˆå«GCå’ŒJITï¼‰ä¸‰éƒ¨åˆ†ç»„æˆã€‚
Heapä¸»è¦ç”¨äºå¯¹è±¡æ•°æ®çš„å­˜æ”¾ã€‚
æ€§èƒ½ä¼˜åŒ–ä¸»è¦æ¶‰åŠheapå¤§å°å’Œé€‚åˆçš„GCç®—æ³•çš„è°ƒä¼˜ã€‚
ä¼˜åŒ–ç€é‡äºä¸¤ä¸ªç›®æ ‡ï¼š
 å“åº”èƒ½åŠ›ï¼šé•¿æ—¶é—´çš„åœé¡¿ä¸å¯æ¥å—
 ååç‡ï¼šè¾ƒé•¿ä¸€æ®µæ—¶é—´çš„å¤„ç†é‡ï¼Œå¿«é€Ÿå“åº”ä¸æ˜¯å¿…é¡»çš„ã€‚  GCä¸»è¦ç®—æ³• Serial -XX:&#43;UseSerialGC
Parallel JDK8é»˜è®¤å€¼ã€‚
-XX:&#43;UseParallelGC
-XX:&#43;UseParallelOldGC
CMS æ–°ç”Ÿä»£ä½¿ç”¨Parallel New &#43; è€å¹´ä»£ä½¿ç”¨CMSï¼ˆConcurrent Mark-Sweep Collectorï¼‰ã€‚
-XX:&#43;UseParNewGC -XX:&#43;UseConcMarkSweepGC
å‰ä¸‰ç§ç®—æ³•çš„Heapå †ç»“æ„ï¼š  Young Generation = eden &#43; Survivor Space(S0&#43;S1) Old Generation == Tenured Permanent Generation == Permanent  G1 ä»£è¡¨Garbage Firstï¼Œé€‚ç”¨äºå¤šæ ¸å’Œè¶…å¤§å†…å­˜çš„æƒ…å†µï¼Œéœ€è¦JDK7u4&#43;ã€‚
æ˜¯CMSçš„æ›¿ä»£æ–¹æ¡ˆï¼Œè¢«åˆ’åˆ†ä¸ºç›¸åŒå¤§å°çš„åŒºåŸŸï¼Œç”±eden,survivorå’Œoldä¸‰éƒ¨åˆ†ç»„æˆã€‚
ä½¿ç”¨åœºæ™¯ï¼šHeap 6G&#43; æˆ–è¦æ±‚åœé¡¿æ—¶é—´å°äº0.5s
-XX:&#43;UseG1GC
å…¶ä»–å‚æ•°ï¼š
 -XX:MaxGCPauseMillis=200 ï¼ˆé»˜è®¤200msï¼‰
 -XX:InitiatingHeapOccupancyPercent=45 ï¼ˆé»˜è®¤45%ï¼Œå¼€å§‹å¹¶å‘GC Cycleï¼‰
 -XX:G1ReservePercent=10ï¼ˆé»˜è®¤10%ï¼Œæé«˜ä»¥é¿å… to-space overflowé”™è¯¯ï¼‰  é€šå¸¸2000ä¸ªåŒºåŸŸï¼Œæ¯ä¸ªåŒºåŸŸ1~32Mbã€‚
æ³¨ï¼šä¸è¦è®¾ç½®æ–°ç”Ÿä»£å¤§å°ï¼ˆ-Xmnï¼‰
è°ƒä¼˜ å»ºè®®ï¼šè€å¹´ä»£å ç”¨ç‡è‡³å°‘å¤§äºæ–°ç”Ÿä»£æ´»è·ƒæ•°æ®çš„1.5å€ï¼Œæ–°ç”Ÿä»£ç©ºé—´å¤§å°è‡³å°‘ä¸ºå †å¤§å°çš„10%.
ä¸»è¦è§¦å‘äº‹ä»¶ï¼š
æ–°ç”Ÿä»£ç”¨å®Œä¼šè§¦å‘Minor GCï¼Œæ—¶é—´é€šå¸¸å¾ˆå¿«ï¼›
è€å¹´ä»£ï¼ˆtenure&#43;permï¼‰ç”¨å®Œä¼šè§¦å‘Full GC,æ—¶é—´é€šå¸¸è¾ƒé•¿ã€‚
åŸå§‹æ˜¯æ›´é¢‘ç¹çš„Minor GCå’Œæ›´å°‘çš„Full GCã€‚
Heap Size = Young Gen &#43; Old Gen &#43; Meta space
ä¸»è¦å‚æ•°  -Xms Heapåˆå§‹å¤§å° -Xmx Heapæœ€å¤§å€¼ -Xmn æ–°ç”Ÿä»£Heapå¤§å°ï¼ˆæ¨èä¸è®¾ç½®ï¼Œä½¿ç”¨åˆ™è¯¥å€¼ä¸èƒ½å¤ªå¤§ï¼‰  XMXå’ŒXMSè®¾ç½®ä¸€æ ·å¤§,å‡è½»ä¼¸ç¼©å †å¸¦æ¥çš„å‹åŠ›ã€€JVMå ç”¨å†…å­˜ä¼šè¶…è¿‡Xmxå¤§è‡´1/3, å› æ­¤Xmxçš„å€¼ä¸åº”è¶…è¿‡æ€»å†…å­˜çš„60%~70%.ã€€-X æ˜¯è®¾ç½®JVMå‚æ•°çš„æ–°å‘½ä»¤ï¼Œä¸å¸¦-X çš„æ˜¯ä¸ºäº†å…¼å®¹ä¹‹å‰ç‰ˆæœ¬.
æ‰“å°é»˜è®¤å‚æ•°
java -XX:&#43;PrintFlagsFinal -version
Thread Stack Size Java 8 64bit é»˜è®¤1024k. æ¯ä¸ªçº¿ç¨‹å¯åŠ¨æ—¶JVMä¸ºè¯¥çº¿ç¨‹åˆ›å»ºä¸€ä¸ªæ–°çš„Java Stack,åœ¨discrete frameså­˜æ”¾çº¿ç¨‹çŠ¶æ€,æ‰§è¡Œä¸¤ç±»æ“ä½œpushå’Œpop frames.
ä½¿ç”¨é€’å½’ç®—æ³•æˆ–ä½¿ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶ä¼šå¢åŠ è¯¥å¤§å°ï¼
å¦‚æœåº”ç”¨åˆ›å»ºå¾ˆå¤šçº¿ç¨‹ï¼Œåœ¨ç”³è¯·æ›´å¤šçº¿ç¨‹æ ˆå†…å­˜ä¼šæŠ¥StackOverFlowErroré”™è¯¯.
å¯ä»¥ç”¨è®¾ç½®æœ€å¤§çº¿ç¨‹æ ˆå†…å­˜: -Xss256k æˆ–ã€€-XX:ThreadStackSize=256
ä¹Ÿå¯ä»¥å‹ç¼©æ“ä½œç¬¦å’Œç±»æŒ‡é’ˆ:
-XX:&#43;UseCompressedClassPointers
-XX:&#43;UseCompressedOops
åŸåˆ™:
 ä¸€èˆ¬æ²¡å¿…è¦è®¾ç½®è¯¥å€¼ï¼Œé™¤é64bitã€€JVMçš„ç‰©ç†å†…å­˜è¾ƒå°äº§ç”ŸOutOfMemoryé”™è¯¯ è®¾ç½®ä¸ºè¾ƒå°çš„å€¼å¯ä»¥æœ‰æ›´å¤§çš„Heap size ä¸€èˆ¬æ¥è¯´ï¼Œ64bitã€€JVMä½¿ç”¨256kè¶³å¤Ÿç”¨  OOMé—®é¢˜ é’ˆå¯¹Tomcat
# æ£€ç´¢gcæ—¥å¿— grep &amp;#39;java.lang.OutOfMemoryError: GC overhead limit exceeded&amp;#39; catalina.2016-10-25.log # è®°å½•heap dumpï¼Œsetenv.sh XX:&#43;HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/local/tomcat/logs/ GCæ—¥å¿— å‚æ•°è®¾ç½® ä¸€äº›gcæ—¥å¿—å‚æ•°ï¼Œç»å¸¸ä½¿ç”¨çš„:
-verbosegc
-Xloggc:/var/log/gc.log
è®¾ç½®æ›´è¯¦ç»†æ—¥å¿—
-XX:&#43;PrintGC
-XX:&#43;PrintGCDetails
æ˜¾ç¤ºæ—¶é—´
-XX:&#43;PrintGCTimeStamps
-XX:&#43;PrintGCDateStamps
æ—¥å¿—åˆ†æ Allocation Failureï¼šè¿è¡ŒGCï¼ˆä¸€èˆ¬æ˜¯æ–°ç”Ÿä»£å›æ”¶å³minor GCï¼‰çš„åŸå› ï¼Œæ„å‘³ç€æ–°ç”Ÿä»£å·²æ²¡æœ‰ç©ºé—´.
ä¸€å…±å­˜åœ¨8ç§OutOfMemoryErrors , GCæ—¥å¿—å¯ä»¥è®°å½•5ç§:
 Java heap space GC overhead limit exceeded Requested array size exceeded VM limit Permgen space Metaspace  åç§°ç¼©å†™  JRE: Java Runtime Environment JDK: Java Development Kit JVMï¼š Java Virtual Machine GC: Garbage Collection JMX: Java Management Extentions JPA: Java Persistence API  å·¥å…· GCæ—¥å¿—åˆ†æ  jstat: å‘½ä»¤è¡Œå·¥å…· Visual GC GCViewer åœ¨çº¿gcæ—¥å¿—åˆ†æ  Heap Dumpåˆ†æ  JHAT &amp;gt; jhat heap-dump.hprof Eclipse Memory Analyzer (MAT) IBM HeapAnalyzer:è²Œä¼¼å·²åœæ›´  è·å–heap dump  jmap -dump : è¿è¡Œæ—¶è·å¾—(ä¼šåœæ­¢javaè¿›ç¨‹) JConsoleä½¿ç”¨ HotSpotDiagnosticMXBean ä½¿ç”¨JVMå‚æ•° -XX:&#43;HeapDumpOnOutOfMemoryError ä½¿ç”¨hprofå‘½ä»¤: java -agentlib:hprof=help  è·å–ThreadDump  jstack -l  &amp;gt;&amp;gt; threadinfo.log kill -3  jcmd &amp;lt;pid&amp;gt; Thread.print &amp;gt; &amp;lt;file-path&amp;gt;  å‚è€ƒèµ„æº å®˜æ–¹æ–‡æ¡£ï¼š
 Getting Started with the G1 Garbage Collector HotSpot Virtual Machine Garbage Collection Tuning Guide Java Virtual Machine Troubleshooting  å…¶ä»–ï¼š
 GC Handbook ï¼š GCæ‰‹å†Œ JVM Anatomy Park ï¼šæ·±å…¥è®²è§£JVM How to Tune Java Garbage Collection </content>
    </entry>
    
     <entry>
        <title>å…¨é“¾è·¯å‹æµ‹ç¬”è®°ç»­</title>
        <url>/blog/more-load-test-note/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>testing</tag><tag>performance</tag>
        </tags>
        <content type="html"> çœ‹å®Œç¾å›¢çš„åˆ†äº«è§‰å¾—ä¸è¿‡ç˜¾ï¼Œç»§ç»­å­¦ä¹ å…¶ä»–å¤§å‚çš„åˆ†äº«ã€‚
ä¸ç”¨çŒœï¼Œç¬¬ä¸€ä¸ªæå‡ºè¿™å¥—ç³»ç»Ÿçš„ä¸€å®šæ˜¯é˜¿é‡Œï¼Œå› ä¸ºä»–çš„åŒ11éœ€æ±‚æœ€è¿«åˆ‡ã€‚

é˜¿é‡Œåˆ†äº« 2013å¹´ä¸ºäº†åŒ11æå‰é¢„æ¼”è€Œè¯ç”Ÿ,è¯¥æœåŠ¡å·²æä¾›åœ¨é˜¿é‡Œäº‘PTSé“‚é‡‘ç‰ˆã€‚
 ç³»ç»Ÿç¨³å®šæ€§ä¿éšœæ ¸æ­¦å™¨â€”â€”å…¨é“¾è·¯å‹æµ‹ åŒ11æ ¸æ­¦å™¨â€”â€”å…¨é“¾è·¯å‹æµ‹è¯¦è§£  å¯ç”¨æ€§åŠå•æœºå‹æµ‹é—®é¢˜ ç³»ç»Ÿå¯ç”¨æ€§é—®é¢˜ ç»å¸¸ç”±ä¸‹é¢ä¸€äº›ä¸ç¡®å®šæ€§å› ç´ å¼•èµ·ï¼š
 ç³»ç»Ÿå®¹é‡ ä¸šåŠ¡æ€§èƒ½ åŸºç¡€è®¾æ–½ç“¶é¢ˆ ä¸­é—´ä»¶ç“¶é¢ˆ ç³»ç»Ÿç›´æ¥çš„ä¾èµ–å½±å“  ä¼ ç»Ÿçº¿ä¸Šå•æœºä¸å•ç³»ç»Ÿå‹æµ‹çš„å››ç§æ–¹å¼  æ¨¡æ‹Ÿè°ƒç”¨è€…å‹æµ‹ç”Ÿäº§ç¯å¢ƒï¼šè¯»è¯·æ±‚&#43;å†™è¯·æ±‚ï¼ˆéœ€è¦ç‰¹å®šå¤„ç†ï¼‰ æµé‡å½•åˆ¶å’Œå›æ”¾ï¼šå¿«é€Ÿç‡å›æ”¾å¯¹å•æœºå‹æµ‹  ä»æµé‡åˆ†é…çš„è§’åº¦ï¼Œå°†æµé‡é›†ä¸­åˆ°æŸå°æœºå™¨ï¼ˆè¿™ä¸¤ç§æ–¹å¼è¦æ±‚è®¿é—®æµé‡ä¸èƒ½å¤ªå°ï¼‰ï¼š
 è¯·æ±‚æµé‡è½¬å‘ æ”¹å˜è´Ÿè½½å‡è¡¡çš„æƒé‡  å•ç³»ç»Ÿå‹æµ‹çš„é—®é¢˜  åœ¨åšå•ä¸ªç³»ç»Ÿçš„å®¹é‡è§„åˆ’æ—¶ï¼Œæ‰€æœ‰çš„ä¾èµ–ç¯èŠ‚èƒ½åŠ›æ˜¯æ— é™çš„ï¼Œè¿›è€Œä½¿å¾—æˆ‘ä»¬è·å–çš„å•æœºèƒ½åŠ›å€¼æ˜¯åä¹è§‚çš„ï¼› é‡‡ç”¨å•ç³»ç»Ÿè§„åˆ’æ—¶ï¼Œæ— æ³•ä¿è¯æ‰€æœ‰ç³»ç»Ÿå‡ä¸€æ­¥åˆ°ä½ï¼Œå¤§å¤šæ•°ç²¾åŠ›éƒ½é›†ä¸­æ ¸å¿ƒå°‘æ•°æ ¸å¿ƒç³»ç»Ÿï¼› éƒ¨åˆ†é—®é¢˜åªæœ‰åœ¨çœŸæ­£å¤§æµé‡ä¸‹æ‰ä¼šæš´éœ²ï¼Œæ¯”å¦‚ç½‘ç»œå¸¦å®½ç­‰ç­‰ã€‚  å…¨é“¾è·¯å‹æµ‹ç»„æˆ å•é“¾è·¯æŒ‡ä¸€ä¸ªä¸šåŠ¡çº¿ã€‚
å…¨é“¾è·¯å‹æµ‹æ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿçº¿ä¸Šç¯å¢ƒçš„å®Œæ•´é—­ç¯ï¼Œç”±5å¤§æ ¸å¿ƒè¦ç´ ç»„æˆï¼š
 å‹æµ‹ç¯å¢ƒï¼šå¯¹åº”ç”¨æˆ·çœŸå®çš„çº¿ä¸Šç¯å¢ƒï¼Œå…·å¤‡æ•°æ®ä¸æµé‡éš”ç¦»èƒ½åŠ›çš„ç”Ÿäº§ç¯å¢ƒï¼› åŸåˆ™ï¼šèƒ½å¤Ÿç”¨ä¸­é—´ä»¶è§£å†³çš„é—®é¢˜ï¼Œç»ä¸å¯¹ä¸šåŠ¡ç³»ç»Ÿè¿›è¡Œæ”¹é€ ï¼Œç³»ç»Ÿæ‰€éœ€åšçš„æ˜¯å‡çº§ä¸­é—´ä»¶ï¼Œè¿™ä¸€åŸåˆ™æå¤§æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚ å‹æµ‹åŸºç¡€æ•°æ®ï¼šæ„é€ æ»¡è¶³é«˜å³°åœºæ™¯çš„æ ¸å¿ƒåŸºç¡€ç›¸å…³æ•°æ®ï¼Œå½±å­åº“é‡Œæ„é€ ç›¸åŒé‡çº§çš„æ•°æ®ï¼› çœŸå®çº¿ä¸Šæ•°æ®ç­›é€‰è„±æ•ã€‚ å‹æµ‹æµé‡ï¼ˆæ¨¡å‹ã€æ•°æ®ï¼‰ï¼šæˆç™¾ä¸Šåƒçš„æ¥å£ç»„åˆï¼Œåˆ°å¤æ‚çš„æ¥å£ä¹‹é—´çš„å‚æ•°ä¼ é€’ï¼Œå¤æ‚çš„æ¡ä»¶åˆ¤æ–­æ¥æ„é€ ç²¾å‡†çš„å…¨å±€æµé‡æ¨¡å‹ï¼Œå’ŒçœŸå®ä¸šåŠ¡æƒ…å†µä¿æŒä¸€è‡´ï¼›
&amp;gt; å‹æµ‹å¼•æ“çš„ä¸‰å±‚ç»“æ„ï¼š  åè®®æ”¯æŒ è¯·æ±‚å‘é€ï¼šCGroupèµ„æºéš”ç¦»ï¼Œå¼‚æ­¥Reactoræ¨¡å‹å‘é€è¯·æ±‚ï¼Œé“¾è·¯é—´çº¿ç¨‹æ± éš”ç¦» é›†ç¾¤åä½œï¼š Masterï¼ŒSlaveé•¿è¿æ¥ï¼› Cristianç®—æ³•åŒæ­¥ç½‘ç»œå»¶è¿Ÿï¼ŒSlaveåŠ¨ä½œä¸€è‡´ï¼›  æµé‡å‘èµ·ï¼šæ¨¡æ‹Ÿå…¨å›½å„åœ°çœŸå®çš„ç”¨æˆ·è¯·æ±‚è®¿é—®ï¼Œæ¢æµ‹ç«™ç‚¹èƒ½åŠ›ï¼› é—®é¢˜å®šä½ï¼šå¤šç»´åº¦çš„ç›‘æ§å’ŒæŠ¥è¡¨ï¼ŒæœåŠ¡ç«¯å¯é€šè¿‡å…¶ä»–ç”Ÿæ€äº§å“ååŠ©å®šä½ã€‚  ç¿»è¯‘æ„é€ èƒ½åŠ›çš„ä½“ç°ï¼šä¾¿æ·çš„æ„é€ å…¨å±€ä¸šåŠ¡åœºæ™¯å’Œæµé‡æ•°æ®çš„èƒ½åŠ›ã€‚
åŸå­å› ç´ ï¼šé“¾è·¯ï¼ˆè¢«å‹æµ‹çš„æœ€å°å•ä½ï¼‰ æŒ‡ä»¤ï¼š æ€è€ƒæ—¶é—´ã€é›†åˆç‚¹ã€æ¡ä»¶è·³è½¬ã€cookieå­˜å–ã€å…¨å±€å‡†å¤‡ã€å¹¶å‘ç”¨æˆ·é™åˆ¶ç­‰
åŸå­å› ç´ -&amp;gt;ä¸²è¡Œé“¾è·¯-&amp;gt;åœºæ™¯
è¶…é™åçš„æµé‡æ§åˆ¶  ä¸¢å¼ƒè¯·æ±‚ å¯¹ä¸‹æ¸¸é™çº§ é»‘ç™½åå• è¯·æ±‚æ’é˜Ÿ  æµé‡å¹³å°æ•°æ®é‡  Tçº§åˆ«çš„å‹æµ‹è¯·æ±‚æ•°æ® æ¯ç§’1600W&#43;æ¬¡è¯·æ±‚å‹æµ‹èƒ½åŠ› ç»´æŒ1äº¿&#43;çš„æ— çº¿é•¿è¿æ¥å’Œç™»é™†ç”¨æˆ· ç§’çº§çš„æ™ºèƒ½æ•°æ®è°ƒåº¦å’Œå¼•æ“è°ƒåº¦èƒ½åŠ›  äº¬ä¸œåˆ†äº« ForgeBotï¼Œ 2016å¹´å¼€å‘
äº¬ä¸œå…¨é“¾è·¯å‹æµ‹å†›æ¼”ç³»ç»Ÿ(ForceBot)æ¶æ„è§£å¯†
æœ€æ—©åŸºäºå¼€æºçš„NGrinderï¼Œèƒ½èƒœä»»å•ä¸šåŠ¡å‹æµ‹ã€‚ControlleråŠŸèƒ½è€¦åˆé‡ï¼Œæ”¯æŒçš„Agentæ•°é‡æœ‰é™ã€‚ ä¹‹åå¼€å‘äº†ForgeBotã€‚
ä¸»è¦åŠŸèƒ½æ¨¡å—  Controllerï¼šä»»åŠ¡åˆ†é… Task Serviceï¼šè´Ÿè½½ä»»åŠ¡ä¸‹å‘ï¼Œæ”¯æŒæ¨ªå‘æ‰©å±•ã€‚æä¾›ä»»åŠ¡äº¤äº’å’Œæ³¨å†ŒæœåŠ¡ã€‚ï¼ˆgRPC:HTTP2&#43;protobuf3ï¼‰ Agentï¼šæ³¨å†Œå¿ƒè·³ï¼Œæ‹‰å–ä»»åŠ¡ã€æ›´æ–°ä»»åŠ¡çŠ¶æ€ã€ æ‰§è¡Œå’Œåœæ­¢worker processï¼ˆé‡‡ç”¨Dockerå®¹å™¨éƒ¨ç½²ï¼‰ Monitor Service:æ¥å—å¹¶è½¬å‘å‹æµ‹æ•°æ®ç»™JMQ DataFlow:å¯¹å‹æµ‹æ•°æ®åšæµå¼è®¡ç®—(è¾“å‡ºTPS,TP999,TP99,TP90,TP50,MAX,MIN)ï¼Œå°†è®¡ç®—ç»“æœå­˜åˆ°DB(ES)  åœ¨ç®¡ç†ç«¯åˆ›å»ºæµ‹è¯•åœºæ™¯ï¼ŒControlleræ‰«æå‘ç°åœºæ™¯ï¼Œå¯»æ‰¾ç©ºé—²Agentèµ„æºã€‚
ä»»åŠ¡åˆ†é…æ—¶ï¼ŒControllerè®¡ç®—æ¯ä¸ªé—´éš”çš„æ‰§è¡Œæ—¶é—´ç‚¹å’Œé€’å¢çš„è™šæ‹Ÿç”¨æˆ·æ•°ï¼Œç”±AgentåŠ¨æ€åŠ å‹å‡å‹ã€‚
åœ¨å¤šä¸ªç»„ä»¶ä½¿ç”¨äº†gRPCæ¡†æ¶é€šè®¯
åˆ†è¯»å‹æµ‹å’Œå†™å‹æµ‹
ä¸€äº›è§£å†³é—®é¢˜çš„æ€è·¯ é—®é¢˜ï¼šå¦‚ä½•æ¨¡æ‹Ÿåœ¨æŸä¸€ä¸ªç¬é—´å‹åŠ›è¾¾åˆ°å³°å€¼ï¼Ÿ
è§£å†³æ–¹æ¡ˆï¼šé€šè¿‡é›†åˆç‚¹åŠŸèƒ½å®ç°ï¼Œæå‰å¼€å¯å³°å€¼æ‰€éœ€è¶³å¤Ÿæ•°é‡çš„çº¿ç¨‹ï¼Œé€šè¿‡è®¡ç®—ç¡®å®šå„ä¸ªæ—¶é—´ç‚¹ä¸Šä¸éœ€è¦æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹æ•°é‡ï¼Œé€šè¿‡æ¡ä»¶é”è®©è¿™äº›çº¿ç¨‹é˜»å¡ã€‚å½“å‹åŠ›éœ€è¦æ€¥å‰§å˜åŒ–æ—¶ï¼Œæˆ‘ä»¬ä»è¿™äº›é˜»å¡çš„çº¿ç¨‹ä¸­å”¤é†’è¶³å¤Ÿæ•°é‡çš„çº¿ç¨‹ï¼Œä½¿æ›´å¤šçš„çº¿ç¨‹åœ¨çŸ­æ—¶é—´è¿›å…¥å¯¹ç›®æ ‡æœåŠ¡å‹æµ‹çš„ä»»åŠ¡ã€‚
é—®é¢˜ï¼šä¸ºäº†è®¡ç®—æ•´ä½“çš„ TPSï¼Œéœ€è¦æ¯ä¸ªAgentæŠŠæ¯æ¬¡è°ƒç”¨çš„æ€§èƒ½æ•°æ®ä¸ŠæŠ¥ï¼Œä¼šäº§ç”Ÿå¤§é‡çš„æ•°æ®ï¼Œå¦‚æœè¿›è¡Œæœ‰æ•ˆçš„ä¼ è¾“ï¼Ÿ
è§£å†³æ–¹æ¡ˆï¼šå¯¹æ¯ç§’çš„æ€§èƒ½æ•°æ®è¿›è¡Œäº†å¿…è¦çš„åˆå¹¶ï¼Œç»„æäº¤åˆ°ç›‘æ§æœåŠ¡
é¥¿äº†ä¹ˆåˆ†äº« é¥¿äº†ä¹ˆå…¨é“¾è·¯å‹æµ‹å¹³å°çš„å®ç°ä¸åŸç†
ä¸šåŠ¡æ¨¡å‹çš„æ¢³ç†  æ˜¯å¦å…³é”®è·¯å¾„ ä¸šåŠ¡çš„è°ƒç”¨å…³ç³» ä¸šåŠ¡çš„æä¾›çš„æ¥å£åˆ—è¡¨ æ¥å£ç±»å‹(httpã€thriftã€soaç­‰) è¯»æ¥å£è¿˜æ˜¯å†™æ¥å£ï¼Ÿ å„æ¥å£ä¹‹é—´çš„æ¯”ä¾‹å…³ç³»  æ•°æ®æ¨¡å‹çš„æ„å»º å†™è¯·æ±‚ å‹æµ‹æ–¹æ³•ï¼š
 ç”¨æˆ·ã€å•†æˆ·ã€èœå“ç­‰åœ¨æ•°é‡ä¸Šä¸çº¿ä¸Šç­‰æ¯”ä¾‹ç¼©æ”¾ï¼› å¯¹å‹æµ‹æµé‡è¿›è¡Œç‰¹æ®Šæ ‡è®°ï¼› æ ¹æ®å‹æµ‹æ ‡è®°å¯¹æ”¯ä»˜ï¼ŒçŸ­ä¿¡ç­‰ç¯èŠ‚è¿›è¡Œmockï¼› æ ¹æ®å‹æµ‹æ ‡è®°è¿›è¡Œæ•°æ®æ¸…ç†ï¼›
è¯»è¯·æ±‚ å‹æµ‹æ–¹æ³•ï¼šæ‹‰å–çº¿ä¸Šæ—¥å¿—ï¼Œæ ¹æ®çœŸå®æ¥å£æ¯”ä¾‹å…³ç³»è¿›è¡Œå›æ”¾
  æ— æ—¥å¿—æœåŠ¡ å‹æµ‹æ–¹æ³•ï¼š
 æ„å»ºå‹æµ‹æ•°æ®ä½¿ç¼“å­˜å‘½ä¸­ç‡ä¸º0%æ—¶ï¼ŒæœåŠ¡æ¥å£æ€§èƒ½ï¼Œæ•°æ®åº“æ€§èƒ½ï¼› ç¼“å­˜å‘½ä¸­ç‡ä¸º100%æ—¶ï¼ŒæœåŠ¡æ¥å£æ€§èƒ½ï¼› ç¼“å­˜å‘½ä¸­ç‡è¾¾åˆ°ä¸šåŠ¡é¢„ä¼°å€¼æ—¶ï¼ŒæœåŠ¡æ¥å£æ€§èƒ½ï¼›  å‹æµ‹å·¥å…· å®šåˆ¶JMeter
å‹æµ‹æŒ‡æ ‡ç›‘æ§å’Œæ”¶é›†  åº”ç”¨å±‚é¢ æœåŠ¡å™¨èµ„æº åŸºç¡€æœåŠ¡ï¼šä¸­é—´ä»¶å’Œæ•°æ®åº“  è¦ç‚¹ï¼š
 å“åº”æ—¶é—´ä¸è¦ç”¨å¹³å‡å“åº”æ—¶é—´ï¼Œå…³æ³¨95çº¿ï¼› ååé‡å’Œå“åº”æ—¶é—´æŒ‚é’© ååé‡å’ŒæˆåŠŸç‡æŒ‚é’©  å…·ä½“å®ç° SpringBoot&#43;AngularJS.
æµ‹è¯•æœŸé—´äº§ç”Ÿçš„å†·æ•°æ®(ç”¨ä¾‹æ•°æ®ã€ç»“æœæ•°æ®)æŒä¹…åŒ–è‡³MongoDBï¼Œçƒ­æ•°æ®(å®æ—¶æ•°æ®)æŒä¹…åŒ–è‡³InfluxDBå¹¶å®šæœŸæ¸…ç†ã€‚
åˆ†å¸ƒå¼æµ‹è¯•ï¼šé‡æ–°å®ç°JMeterçš„åˆ†å¸ƒå¼è°ƒåº¦
æµ‹è¯•çŠ¶æ€æµè½¬ï¼šå„ç§æµç¨‹å½¢æˆé—­ç¯ï¼Œè¦è€ƒè™‘å„ç§å¼‚å¸¸ã€‚
ä¸»è¦æµç¨‹ï¼šé…ç½® -&amp;gt; è§¦å‘ -&amp;gt; è¿è¡Œ -&amp;gt; ç»“æœæ”¶é›† -&amp;gt; æ¸…ç†ã€‚
æ•´ä¸ªçŠ¶æ€æµè½¬çš„å®ç°ï¼Œé‡‡ç”¨å¼‚æ­¥Jobæœºåˆ¶å®ç°äº†ç±»ä¼¼çŠ¶æ€æœºçš„æ¦‚å¿µï¼ŒçŠ¶æ€å±æ€§æŒä¹…åŒ–åˆ°æ•°æ®åº“ä¸­ï¼Œä¾¿äºæ¢å¤ã€‚
å®‰å…¨ä¿éšœ ç”±äºæ˜¯åœ¨çº¿ä¸ŠçœŸå®ç¯å¢ƒï¼Œéœ€è¦é¿å…æµ‹è¯•å¼•èµ·çš„æœåŠ¡ä¸å¯ç”¨å’Œäº‹æ•…ã€‚
 æƒé™ç®¡ç†ï¼šç”¨æˆ·æƒé™åˆ†çº§ç®¡ç†ï¼Œä¸èƒ½éšæ„è§¦å‘ä»–äººçš„æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒæ—¶é«˜å³°æœŸå’Œç¦æ­¢å‘å¸ƒæœŸï¼Œä¸å…è®¸æ‰§è¡Œä»»ä½•æµ‹è¯•ã€‚ åœæ­¢åŠŸèƒ½ï¼šè¿™æ˜¯é¢å‘ç”¨æˆ·çš„æ‰‹åŠ¨åœæ­¢åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥éšæ—¶ç‚¹å‡»è¿è¡ŒçŠ¶æ€ä¸‹çš„æµ‹è¯•ç”¨ä¾‹ä¸Šçš„åœæ­¢æŒ‰é’®ï¼Œåå°ä¼šç›´æ¥killæ‰æ‰€æœ‰è¿è¡Œè¯¥æµ‹è¯•ç”¨ä¾‹çš„æµ‹è¯•æœºä¸Šçš„JMeterè¿›ç¨‹ã€‚ ç†”æ–­åŠŸèƒ½ï¼šç³»ç»Ÿä¼šæ ¹æ®å®æ—¶ä¿¡æ¯ä¸­çš„é”™è¯¯ç‡è¿›è¡Œåˆ¤æ–­ï¼Œå½“ä¸€å®šæ—¶é—´å†…çš„å®æ—¶é”™è¯¯ç‡è¾¾åˆ°æˆ–è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼Œè¯¥æ¬¡æµ‹è¯•å°†è¢«è‡ªåŠ¨ç†”æ–­ï¼Œæ— éœ€ç”¨æˆ·å¹²é¢„ã€‚ å…œåº•è„šæœ¬ï¼šæœ€æç«¯çš„æƒ…å†µï¼Œå½“æ•´ä¸ªç³»ç»Ÿä¸å¯ç”¨ï¼Œè€Œæ­¤æ—¶éœ€è¦åœæ­¢æµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä»½å¤–éƒ¨è„šæœ¬ç›´æ¥è¿›è¡Œåœæ­¢ã€‚ </content>
    </entry>
    
     <entry>
        <title>ç¾å›¢å…¨é“¾è·¯å‹æµ‹Quakeå­¦ä¹ ç¬”è®°</title>
        <url>/blog/meituan-load-test-note/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>testing</tag><tag>performance</tag>
        </tags>
        <content type="html"> ä»Šå¤©è¯»äº†ç¾å›¢æŠ€æœ¯å›¢é˜Ÿæ–°å‘å¸ƒçš„å…¨é“¾è·¯å‹æµ‹å¹³å°Quakeåœ¨ç¾å›¢ä¸­çš„å®è·µï¼Œåšä¸ªç¬”è®°ã€‚
å…ˆè¯´ä¸‹æ€»çš„è¯»åæ„Ÿ:
å‹åŠ›æµ‹è¯•/æ€§èƒ½æµ‹è¯•æœ‰å¤šç§æ–¹å¼ï¼Œä»ä¸‹é¢çš„å‡ ä¸ªå‘å±•é˜¶æ®µå¯ä»¥çœ‹å‡ºè¶Šæ¥è¶Šè¿½æ±‚çœŸå®é«˜å³°è®¿é—®çš„æ¨¡æ‹Ÿã€‚
ç°åœ¨å¤§å…¬å¸æ™®éçš„åˆ†å¸ƒå¼æ¶æ„ï¼Œäº‘è®¡ç®—çš„åº”ç”¨ï¼Œå®¹å™¨çš„ä½¿ç”¨ä¹Ÿå¯ä»¥æä¾›æ›´æœ‰åŠ›çš„èµ„æºè°ƒåº¦ã€‚ä½†å…¨é“¾è·¯å‹æµ‹æœ€é‡è¦çš„å·¥ä½œåœ¨äºéœ€è¦æ¶æ„ï¼Œå¼€å‘å›¢é˜Ÿçš„æ”¯æŒå’Œé€‚é…å·¥ä½œã€‚
æ²¡æœ‰å…¨é“¾è·¯çš„ç›‘æ§åŠç›¸å…³å·¥å…·æ”¯æ’‘ï¼Œæ²¡æœ‰æ¶æ„çš„è°ƒæ•´ï¼ˆå‹æµ‹æ ‡è¯†ï¼‰å’Œæ•°æ®åº“çš„é…åˆï¼ˆå½±å­è¡¨ï¼‰ï¼Œè¿™ä¸ªå…¨é“¾è·¯å‹æµ‹å°±æ˜¯ä¸ªå¬èµ·æ¥æ›´ç¾çš„åå­—ï¼ˆä½ ä¹ŸçŸ¥é“æŠ€æœ¯åœˆå–œæ¬¢é€ æ–°è¯ï¼‰ã€‚
å°è±¡ä¸­APM/Application Performance Management å‰å‡ å¹´å°±æŒºç«çš„ï¼Œç°åœ¨å„å¤§å‚åˆéƒ½åœ¨æå…¨é“¾è·¯äº†ã€‚

 æ–‡ç« ç¬”è®°æ‘˜è¦
 èƒŒæ™¯ è¦è§£å†³çš„é—®é¢˜  éªŒè¯å³°å€¼æµé‡ä¸‹æœåŠ¡çš„ç¨³å®šæ€§å’Œä¼¸ç¼©æ€§ éªŒè¯æ–°ä¸Šçº¿åŠŸèƒ½çš„ç¨³å®šæ€§ è¿›è¡Œé™çº§ã€æŠ¥è­¦ç­‰æ•…éšœæ¼”ç»ƒ å¯¹çº¿ä¸ŠæœåŠ¡è¿›è¡Œæ›´å‡†ç¡®çš„å®¹é‡è¯„ä¼°  å‹åŠ›æµ‹è¯•æ–¹å¼çš„å‡ ä¸ªé˜¶æ®µ  å¯¹çº¿ä¸Šçš„å•æœºæˆ–é›†ç¾¤å‘èµ·æœåŠ¡è°ƒç”¨ å°†çº¿ä¸Šæµé‡è¿›è¡Œå½•åˆ¶ï¼Œç„¶ååœ¨å•å°æœºå™¨ä¸Šè¿›è¡Œå›æ”¾ é€šè¿‡ä¿®æ”¹æƒé‡çš„æ–¹å¼è¿›è¡Œå¼•æµå‹æµ‹ å…¨é“¾è·¯å‹æµ‹  å…¨é“¾è·¯å‹æµ‹ä»‹ç» åŸºäºçº¿ä¸ŠçœŸå®ç¯å¢ƒå’Œå®é™…ä¸šåŠ¡åœºæ™¯ï¼Œé€šè¿‡æ¨¡æ‹Ÿæµ·é‡çš„ç”¨æˆ·è¯·æ±‚ï¼Œå¯¹æ•´ä¸ªç³»ç»Ÿè¿›è¡Œå‹åŠ›æµ‹è¯•ã€‚
ä¸»è¦ç‰¹å¾ï¼š
 çœŸå®æµé‡ çº¿ä¸Šç¯å¢ƒ å®æ—¶ç›‘æ§å’Œè¿‡è½½ä¿æŠ¤  æ ¸å¿ƒåŠŸèƒ½ æ•°æ®æ„é€  å›æ”¾ä¸šåŠ¡é«˜å³°æœŸäº§ç”Ÿçš„æµé‡
 HTTPï¼š Nginx Access Logåˆ†æ RPCï¼šå¯¹éƒ¨åˆ†æœºå™¨å½•åˆ¶  é€šè¿‡ä»¥ä¸Šä¸¤ç§æ–¹å¼ç”Ÿæˆå‹æµ‹è¯è¡¨ï¼ˆè¯è¡¨åˆ†ç‰‡å¤„ç†ï¼Œæ–¹ä¾¿åç»­æ‰¹é‡åŠ è½½ï¼‰
å‹æµ‹éš”ç¦» æ·»åŠ å‹æµ‹æ ‡è¯†ï¼Œå„æœåŠ¡å’Œä¸­é—´ä»¶ä¾æ®æ ‡è¯†æ¥è¿›è¡Œå‹æµ‹æœåŠ¡çš„åˆ†ç»„å’Œå½±å­è¡¨æ–¹æ¡ˆçš„å®æ–½ã€‚
åœ¨è¯·æ±‚å¤´æ·»åŠ ç‰¹æ®Šæ ‡è¯†ï¼Œä½†éœ€è¦ä¿è¯çº¿ç¨‹é—´å’Œè·¨æœåŠ¡é—´é€ä¼ ã€‚
é“¾è·¯è¯Šæ–­åŠŸèƒ½æ–¹ä¾¿å®šä½é—®é¢˜ã€‚
æœåŠ¡éš”ç¦» é€šå¸¸é€‰æ‹©æ·±å¤œä½å³°å‹æµ‹ï¼ŒåŒæ—¶éš”ç¦»æ­£å¸¸æµé‡å’Œæµ‹è¯•æµé‡ã€‚ éš”ç¦»ç­–ç•¥ï¼šåŸºäºIPï¼Œæœºå™¨æ•°ï¼Œç™¾åˆ†æ¯”
æ•°æ®éš”ç¦» å½±å­è¡¨ï¼ˆé˜¿é‡Œï¼‰ï¼šä½¿ç”¨çº¿ä¸ŠåŒä¸€ä¸ªæ•°æ®åº“ï¼ŒåŒ…æ‹¬å…±äº«æ•°æ®åº“ä¸­çš„å†…å­˜èµ„æºï¼Œåªåœ¨å†™å…¥æ•°æ®æ—¶å†™è¿›å¦ä¸€ä¸ªå½±å­è¡¨ã€‚ KVçš„å¤„ç†ç±»ä¼¼ï¼ŒMQåˆ™é€‰æ‹©ç”Ÿäº§ç«¯æˆ–æ¶ˆè´¹ç«¯å¿½ç•¥æ¶ˆæ¯ã€‚
è°ƒåº¦ä¸­å¿ƒ èµ„æºè®¡ç®—é¢„ä¼°  å‹æµ‹æœŸæœ›åˆ°è¾¾çš„QPS å‹æµ‹è¯·æ±‚çš„å¹³å‡å“åº”æ—¶é—´å’Œè¯·æ±‚/å“åº”ä½“å¤§å° å‹æµ‹çš„è¯è¡¨å¤§å°ã€åˆ†ç‰‡æ•° å‹æµ‹ç±»å‹  äº‹ä»¶æ³¨å…¥æœºåˆ¶ æ ¹æ®ç³»ç»Ÿçš„å®é™…æƒ…å†µå¯¹å‹åŠ›è¿›è¡Œç›¸åº”è°ƒæ•´ã€‚
 è°ƒæ•´QPS è§¦å‘ç†”æ–­ å¼€å¯äº‹æ•…æ³¨å…¥ å¼€å¯ä»£ç çº§æ€§èƒ½åˆ†æ  ä»£ç è®¾è®¡ï¼šè§‚å¯Ÿè€…æ¨¡å¼ï¼ˆä¼šè§¦å‘çš„äº‹ä»¶ï¼‰å’Œè´£ä»»é“¾æ¨¡å¼ï¼ˆæ‰§è¡Œäº‹ä»¶ï¼‰
ç†”æ–­ä¿æŠ¤æœºåˆ¶ å®¢æˆ·ç«¯ç†”æ–­ï¼š æ ¹æ®ä¸šåŠ¡è‡ªå®šä¹‰çš„ç†”æ–­é˜ˆå€¼ï¼Œå®æ—¶åˆ†æç›‘æ§æ•°æ®ï¼Œå½“è¾¾åˆ°ç†”æ–­é˜ˆå€¼æ—¶ï¼Œä»»åŠ¡è°ƒåº¦å™¨ä¼šå‘å‹æµ‹å¼•æ“å‘é€é™ä½QPSæˆ–è€…ç›´æ¥ä¸­æ–­å‹æµ‹çš„æŒ‡ä»¤ï¼Œé˜²æ­¢ç³»ç»Ÿè¢«å‹æŒ‚ã€‚
</content>
    </entry>
    
     <entry>
        <title>å†å­¦æ¸¸æ³³</title>
        <url>/play/swimming/</url>
        <categories>
          <category>play</category>
        </categories>
        <tags>
          <tag>health</tag>
        </tags>
        <content type="html"> æœ€è¿‘å†æ¬¡å¼€å§‹å­¦æ¸¸æ³³ï¼Œè·ç¦»åˆæ¬¡å­¦è›™æ³³å·²ç»è¿‡å»äº†10å¤šå¹´ã€‚å½“æ—¶è¿˜åœ¨å¤§å­¦è¹­å®¿èˆï¼Œå› ä¸ºä¸€ç›´å¾ˆå–œæ¬¢å‘å¾€å¤§æµ·ï¼Œä¾¿è®©è€åŒå­¦æ•™æˆ‘è›™æ³³ã€‚ æœŸé—´ç”±äºåŸºç¡€ä¸è¡Œï¼ŒæŸæ¬¡åœ¨æ·±æ°´åŒºæººæ°´ç»™æˆ‘ç•™ä¸‹äº†é˜´å½±ï¼Œä¹‹åå‚ä¸ä¾¿ä¸ç§¯æï¼Œç›´åˆ°æ¬å®¶è¿œç¦»äº†æ¸¸æ³³é¦†ï¼Œä¾¿ä¸å†æ¥è§¦è¯¥è¿åŠ¨äº†ã€‚ è¿™æ®µæ—¶é—´æœ‰çŸ­çŸ­ç»­ç»­çš„ä¸€å¹´å¤šï¼Œç°åœ¨æƒ³æ¥æœ€åå¯èƒ½ä¹Ÿå°±40ï½50åˆ†ï¼Œä¸»è¦æ˜¯åŸºç¡€åŠ¨ä½œä¸å¯¹ï¼Œè¿ç»­æ¢æ°”å›°éš¾ï¼Œå¯¹æ·±æ°´ä¸è‡ªåœ¨ã€‚
è¿™æ¬¡çš„å¥‘æœºæ˜¯8æœˆåˆå…¬å¸ç»„ç»‡å»å—æˆ´æ²³ï¼Œå»ä¹‹å‰å¤ä¹ äº†æ¸¸æ³³ï¼Œç»“æœåˆ°æµ·é‡Œä¸€æ—¦è„šå¤Ÿä¸ç€åº•å°±å¾ˆæ…Œä¸æ•¢æ¸¸ï¼Œä¹Ÿå‘›äº†å¥½å‡ å£æµ·æ°´ã€‚å›æ¥åä»çŸ¥ä¹å¼€å§‹å­¦ä¹ ï¼Œè·Ÿç€â€œç½‘çº¢â€æ•™ç»ƒæ¢¦è§‰ï¼ˆæ˜“é‘«æµ·ï¼‰åˆåˆ°Bç«™ï¼Œå‡ ä¹çœ‹äº†æ‰€æœ‰è§†é¢‘ï¼Œå—ç›Šè‰¯å¤šã€‚
ç°åœ¨æ°´æ€§ï¼ˆå’Œæ°´çš„äº²å’Œæ„Ÿï¼‰å¥½å¤šäº†ï¼Œå­¦ä¼šäº†åŸºæœ¬çš„æ½œæ³³ï¼Œå‰æ»šç¿»ï¼Œä»°æ³³è…¿ï¼Œä¹Ÿå­¦ä¼šäº†è¸©æ°´,å¯ä»¥å†æ¬¡æ¸¸åˆ°æ·±æ°´åŒºäº†ã€‚
è›™æ³³ç»ƒçš„å·®ä¸å¤šäº†ï¼Œç°åœ¨å·²æ”¹å­¦è‡ªç”±æ³³,è‡ªç”±æ³³è…¿åˆšæœ‰æ„Ÿè§‰ã€‚
èƒ½ç»§ç»­å‚ä¸çš„å¦ä¸€ä¸ªåŸå› æ˜¯ä¹‹å‰æ‰¾åˆ°è¿åŠ¨æ–¹å¼è¦ä¹ˆæ—¶é—´ç©ºé—´å—é™ï¼Œè¦ä¹ˆçƒ­æƒ…ä¸å¤Ÿã€‚è€Œè‡ªä»ä¸Šä¸ªæœˆå¼€å§‹æ¸¸æ³³ï¼Œæ¯æ¬¡éƒ½æœ‰å°çš„è¿›æ­¥ï¼Œè¿™ç§æ„Ÿè§‰è¿˜æ˜¯å¾ˆçˆ½çš„ã€‚
ä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨è®²è§£ç»†è‡´å¹½é»˜ç³»ç»Ÿçš„æ˜“æ•™ç»ƒï¼Œè§†é¢‘é‡Œçš„é”™è¯¯åŠ¨ä½œï¼Œæˆ‘è¿™ä¸ªæ–°æ‰‹80%éƒ½çŠ¯è¿‡ã€‚
 Bç«™ï¼šhttps://space.bilibili.com/7283282/#/index çŸ¥ä¹ï¼šæ€æ ·å¿«é€Ÿæœ‰æ•ˆåœ°å­¦ä¹ æ¸¸æ³³ï¼Ÿ  ä¹Ÿè¯¥æ„Ÿè°¢è¿™ä¸ªå†…å®¹åˆ›ä¸šç«çƒ­çš„å¹´ä»£ï¼Œè®©ä¼˜è´¨çš„æ•™å­¦å†…å®¹æœ‰å¥½çš„ç”Ÿé•¿ç©ºé—´ï¼Œè®©è‡ªå­¦æ›´å®¹æ˜“äº†ã€‚
</content>
    </entry>
    
     <entry>
        <title>Ubuntuæ—¥å¸¸</title>
        <url>/blog/ubuntu/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>linux</tag>
        </tags>
        <content type="html">  å¾ˆæ—©å°±æ¥è§¦ä½¿ç”¨Ubuntuï¼Œä¹Ÿæ˜¯è‡ªå·±æœ€é’Ÿçˆ±çš„Linuxç³»ç»Ÿã€‚ ç»™Ubuntuç•™ä¸€ç¯‡è®°å½•æ—¥å¸¸ä½¿ç”¨ã€‚
Ubuntu 18.04å®‰è£…ä¸­æ–‡è¾“å…¥æ³• sogouæ‹¼éŸ³ç”±äºä¸æ”¯æŒæœ€æ–°çš„18.04ï¼Œæ‰€ä»¥å®‰è£…ç³»ç»Ÿè‡ªå¸¦çš„ä¸­æ–‡è¾“å…¥æ³•ã€‚ PS. Sublime Text 3ä¸æ”¯æŒä¸­æ–‡è¾“å…¥ä¹Ÿå¾ˆä¸çˆ½ã€‚
å®‰è£…ä¸­æ–‡è¯­è¨€ [Settings] - [Region &amp;amp; Language],ç‚¹å‡»â€œManage Insalled Languagesâ€,ç‚¹å‡»â€œInstall/Remove Languageâ€,å‹¾é€‰â€œChinese(simplified)â€å¹¶ç‚¹å‡»â€œApplyâ€.
æˆ–è€…ç›´æ¥ä½¿ç”¨å‘½ä»¤è¡Œï¼š
sudo apt install language-pack-zh-hans language-pack-gnome-zh-hans thunderbird-locale-zh-hans firefox-locale-zh-hans kde-l10n-zhcn fonts-arphic-ukai libreoffice-l10n-zh-cn kde-config-fcitx hunspell-en-za hyphen-en-ca mythes-en-au gnome-user-docs-zh-hans fonts-arphic-uming thunderbird-locale-zh-cn libreoffice-l10n-en-za kde-l10n-engb hyphen-en-gb libreoffice-l10n-en-gb ibus-table-wubi ibus-libpinyin libreoffice-help-zh-cn thunderbird-locale-en-gb fonts-noto-cjk-extra hunspell-en-au hunspell-en-gb hunspell-en-ca libreoffice-help-en-gb  æ·»åŠ æ™ºèƒ½ä¸­æ–‡è¾“å…¥æ³• æ³¨ï¼š å¯èƒ½éœ€è¦å…ˆLogoutä¸‹ã€‚
ä¹‹ååœ¨[Settings] - [Region &amp;amp; Language]çš„â€œInput Sourcesâ€é€‰æ‹© [Chinese]-[Chinese(Intelligent Pinyin)]å¹¶æ·»åŠ ã€‚
Ubuntu/Linuxä¸‹å¸¸ç”¨è½¯ä»¶  å›¾åƒç¼–è¾‘ï¼š GIMP ï¼ˆ[ç¼–è¾‘]-[é¦–é€‰é¡¹]-[ç•Œé¢]ä¸‹è®¾ç½®ä¸­æ–‡ï¼‰ ç¼–è¾‘å™¨ï¼š sublimetext3/vscode FTPï¼š FileZilla  </content>
    </entry>
    
     <entry>
        <title>MySQLæ€§èƒ½ä¼˜åŒ–</title>
        <url>/blog/mysql-tuning/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>database</tag><tag>mysql</tag>
        </tags>
        <content type="html"> å…³äºMySQLæ€§èƒ½é—®é¢˜æŸ¥æ‰¾åŠä¼˜åŒ–çš„ç‚¹æ»´. å¸¸ç”¨å‚æ•° # /etc/my.cnf [mysqld] max_connections=1000 # æœ€å¤§è¿æ¥æ•° innodb_buffer_pool_size=4G # ç¼“å­˜æ± å¤§å°,å»ºè®®&amp;lt; 80% æ€»å†…å­˜  # æ—¶é—´è¶…è¿‡2ç§’çš„SQLè®°å½•åœ¨æ…¢æŸ¥è¯¢æ—¥å¿— long_query_time=2 # ç”¨ä»¥ä¸‹é¢å“åº”æ—¶é—´åˆ†å¸ƒçš„æ”¶é›† query_response_time_stats = on innodb_buffer_pool_size æ¨èå¤§å° è®¡ç®—RIBPS(Recommended InnoDB Buffer Pool Size)åŸºäºæ‰€æœ‰InnoDBæ•°æ®å¤§å°å’Œé¢å¤–60%ç´¢å¼•å¤§å°.
SELECT CEILING(Total_InnoDB_Bytes*1.6/POWER(1024,3)) RIBPS FROM (SELECT SUM(data_length&#43;index_length) Total_InnoDB_Bytes FROM information_schema.tables WHERE engine=&amp;#39;InnoDB&amp;#39;) A; å®é™…å ç”¨å¤§å°ä¸º:
SELECT (PagesData*PageSize)/POWER(1024,3) DataGB FROM (SELECT variable_value PagesData FROM information_schema.global_status WHERE variable_name=&amp;#39;Innodb_buffer_pool_pages_data&amp;#39;) A,(SELECT variable_value PageSize FROM information_schema.global_status WHERE variable_name=&amp;#39;Innodb_page_size&amp;#39;) B; åˆ©ç”¨å¤šæ ¸CPU # æ— é™å¹¶å‘ innodb_thread_concurrency = 0 # ä¸‹é¢ä¸¤ä¸ªå€¼æœ€å¤§è®¾ç½®ä¸º64 innodb_read_io_threads innodb_write_io_threads æ£€æŸ¥å½“å‰æ…¢æŸ¥è¯¢å¹¶è¿è¡ŒEXPLAIN mysql&amp;gt; SHOW FULL PROCESSLIST; # æ‰¾åˆ°ä¸Šé¢ç»å¸¸å‡ºç°çš„SQLè¯­å¥ EXPLAIN SQL-Statement  çŠ¶æ€sending dataæ„å‘³ç€æ­£åœ¨ç­‰å¾…ä»ç£ç›˜æˆ–å†…å­˜è¯»å–æ•°æ®å¹¶å‘é€å‡ºå»,å³ reading and filtering data.
 PMMçš„MySQL Query Response Timeä»ªè¡¨ç›˜ PMM(Percona Monitoring and Management)çš„å¼€æºç›‘æ§å·¥å…·è¿˜æ˜¯å¾ˆå¥½ç”¨çš„.
å®‰è£…PMMæœåŠ¡ç«¯ å»ºè®®ä½¿ç”¨dockerçš„æ–¹å¼
# è·å–é•œåƒ docker pull percona/pmm-server:latest # åˆ›å»ºå®¹å™¨ docker create \  -v /opt/prometheus/data \  -v /opt/consul-data \  -v /var/lib/mysql \  -v /var/lib/grafana \  --name pmm-data \  percona/pmm-server:latest /bin/true # è¿è¡Œ docker run -d \  -p 80:80 \  --volumes-from pmm-data \  --name pmm-server \  --restart always \  percona/pmm-server:latest é…ç½®å®¢æˆ·ç«¯ (åœ¨è¿è¡ŒMySQLçš„ä¸»æœº) yum install -y pmm-client # Ubuntu å…ˆè·å– # wget https://www.percona.com/downloads/pmm/1.13.0/binary/debian/xenial/x86_64/pmm-client_1.13.0-1.xenial_amd64.deb sudo pmm-admin config --server 192.168.100.1 # å¯é€‰é¡¹ â€”server-user admin â€”server-password admin  sudo pmm-admin add mysql â€”user root â€”password password # æŸ¥çœ‹å½“å‰çŠ¶æ€ sudo pmm-admin list pmm-adminä½¿ç”¨  pmm-admin ping pmm-admin config pmm-admin info pmm-admin stop â€”all pmm-admin uninstall  è®¾ç½®ä»¥è®°å½•Response Timeåˆ†å¸ƒ å®‰è£…å¿…è¦çš„æ’ä»¶:
mysql&amp;gt; INSTALL PLUGIN QUERY_RESPONSE_TIME_AUDIT SONAME &amp;#39;query_response_time.so&amp;#39;; mysql&amp;gt; INSTALL PLUGIN QUERY_RESPONSE_TIME SONAME &amp;#39;query_response_time.so&amp;#39;; mysql&amp;gt; INSTALL PLUGIN QUERY_RESPONSE_TIME_READ SONAME &amp;#39;query_response_time.so&amp;#39;; mysql&amp;gt; INSTALL PLUGIN QUERY_RESPONSE_TIME_WRITE SONAME &amp;#39;query_response_time.so&amp;#39;; # æ£€æŸ¥å½“å‰å®‰è£…æ’ä»¶çŠ¶æ€ mysql&amp;gt; SHOW PLUGINS; å¼€å¯æ•°æ®æ”¶é›†:
SET GLOBAL query_response_time_stats = &amp;#39;ON&amp;#39;; # æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆ show variables like &amp;#39;%query_response_time%&amp;#39;; èµ„æº  EXPLAINæ‰§è¡Œè®¡åˆ’è®²è§£ PMM Serverå®˜æ–¹æ–‡æ¡£ </content>
    </entry>
    
     <entry>
        <title>Javaåº”ç”¨çš„æ•°æ®åº“è¿ç§»å·¥å…·Flyway</title>
        <url>/blog/java-db-migrate/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>java</tag><tag>database</tag>
        </tags>
        <content type="html"> æœ€è¿‘æŠ˜è…¾éƒ¨ç½²ä¸€å¹´å‰çš„ä¸€ä¸ªåº”ç”¨,å‘ç°ä¸€äº›ç”±äºä¸€äº›ç»†èŠ‚å·²ç»å¿˜è®°,å¸¸å¸¸å¯èƒ½å¤šèŠ±è´¹å‡ ä¸ªå°æ—¶å»é‡æ–°è§£å†³é—®é¢˜çš„è¿‡ç¨‹. è€Œæœ‰çš„è¿‡ç¨‹ä¹‹å‰å†™è¿‡KB,å…³é”®å­—ä¸€æœç´¢å°±å‡ºæ¥èƒ½çœä¸å°‘æ—¶é—´.
æ‰€ä»¥å¯¹äºå¥å¿˜çš„è‡ªå·±,è¿˜æ˜¯å¤šäº›è®°å½•,ä¹Ÿä¸ä»‹æ„æŠ€æœ¯å«é‡è¿™ä¸ªæ¦‚å¿µäº†.
å°è±¡ä¸­flywayåº”è¯¥æ˜¯Javaç”Ÿæ€ä¸­å¾ˆæˆç†Ÿçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆäº†,ç®€ç•¥çš„è®°ä¸‹ä½¿ç”¨è¿‡ç¨‹.

å®‰è£… wget https://repo1.maven.org/maven2/org/flywaydb/flyway-commandline/5.1.4/flyway-commandline-5.1.4-linux-x64.tar.gz tar xzf flyway-commandline-5.1.4-linux-x64.tar.gz # å¯é€‰ cp mysql-connector-java-5.1.41.jar /opt/flyway-5.1.4/drivers/ é…ç½® ä¸»è¦åœ¨conf/flyway.confæ–‡ä»¶
# å¿…é¡»é¡¹ flyway.url=jdbc:mysql://&amp;lt;host&amp;gt;:&amp;lt;port&amp;gt;/&amp;lt;database&amp;gt; flyway.user=test flyway.password=test # å‡çº§æ•°æ®åº“è„šæœ¬ä½ç½® flyway.locations=filesystem:/opt/db/migration/ # å¯é€‰ # ç”¨äºéç©ºæ•°æ®åº“é¦–æ¬¡ä½¿ç”¨ flyway.baselineOnMigrate=true ä½¿ç”¨ # æ¸…ç©ºæ•°æ® ./flyway clean # å‡çº§/è¿ç§»æ•°æ® ./flyway migrate èµ„æº  Flywayå®˜ç½‘ </content>
    </entry>
    
     <entry>
        <title>Goå¹¶å‘ç¼–ç¨‹ç¬”è®°</title>
        <url>/blog/go-concurrency/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> æœ€è¿‘å°è¯•ç”¨Goé‡å†™ä»¥å‰Pythonçš„ä¸€ä¸ªå·¥å…·,æ„Ÿè§‰ä¸€ç›´å·¥ä½œäºHardæ¨¡å¼,å¯æ˜¯åˆä¸æƒ³è½»æ˜“çš„æ”¾å¼ƒGolangçš„å®è·µ,å› ä¸ºé‡åˆ°ä¸€äº›é—®é¢˜æœ€ç»ˆå˜æˆä»å…¥é—¨åˆ°æ”¾å¼ƒ.
è¿˜å¥½ä¸€å‘¨å‘¨åšæŒäº†ä¸‹æ¥,è™½ç„¶é‡åˆ°ä¸€ä¸ªé—®é¢˜å¯èƒ½ä¼šè§£å†³å¤šåŠå¤©ç”šè‡³ä¸€å¤©å¤šæ—¶é—´,è¿˜æ˜¯æœ‰æ‰€å­¦çš„.
ä»Šå¤©æ•´ç†ä¸‹å…³äºå¹¶å‘ç¼–ç¨‹,ä¹Ÿå°±æ˜¯Goæ ¸å¿ƒäº®ç‚¹goroutineä½¿ç”¨ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜.

æ•²é‡ç‚¹ è¿è¡Œæ˜¯ä¸€å®šæ‰“å¼€ -race å‘½ä»¤è¡Œå‚æ•° è¯¥æ ‡è®°ä¼šæ‰“å°äº§ç”Ÿè¯»å†™å†²çª/æ•°æ®ç«äº‰çš„é”™è¯¯åŠstacktrace, é¿å…åˆ°ç”Ÿäº§ç¯å¢ƒæ‰å‘ç°é—®é¢˜.
ç»å¯¹æ˜¯ææ—©æ’æŸ¥çš„åˆ©å™¨, ä¹Ÿç®—Goçš„ä¼˜åŠ¿ä¹‹ä¸€ :)
å…¶ä»–åº”ç”¨: è¯¥å‚æ•°ä¹Ÿå¯ä»¥åŠ åœ¨test,build,runç­‰å‘½ä»¤, ç”±äºç”Ÿæˆå¸¦æ£€æµ‹çš„buildä¼šæ¶ˆè€—æ›´å¤šå†…å­˜å’ŒCPU,å»ºè®®ç”Ÿäº§ç¯å¢ƒä¸è¦éƒ¨ç½²æˆ–åªéƒ¨ç½²å…¶ä¸­ä¸€å°èŠ‚ç‚¹.
å¹¶å‘Map é»˜è®¤çš„mapæ˜¯ä¸æ”¯æŒå¹¶å‘è¯»å†™çš„, å¦‚æœè¿æ³•äº†åæœå¾ˆä¸¥é‡,ä¸»ç¨‹åºç›´æ¥å¼‚å¸¸é€€å‡º,é€šå¸¸ä¼šçœ‹åˆ°å¦‚ä¸‹çš„é”™è¯¯:
 fatal error: concurrent map writes
 è§£å†³æ–¹å¼æœ‰ä¸‰ä¸ª:
 ä»ä½¿ç”¨åŸç”Ÿmap,ç”¨sync.RWMutexåŠ é” ä½¿ç”¨ 1.9 å¼•å…¥çš„ sync.Map, é€‚ç”¨äºè¯»è¿œå¤§äºå†™çš„æƒ…æ™¯(æ–¹æ³•å°‘äº†äº›) ä½¿ç”¨ ç¬¬ä¸‰æ–¹åº“concurrent-map ï¼ˆshardingæ–¹å¼,æ›´é€‚åˆä»¥å†…å­˜æ•°æ®åº“æ–¹å¼ä½¿ç”¨ï¼‰  // åŠ é”çš„ç¤ºä¾‹, ä¿®æ”¹è‡ªSOçš„ä¸€ä¸ªä¾‹å­ // é”å¯ä»¥è¢«ä»»æ„è¯»æˆ–å”¯ä¸€çš„å†™åç¨‹æ‰€æŒæœ‰ var m = map[string]int{&amp;#34;a&amp;#34;: 1} var lock = sync.RWMutex{} func read() { lock.RLock() _ = m[&amp;#34;a&amp;#34;] lock.RUnlock() } func write() { lock.Lock() m[&amp;#34;b&amp;#34;] = 2 lock.Unlock() }</content>
    </entry>
    
     <entry>
        <title>å¼€æºæ¶ˆæ¯é˜Ÿåˆ—å®ç°</title>
        <url>/blog/mq/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>middleware</tag><tag>message</tag>
        </tags>
        <content type="html"> ç»å¸¸ä¼šé‡åˆ°ç³»ç»Ÿä¸­ä½¿ç”¨Message Queue/æ¶ˆæ¯é˜Ÿåˆ—çš„æƒ…å†µ, ä¸æ­¤ç±»ä¼¼çš„æ¨¡å‹è¿˜æœ‰ pubsub/å‘å¸ƒè®¢é˜…æ¨¡å¼(publisher/subscriber).
è¿™ä¸¤ç§æ¨¡å‹çš„å®ç°ä¹Ÿè¢«çœ‹åš æ¶ˆæ¯ä¸­é—´ä»¶/MOM(Message-Oriented Middleware),å› ä¸ºè¿™ç§ç»“æ„è§£è€¦äº†å‘é€ç«¯å’Œæ¥æ”¶ç«¯,ç®€åŒ–äº†æ¶æ„.
å¦å¤–å¸¸æçš„ä¸€ä¸ªæ¦‚å¿µæ˜¯Messaging Broker, æ›´å¤šçš„ç”¨äºæ¶ˆæ¯éªŒè¯,è½¬æ¢,è·¯ç”±.

ç°åœ¨æœ‰å¾ˆå¤šæµè¡Œçš„å¼€æºå®ç°, å¯¹äºæ¶ˆæ¯æœ‰å¸¸ç”¨çš„ä¸‰ç§æ ‡å‡†:
 AMQP: Advanced Message Queuing Protocol STOMP: Streaming Text Oriented Messaging Protocol MQTT/ MQ Telemetry Transport: è½»é‡çº§åè®®,IoTæ ‡å‡†  å…¶ä»–
 XMPP/Extensible Messaging and Presence Protocol: åŸºäºXMLçš„é€šè®¯åè®®  å‰ä¸¤ä¸ªåŸºäºHTTP, åä¸€ä¸ªåŸºäºTCP/IP.
 ä¸‹é¢æ˜¯ä¸€äº›å®ç°çš„æ¦‚è¦æè¿°, è¿™äº›å®ç°çš„æ¯”è¾ƒä¸å…¨åœ¨åŒä¸€çº¬åº¦, åªæ˜¯çœ‹é‚£ä¸ªæ›´é€‚åˆä½ çš„åº”ç”¨åœºæ™¯,è¯­è¨€ç»‘å®šç­‰.
å¼€æºå®ç°    åç§° è¯­è¨€ æ˜Ÿæ•° æè¿°     ActiveMQ Java 1.1 k ApacheåŸºé‡‘æ——ä¸‹, æ”¯æŒJMS   RabbitMQ Erlang 4.3k è²Œä¼¼MQç³»åˆ—çš„é¦–é€‰,æˆç†Ÿä¸”æ€§èƒ½é«˜   ZeroMQ C&#43;&#43; 4.4k    Celery Python 10k å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—,å¸¸ç”¨äºè€—æ—¶æ“ä½œçš„å¼‚æ­¥æ‰§è¡Œ   Redis C 30.3k æœ€æµè¡Œçš„å†…å­˜KVæ•°æ®åº“/ç¼“å­˜   Kafka Java/Scala 9k æ—©æœŸLinkedInå¼€æºäº§å“,åå½’äºApacheåŸºé‡‘. å¸¸ç”¨äºæ—¥å¿—å¤„ç†åˆ†æ   NATS Go 4.4k CNCFå­µåŒ–é¡¹ç›®   NSQ Go 12k é¡¹ç›®è¿‘æœŸå‘å¸ƒä¸æ´»è·ƒ    æ³¨: åªæ¥è§¦è¿‡Celery,Rediså’ŒKafka, MQç³»åˆ—æ²¡æœ‰ä½¿ç”¨ç»éªŒä¸åšè¿‡å¤šä»‹ç».
ç¤ºä¾‹ TBC&amp;hellip;
</content>
    </entry>
    
     <entry>
        <title>ç½‘ç»œåŸºç¡€</title>
        <url>/blog/network/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>network</tag>
        </tags>
        <content type="html"> å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´, ç½‘ç»œåŸºç¡€çŸ¥è¯†å¤‡å¿˜.

OSI 7å±‚æ¨¡å‹ OSI/å¼€æ”¾å¼ç³»ç»Ÿäº’è”é€šè®¯å‚è€ƒ
 7: åº”ç”¨å±‚: HTTP,FTP,Telnet, SSH, SMTP, POP3 6: è¡¨è¾¾å±‚ 5: ä¼šè¯å±‚ 4: ä¼ è¾“å±‚: TCP 3: ç½‘ç»œå±‚: IP 2: æ•°æ®é“¾è·¯å±‚: ä»¥å¤ªç½‘,WiFi,GPRS 1: ç‰©ç†å±‚ : æ•°æ®å¸§ä¼ è¾“,åŒ…æ‹¬ç½‘å¡,é›†çº¿å™¨,ä¸»æœºé€‚é…å™¨ç­‰  æ³¨: OSIå‚è€ƒæ¨¡å‹ä¸æ˜¯ä¸€ä¸ªæ ‡å‡†,ä¹Ÿæ²¡æœ‰æä¾›å®ç°æ–¹æ³•,è€Œä¸”æ¦‚å¿µæ€§æ¡†æ¶.
TCP/IPåè®®é›† äº’è”ç½‘åŸºç¡€åè®®, å¯ä»¥è¢«è®¤ä¸ºæ˜¯ç®€åŒ–ç‰ˆOSIæ¨¡å‹
 åº”ç”¨å±‚: HTTP, DNS ä¼ è¾“å±‚: TCP, UDP ç½‘ç»œäº’è¿å±‚(internet): IP  åŸºäºIPçš„é«˜å±‚åè®®  ICMP: IPå‘é€è¯Šæ–­ä¿¡æ¯ IGMP: ç®¡ç†å¤šæ’­æ•°æ®   ç½‘ç»œæ¥å£å±‚(link): ä»¥å¤ªç½‘ç­‰  æ¯ä¸ªåº”ç”¨å±‚åè®®ä¸€èˆ¬ä¼šä½¿ç”¨åˆ°ä¸¤ä¸ªä¼ è¾“å±‚åè®®ä¹‹ä¸€:
 é¢å‘è¿æ¥çš„TCPä¼ è¾“æ§åˆ¶åè®® æ— è¿æ¥çš„åŒ…ä¼ è¾“çš„UDPç”¨æˆ·æ•°æ®æŠ¥æ–‡åè®®  å¸¸ç”¨åè®®å½’ç±»
 è¿è¡ŒäºTCPåè®®ä¸Šçš„åè®®: HTTP/HTTPS/FTP/POP3/SMTP/TELNET/SSH è¿è¡ŒäºUDPåè®®ä¸Šçš„åè®®: BOOTP/NTP/DHCP è¿è¡ŒäºTCPå’ŒUDPçš„åè®®: DNS/ECHO å…¶ä»–åè®®: SNMP(ç®€å•ç½‘ç»œç®¡ç†åè®®)/ARP(åœ°å€è§£æåè®®)  DNS/åŸŸåç³»ç»Ÿ  åŸŸåå’ŒIPåœ°å€äº’ç›¸æ˜ å°„çš„åˆ†å¸ƒå¼æ•°æ®åº“. ä½¿ç”¨TCPå’ŒUDPçš„53ç«¯å£. æ¯çº§åŸŸåé•¿åº¦é™åˆ¶63,åŸŸåæ€»é•¿åº¦ä¸è¶…è¿‡253å­—ç¬¦.  è®°å½•ç±»å‹  ä¸»æœºè®°å½•/Aè®°å½•: å°†ç‰¹å®šçš„ä¸»æœºåæ˜ å°„åˆ°å¯¹åº”ä¸»æœºçš„IPåœ°å€ä¸Š åˆ«åè®°å½•/CNAMEè®°å½•: å°†æŸä¸ªåˆ«åæŒ‡å‘åˆ°Aè®°å½• IPv6ä¸»æœºè®°å½•/AAAAè®°å½•: ä¸Aè®°å½•å¯¹åº”, æ˜ å°„åˆ°IPv6åœ°å€ æœåŠ¡ä½ç½®è®°å½•/SRVè®°å½•: å®šä¹‰æä¾›ç‰¹å®šæœåŠ¡çš„æœåŠ¡å™¨ä½ç½®,å¦‚hostname,ç«¯å£ç­‰  å®ç° å…¨çƒæœ‰13ç»„,504ä¸ªæ ¹åŸŸåæœåŠ¡å™¨, ä¸ºå±‚æ¬¡ç»“æ„.
å¸¸ç”¨è½¯ä»¶å®ç°:
 BIND/Berkeley Internet Name Domain CoreDNS: Kubernetesé»˜è®¤çš„DNS Server  WHOIS/åŸŸåæ•°æ®åº“æŸ¥è¯¢
æ–°çš„è§„å®š,åŸŸåæœºæ„ä¸èƒ½è¿”å›æ³¨å†Œè€…éšç§ä¿¡æ¯.
NAT/ç½‘ç»œåœ°å€è½¬æ¢ IPæ•°æ®åŒ…é€šè¿‡è·¯ç”±å™¨/é˜²ç«å¢™æ—¶é‡å†™æ¥æº/ç›®çš„IPçš„æŠ€æœ¯.
é‡å†™æº/ç›®çš„IPå’Œç«¯å£.
è§£å†³çš„é—®é¢˜:
 å±€åŸŸç½‘ç¯å¢ƒåªæœ‰ä¸€ä¸ªå…¬ç½‘IP è´Ÿè½½å‡è¡¡: é‡å®šå‘åˆ°éšæœºæœåŠ¡å™¨ å¤±æ•ˆç»ˆæ: è½¬æ¢åˆ°å¤‡ç”¨æœåŠ¡å™¨,æé«˜å¯é æ€§ é€æ˜ä»£ç†: é‡å®šå‘åˆ°æŒ‡å®šHTTPä»£ç†ä»¥ç¼“å­˜æ•°æ®å’Œè¿‡æ»¤è¯·æ±‚  HTTP/HTTP2 åè®®
å®¢æˆ·ç«¯(ç”¨æˆ·)å’ŒæœåŠ¡å™¨ç«¯(ç½‘ç«™)è¯·æ±‚å’Œåº”ç­”æ ‡å‡†.
è¯·æ±‚æ–¹æ³• GET/HEAD/POST/PUT/DELETE/TRACE/OPTIONS/CONNECT/PATCH
HTTPæœåŠ¡å™¨è‡³å°‘åº”è¯¥å®ç°GETå’ŒHEADæ–¹æ³•.
ç‰ˆæœ¬  HTTP/1.1: 1999å¹´åˆ¶å®š. é»˜è®¤ä¿æŒè¿æ¥(Keep-Alive) HTTP/2: 2015å¹´å‘å¸ƒ, åŸºäºSPDY(Googleä¸»å¯¼çš„æ›¿ä»£HTTPçš„é¡¹ç›®,å·²è¢«HTTP2å–ä»£). ä¸»è¦ä¸ºæ€§èƒ½æ”¹è¿›, ä¸»æµæµè§ˆå™¨åªæ”¯æŒåŠ å¯†é€šè®¯(å³h2).  çŠ¶æ€ç  HTTPå“åº”çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯çŠ¶æ€è¡Œ, çŠ¶æ€ä»£ç æ˜¯3ä½æ•°å­—:
 1xxæ¶ˆæ¯â€”â€”è¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œç»§ç»­å¤„ç† 2xxæˆåŠŸâ€”â€”è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å— 3xxé‡å®šå‘â€”â€”éœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸€è¯·æ±‚ 4xxè¯·æ±‚é”™è¯¯â€”â€”è¯·æ±‚å«æœ‰è¯æ³•é”™è¯¯æˆ–è€…æ— æ³•è¢«æ‰§è¡Œ 5xxæœåŠ¡å™¨é”™è¯¯â€”â€”æœåŠ¡å™¨åœ¨å¤„ç†æŸä¸ªæ­£ç¡®è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯  ä¾‹å­ # è¯·æ±‚ä¿¡æ¯: # 1. è¯·æ±‚è¡Œ:æŒ‡å®šæ–¹æ³•ã€èµ„æºè·¯å¾„ã€åè®®ç‰ˆæœ¬ # 2. è¯·æ±‚å¤´(Hostæ˜¯å¿…é¡»é¡¹) GET / HTTP/1.1 Host: www.google.com # æœåŠ¡å™¨åº”ç­” HTTP/1.1 200 OK Content-Length: 3059 Server: GWS/2.0 Date: Sat, 11 Jan 2003 02:44:04 GMT Content-Type: text/html Cache-control: private Set-Cookie: PREF=ID=73d4aef52e57bae9:TM=1042253044:LM=1042253044:S=SMCc_HRPCQiqy X9j; expires=Sun, 17-Jan-2038 19:14:07 GMT; path=/; domain=.google.com Connection: keep-alive IP/å› ç‰¹ç½‘åè®® å­ç½‘æŒ‡å…·æœ‰ç›¸åŒçš„å‰åŠéƒ¨åˆ†åœ°å€çš„ä¸€ç»„ipåœ°å€.
å­ç½‘æ©ç /subnet mask ç›®çš„: ç”¨æ¥æŒ‡æ˜ä¸€ä¸ªIPåœ°å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„ç½‘ç»œåœ°å€ä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºåœ°å€çš„ä½æ©ç .
å¯ä»¥è¡¨ç¤ºä¸ºåŒåœ°å€ä¸€æ ·çš„å½¢å¼,ä¹Ÿå¯ä»¥ä½¿ç”¨æ›´ç®€çŸ­çš„CIDR/æ— ç±»åˆ«åŸŸé—´è·¯ç”±è¡¨ç¤ºæ³•.
æ¯”å¦‚ 192.0.2.96/28è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå‰28ä½è¢«ç”¨ä½œç½‘ç»œå·çš„IPåœ°å€ï¼ˆå’Œ255.255.255.240çš„æ„æ€ä¸€æ ·ï¼‰
IPv4å­ç½‘ IPv4åœ°å€åˆ†3ä¸ªéƒ¨åˆ†: ç½‘ç»œéƒ¨åˆ†,å­ç½‘éƒ¨åˆ†å’Œä¸»æœºéƒ¨åˆ†.
å…±æœ‰3ç±»IPåœ°å€,åˆ†åˆ«æŒ‡å®šå„éƒ¨åˆ†å å¤šå°‘ä½.
   ç±»åˆ« èµ·å§‹ä½ å¼€å§‹ ç»“æŸ ç‚¹åˆ†åè¿›åˆ¶æ©ç  CIDR     A 0 0.0.0.0 127.0.0.0 255.0.0.0 /8   B 10 128.0.0.0 191.255.0.0 255.255.0.0 /16   C 110 192.0.0.0 223.255.255.0 255.255.255.0 /24    Dockerç½‘ç»œ Docker ç½‘ç»œå®è´¨ä¸Šæ˜¯æ“çºµNetwork Namespace, ç½‘æ¡¥, è™šæ‹Ÿç½‘å¡åŠiptableså®ç°çš„.
OVS (Open vSwitch): å¼€æºè™šæ‹Ÿäº¤æ¢æœº
ip netns ç®¡ç†Network Namespace ip link ç®¡ç†layer2ç½‘ç»œ ip addr ç®¡ç†layer3ç½‘ç»œ sudo apt install bridge-utils brctl show # å†…æ ¸IPè·¯ç”±è¡¨ route -n è½¯ä»¶å®šä¹‰ç½‘ç»œ flannel: è™šæ‹Ÿç½‘ç»œ,ç»™æ¯å°ä¸»æœºåˆ’åˆ†ä¸€ä¸ªå­ç½‘ç”¨äºå®¹å™¨è¿è¡Œæ—¶
</content>
    </entry>
    
     <entry>
        <title>Kuberneteså’Œäº‘åŸç”Ÿè®¡ç®—</title>
        <url>/blog/cloud-native/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>cloud</tag>
        </tags>
        <content type="html"> æœ€æ—©æ³¨æ„åˆ°äº‘åŸç”Ÿè¿™ä¸ªæ¦‚å¿µæ˜¯æŸæ¬¡çœ‹æ–‡ç« è¯´Kubernetesæ˜¯ä½œä¸ºCNCF(äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼š)çš„ä¸»è¦é¡¹ç›®æ¥å¼€å‘çš„,è¯¥åŸºé‡‘ä¼šå±äºLinuxåŸºé‡‘ä¼šæ——ä¸‹,è¿˜åŒ…æ‹¬è¢«ç†ŸçŸ¥çš„prometheus,istioç­‰å¼€æºé¡¹ç›®, ä¼¼ä¹å¯ä»¥ç†è§£ä¸ºKubernetesç”Ÿæ€ç³»ç»Ÿ.
è‡³æ­¤KubernetesæŠŠå¾®æœåŠ¡,åäºŒè¦ç´ ,æœåŠ¡ç½‘æ ¼/Service Meshç­‰ä¸²è”äº†èµ·æ¥, ç¬¦åˆè¿™äº›æ¦‚å¿µçš„åº”ç”¨æ¶æ„å°±æ˜¯äº‘åŸç”Ÿåº”ç”¨.

äº‘åŸç”Ÿè®¡ç®— æåˆ°äº‘è®¡ç®—,ç°åœ¨ä¸»æµçš„åˆ†ç±»åŠä»£è¡¨æ˜¯:
 IaaS/åŸºç¡€è®¾æ–½:AWS,OpenStack PaaS/å¹³å°: Heroku, Cloud Foundry SaaS/è½¯ä»¶,åº”ç”¨:  ä»äº‘è®¡ç®—çš„è§’åº¦çœ‹, äº‘åŸç”Ÿè®¡ç®—å¯è¢«çœ‹åšæ˜¯æœ€æ–°å‘å±•é˜¶æ®µ.äº‘åŸç”Ÿ/Cloud Nativeçš„ä»£è¡¨æŠ€æœ¯:
 å®¹å™¨ æœåŠ¡ç½‘æ ¼ å¾®æœåŠ¡ ä¸å¯å˜åŸºç¡€è®¾æ–½ å£°æ˜å¼API  ç›¸æ¯”ä¼ ç»Ÿåº”ç”¨æ¶æ„, äº‘åŸç”Ÿå…·å¤‡çš„ä¼˜åŠ¿æ˜¯:
 æ•æ· å¯é  é«˜å¼¹æ€§ æ˜“æ‰©å±• æ•…éšœéš”ç¦»ä¿æŠ¤ ä¸ä¸­æ–­ä¸šåŠ¡æŒç»­æ›´æ–°  æŠ€æœ¯åœˆçš„é€ è¯è¿åŠ¨æ²¡æœ‰åœæ­¢è¿‡, ä¸‹é¢é¡ºä¾¿å­¦ä¹ ä¸‹è¿™ä¸¤ä¸ªæ–°è¯:
 Serverless/æ— æœåŠ¡å™¨æŠ€æœ¯: ä¹Ÿä¸ç®—æ–°æ¦‚å¿µ,è¿™é‡Œå¹¶ä¸æ˜¯çœŸçš„ä¸éœ€è¦åç«¯æœåŠ¡å™¨,è€Œæ˜¯åç«¯æœåŠ¡ä»¥æœåŠ¡çš„å½¢å¼æä¾›,æˆ–è¢«ç§°ä¸ºBackend-as-a-Service/BaaS,é€šå¸¸ç®€åŒ–ç§»åŠ¨ç«¯å¼€å‘éƒ¨ç½²çš„æˆæœ¬,å‰å‡ å¹´æœ€æˆåŠŸçš„ä»£è¡¨Parseè¢«Facebookæ”¶è´­åå¾ˆå¿«å…³é—­æœåŠ¡,BaaSä¹Ÿéšä¹‹ä¸è¢«æåŠ. è¿™ä¸¤å¹´éšç€Amazon LambdaæœåŠ¡çš„ç«çƒ­, ServerLessåˆè¢«æèµ·,åŒæ—¶é€ äº†ä¸ªæ–°è¯:FaaS/Function-as-a-Service, è¿™å¯èƒ½æ˜¯äº‘æœåŠ¡å¹³å°ä¹äºæ¨å¹¿çš„,ä¸è¿‡ç°åœ¨çœ‹æ¥,åº”ç”¨åœºæ™¯ä¼¼ä¹æ¯”è¾ƒå—é™.  æ‰©å±•é˜…è¯»  CNCFå®˜ç½‘ äº‘åŸç”Ÿæ¦‚è§ˆ äº‘åŸç”Ÿè¯¦è§£ äº‘åŸç”Ÿè¯­è¨€:Pulumi </content>
    </entry>
    
     <entry>
        <title>ç§æœ‰Dockerä»“åº“Harbor</title>
        <url>/blog/harbor/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>docker</tag><tag>ops</tag>
        </tags>
        <content type="html">  æåˆ°ç§æœ‰å®¹å™¨ä»“åº“,VMWareå‡ºå“çš„å¼€æºHarborç®—æ˜¯é¦–é€‰.
å®‰è£…å’Œé…ç½®ç…§å®˜æ–¹æ–‡æ¡£æ¥å¾ˆç®€å•,ä»Šå¤©åœ¨å°è¯•pushé•œåƒæ—¶é‡åˆ°äº†å¦‚ä¸‹é”™è¯¯: &amp;ldquo;Get https://yourdomain.com/v2/: Service Unavailable&amp;rdquo;, æ£€æŸ¥ä¹‹ä¸‹å‘ç°æ˜¯æ²¡æœ‰é…ç½®httpså¼•èµ·.
 é…ç½®https è™½ç„¶å¯ä»¥ç»™dockerå¸¸é©»è¿›ç¨‹æ·»åŠ &amp;ndash;insecure-registry è¿™ä¸ªå‚æ•°è€Œæ”¹ç”¨é»˜è®¤çš„httpåè®®(éœ€è¦é‡å¯docker), ä½†è¯¥å‚æ•°ä¼šä½¿æœ¬æœºæ‰€æœ‰çš„æ³¨å†ŒæœåŠ¡éƒ½ä¸å†å®‰å…¨, æåŠ›ä¸æ¨èè¿™ä¹ˆåš.
é…ç½®httpsçš„æ­¥éª¤å…¶å®ä¸å¤æ‚,è®°å½•å¦‚ä¸‹:
å…ˆä½¿ç”¨mkcertç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥, è¯¥å·¥å…·è§ä¸Šç¯‡è¯ä¹¦ä¸€æ–‡ æ³¨: mkcertçš„æ–¹å¼å¯¹docker/k8sä¼šäº§ç”Ÿé—®é¢˜, æ”¹ç”¨å®˜æ–¹è¯ä¹¦ç”Ÿæˆæ–¹å¼
# åˆ›å»ºCAè¯ä¹¦ openssl req -newkey rsa:4096 -nodes -sha256 -keyout ca.key -x509 -days 365 -out ca.crt # ç”ŸæˆCSR openssl req -newkey rsa:4096 -nodes -sha256 -keyout yourdomain.com.key -out yourdomain.com.csr # ç”ŸæˆåŸŸåè¯ä¹¦ penssl x509 -req -days 365 -in yourdomain.com.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out yourdomain.com.crt # å¤åˆ¶è¯ä¹¦åˆ°æœåŠ¡å™¨ ssh yourdomain.com &amp;#34;mkdir -p /data/cert&amp;#34; scp yourdomain.com*.pem yourdomain.com:/data/cert vi ~/harbor/harbor.cfg ç¼–è¾‘å¦‚ä¸‹å†…å®¹:
hostname = yourdomain.com ui_url_protocol = https ssl_cert = /data/cert/yourdomain.com.crt ssl_cert_key = /data/cert/yourdomain.com.key ä¹‹åé‡å¯harboræœåŠ¡:
./prepare docker-compose down docker-compose up -d é…ç½®dockerå®¢æˆ·ç«¯è¿›ç¨‹https è§£å†³é”™è¯¯:&amp;ldquo;Error response from daemon: Get v1/_ping: x509: certificate signed by unknown authority&amp;rdquo;
cd /etc/docker/certs.d/yourdomain.com # å¤åˆ¶ä¸Šä¸€èŠ‚ç”Ÿæˆçš„ca.crtåˆ°æ­¤  # äº§ç”Ÿå®¢æˆ·ç«¯è¯ä¹¦ openssl genrsa -out client.key 4096 openssl req -new -x509 -text -key client.key -out client.cert æœ€ç»ˆç›®å½•ç»“æ„å¦‚ä¸‹: tree /etc/docker/certs.d/yourdomain.com
. â”œâ”€â”€ ca.crt â”œâ”€â”€ client.cert â””â”€â”€ client.key Ubuntuå¯èƒ½éœ€è¦æ›´æ–°ç³»ç»Ÿè¯ä¹¦:
cp youdomain.com.crt /usr/local/share/ca-certificates/ update-ca-certificates ä¸ºkubernetesèŠ‚ç‚¹è®¾ç½®éªŒè¯ # åœ¨å…¶ä¸­ä¸€å°èŠ‚ç‚¹ç™»å½•ç§æœ‰ä»“åº“ docker login reg.server # ä¼šæ›´æ–°$HOME/.docker/config.json  # å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹ nodes=$(kubectl get nodes -o jsonpath=&amp;#39;{range.items[*].metadata}{.name} {end}&amp;#39;) for n in $nodes; do scp ~/.docker/config.json root@$n:/root/.docker/config.json; done å¤‡æ³¨ Web UI é»˜è®¤ç”¨æˆ·å/å¯†ç : admin/Harbor12345
æ¨é€æœ¬åœ°é•œåƒåˆ°è¯¥ä»“åº“ docker login yourdomain.com docker tag myimg:mytag yourdomain.com/pt/myimg:mytag docker push yourdomain.com/myproject/myimg:mytag Docker Notary Harborå¯ä»¥å’ŒNotaryç»“åˆ, Notaryæ˜¯ä¸€ä¸ªå†…å®¹æ•°å­—ç­¾åæœåŠ¡,ä¿è¯åˆ†å‘çš„å†…å®¹/é•œåƒå¯ä¿¡.
èµ„æº  å®˜ç½‘ å®‰è£…é…ç½®å‘å¯¼ httpsé…ç½®å‘å¯¼ k8sé•œåƒæ–‡æ¡£  </content>
    </entry>
    
     <entry>
        <title>è¯ä¹¦é‚£äº›äº‹</title>
        <url>/blog/cert/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>crypto</tag><tag>networking</tag>
        </tags>
        <content type="html"> æ–­æ–­ç»­ç»­æ¥è§¦è¿‡åŠ å¯†é€šè®¯çš„ä¸€äº›åœºæ™¯, éšç€è¿‘ä¸¤å¹´å®‰å…¨çš„æ™®åŠ,å»ºç«™ä½¿ç”¨httpsä¹Ÿæˆä¸ºæ ‡é….
è¿™ç¯‡æ–‡ç« è¯•å›¾æ±‡æ€»ä¸‹è¯ä¹¦è¿™å—çš„çŸ¥è¯†æçº².

åŸºæœ¬æ¦‚å¿µ è®¤è¯å’Œé‰´æƒ ç»å¸¸å®¹æ˜“æ··æ·†çš„ä¸¤ä¸ªæ¦‚å¿µ.
 Authentication: éªŒè¯ä½ æ˜¯ä½ æ‰€è¯´çš„äºº,å³é€šè®¯ä¸­æŸç«¯çš„èº«ä»½è¯†åˆ«æœºåˆ¶. é€šå¸¸ç”¨äºè®¿é—®æ§åˆ¶ Authorization: éªŒè¯ä½ è¢«è®¸å¯ä½ æ­£åœ¨è¯•å›¾åšçš„äº‹. ç”¨äºç”¨æˆ·è¯†åˆ«è®¿é—®æƒé™  å®¢æˆ·ç«¯è¯ä¹¦ é€šå¸¸ç”¨æˆ·å®¢æˆ·ç«¯/ç”¨æˆ·èº«ä»½è¯†åˆ«.
Client Certificate Authenticationâ€¯ç”¨äºç›¸äº’çš„è®¤è¯æœºåˆ¶.
æœåŠ¡ç«¯è¯ä¹¦ é€šå¸¸ç”¨äºåŠ è§£å¯†å†…å®¹.
åŒºåˆ†å®¢æˆ·ç«¯/æœåŠ¡ç«¯è¯ä¹¦å¯ä»¥é€šè¿‡æŸ¥çœ‹&amp;rdquo;Enhanced Key Usage&amp;rdquo;å­—æ®µ.
è¯ä¹¦åº”ç”¨ é€šå¸¸ç”¨äºè®¤è¯/éšç§/åŠ å¯†/æ•°å­—ç­¾å.
å¸¸è§æ•°å­—è¯ä¹¦ç±»å‹  Certificate Signing Request (.csr) Base64ç¼–ç çš„X.509è¯ä¹¦ (.cer/.crt) (ç”¨äºå¯¼å‡º) DERç¼–ç çš„äºŒè¿›åˆ¶X.509è¯ä¹¦(.cer/.der/.crt) åŠ å¯†æ¶ˆæ¯è¯­æ³•æ ‡å‡† (PKCS#7) è¯ä¹¦ (.p7b/.p7r/.spc) ä¸ªäººä¿¡æ¯äº¤æ¢æ ¼å¼ (PKCS#12) è¯ä¹¦ (.pfx/.p12)/ Java Keystore (JKS) Privacy-enhanced Electronic Mail (.pem) (Base64ç¼–ç æ”¹è¿›ç‰ˆ,OpenSSLæ‰€ä½¿ç”¨)  PKCS#12 è¯ä¹¦ç”¨äºå®¢æˆ·ç«¯, æ˜¯å”¯ä¸€å¯ä»¥è¢«å¯¼å‡ºè¯ä¹¦å’Œç§é’¥çš„æ–‡ä»¶æ ¼å¼.
.pemæ ¼å¼å¯ä»¥åœ¨ä¸€ä¸ªæ–‡ä»¶åŒ…å«ä¸‹é¢ä¸€ç§/å…¨éƒ¨çš„ä¿¡æ¯:
 Issued Public Certificate (Client/Server) Intermediate CA Certificate Root CA certificate Private Key(.key) (Linux or Java) Certificate Revocation List (.crl extension) (CRL Distribution Points) Certificate Trust List (.stl)  # è½¬æ¢pemæ ¼å¼åˆ°crtæ ¼å¼ openssl x509 -outform der -in ca.pem -out ca.crt SSLå•å‘è®¤è¯å’ŒSSLåŒå‘è®¤è¯  SSLå•å‘è®¤è¯åªè¦æ±‚ç«™ç‚¹éƒ¨ç½²äº†sslè¯ä¹¦å°±è¡Œï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥å»è®¿é—®(IPè¢«é™åˆ¶é™¤å¤–ç­‰)ï¼Œåªæ˜¯æœåŠ¡ç«¯æä¾›äº†èº«ä»½è®¤è¯ã€‚ä¸€èˆ¬Webåº”ç”¨éƒ½æ˜¯é‡‡ç”¨SSLå•å‘è®¤è¯çš„ åŒå‘è®¤è¯åˆ™æ˜¯éœ€è¦æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯æä¾›èº«ä»½è®¤è¯ï¼Œåªèƒ½æ˜¯æœåŠ¡ç«¯å…è®¸çš„å®¢æˆ·èƒ½å»è®¿é—®ï¼Œå®‰å…¨æ€§ç›¸å¯¹äºè¦é«˜ä¸€äº›ã€‚  é€šé…ç¬¦è¯ä¹¦/Wild Card Certificates åœ¨hoståŒ…å«*æ¥åŒ¹é…å¤šä¸ªå­åŸŸå, ä½†*åªå¯ä»¥åŒ¹é…ä¸€çº§å­åŸŸå.
SAN/Subject Alternative Nameä¹Ÿå¯ä»¥åŒ…å«é€šé…ç¬¦ä¸»æœºå.
è¯ä¹¦ä½“ç³» CAå«æƒå¨çš„ç¬¬ä¸‰æ–¹å…¬å¼€è¯ä¹¦è®¤è¯æœºæ„å’Œå†…éƒ¨è®¤è¯æœºæ„(Enterprise CA).
Root CA/æ ¹è¯ä¹¦æœºæ„ æƒå¨çš„æ ¹è¯ä¹¦æœºæ„, ä¸ä¸­é—´è¯ä¹¦æœºæ„çš„åŒºåˆ«:
 Issued to å’ŒIssued byæ˜¯åŒä¸€æœºæ„. Certification Pathä½äºé¡¶çº§  æœ¬èº«æ˜¯è‡ªç­¾è¯ä¹¦.
Intermediate CA/ä¸­é—´è¯ä¹¦æœºæ„ ä½œä¸ºPKIä½“ç³»çš„ä¸€éƒ¨åˆ†,ä½¿è¯ä¹¦ç»“æ„å¯æ‰©å±•. Root CA æŠŠä»»åŠ¡ä»£ç†ç»™Intermediate CA.
è‡ªç­¾è¯ä¹¦ é¡¾åæ€ä¹‰, Issued to å’ŒIssued by æ˜¯åŒä¸€æœºæ„/äºº. é€šå¸¸ç”¨æˆ·éç”Ÿäº§ç¯å¢ƒ.
æµè§ˆå™¨ä¼šæ˜¾ç¤ºè­¦å‘Šä¸ºä¸å¯ä¿¡ä»», å› ä¸ºä¸è¢«å…¬å…±çš„æ ¹è¯ä¹¦æœºæ„è®¤å¯.
è¯ä¹¦å®æˆ˜ mkcert æœ€ç®€å•çš„ç”Ÿæˆè¯ä¹¦æ–¹å¼, å¯ç”¨äºå¼€å‘æµ‹è¯•ç¯å¢ƒ
mkcert -install mkcert example.com &amp;#39;*.example.org&amp;#39; 127.0.0.1 opensslä½¿ç”¨ # Ubuntuç”Ÿæˆè‡ªç­¾åæœåŠ¡ç«¯è¯ä¹¦å’Œç§é’¥ openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /home/xulz/certs/server.key -out /home/xulz/certs/server.crt # ç”Ÿæˆè¯ä¹¦å’Œå¯†é’¥åˆ°ä¸€ä¸ªæ–‡ä»¶ openssl req -x509 -nodes -days 365 -new -keyout /home/xulz/certs/mail.pem -out /home/xulz/certs/mail.pem #keyå’Œcertåˆ†å¼€åˆ›å»º openssl genrsa 2048 -out key.pem openssl req -x509 -nodes -days 365 -new -key key.pem -out cert.pem# å…¶ä»–å‘½ä»¤ç¤ºä¾‹ # äº§ç”Ÿç§é’¥ openssl genrsa -aes256 4096 -out key.pem # äº§ç”Ÿä¸è¢«å¯†ç ä¿æŠ¤çš„å¯†é’¥ openssl genrsa 4096 -out key.pem # ä½¿ç”¨æ–°ç‰ˆgenpkeyå‘½ä»¤ openssl genpkey -algorithm RSA -out key.pem -aes-256-cbc -pkeyopt rsa_keygen_bits:4096 # æ”¹ç”¨æ›´å¼ºç®—æ³•åŠ å¯† openssl pkcs12 -in weak.p12 -nodes -out decrypted.pem openssl pkcs12 -export -in decrypted.pem -keypbe AES-128-CBC -certpbe AES-128-CBC -out strong.p12 openssl reqå‘½ä»¤è¡Œå‚æ•°
 -new new request. -out arg output file -nodes don&amp;rsquo;t encrypt the output key -x509 output a x509 structure instead of a cert. req. -days number of days a certificate generated by -x509 is valid for. -keyout arg file to send the key to -key file use the private key contained in file   openssl genpkey [-out filename] [-outform PEM|DER] [-pass arg] [-cipher] [-engine id] [-paramfile file] [-algorithm alg] [-pkeyopt opt:value] [-genparam] [-text]
openssl genrsa [-out filename] [-passout arg] [-des] [-des3] [-idea] [-f4] [-3] [-rand file(s)] [-engine id] [numbits]
 keytool Linux/Macä¸­OpenSSLçš„è¯ä¹¦å’Œå¯†é’¥ç®¡ç†å·¥å…·
# äº§ç”Ÿå¯†é’¥å¯¹ keytool -genkeypair -alias test123 -keystore test123.pfx -storepass test123 -validity 365 - keyalg RSA -keysize 2048 -storetype pkcs12 Misc å·¥å…·  testssl.sh: å¼ºå¤§å‹å¥½çš„SSLè¯ä¹¦æµ‹è¯•å‘½ä»¤è¡Œå·¥å…· certbot mkcert Windowsè¯ä¹¦ç®¡ç†: certmgr.msc  åè¯ç¼©å†™    ç¼©å†™ å…¨å æ³¨é‡Š     CA Certificate Authority    SSL Secure Socket Layer clientå’ŒserveråŠ å¯†é€šè®¯åè®®   TLS Transport Layer Security SSLç»§æ‰¿è€…,åº”ç”¨å±‚åè®®   PKCS Public Key Cryptography Standard    DER Distinguished Encoding Rules     æ‰©å±•é˜…è¯»  Unleashed JavaåŠ å¯† </content>
    </entry>
    
     <entry>
        <title>pythonæµè¡Œåº“/æ¡†æ¶æ±‡æ€»</title>
        <url>/blog/python-lib/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>python</tag>
        </tags>
        <content type="html"> ä½œä¸ºä¸€ä¸ªPythonç²‰,ä¸€ç›´åœ¨å„ç§åœºåˆä½¿ç”¨è¿™ä¸ªè¯­è¨€,æœ€è¿‘ä¹Ÿåœ¨è¯•å›¾ä»Python2å½»åº•åˆ‡æ¢åˆ°Python3.
å¦‚æœè¯´ç¼ºç‚¹çš„è¯,ä¹Ÿåªæœ‰å¯¹å®ƒçš„æ€§èƒ½æœ‰æ‰€æŠ±æ€¨(GIL),ä¸èƒ½ä½¿ç”¨å¤šæ ¸CPU.
è¿™ç¯‡ä¸»è¦è®°å½•ä½¿ç”¨è¿‡å’Œéƒ¨åˆ†markè¿‡çš„åº“/æ¡†æ¶,å…¶ä»–æ£€ç´¢çš„è¯å¯ä»¥ä½¿ç”¨awesome-python.

æ³¨: å…·ä½“ç±»åˆ«ä»¥ä¸ªäººå–œå¥½æ’åº
å¼€å‘ç±» å¿…å¤‡  Requests :ç”¨çš„æœ€ä¹…å’Œæœ€å¤šçš„åº“  Webå¼€å‘  Flask :è½»é‡çº§å¾®æ¡†æ¶ Django :å…¨æ ˆæ¡†æ¶ Pyramid :æƒ³ç”¨å´æ²¡å¤ªå¤šå®æˆ˜  Flaskç›¸å…³  Flask-SQLAlchemy  RESTæœåŠ¡  Eve: åŸºäºFlaskçš„çµæ´»RESTfulæœåŠ¡ Django REST framework Falcon: é«˜æ€§èƒ½å¾®æœåŠ¡æ¡†æ¶  æ•°æ®åº“  peewee : è½»é‡çº§ORM SQLAlchemy : æ ‡é…ORM  Driver/é©±åŠ¨  PyMySQL : çº¯pythonå®ç°çš„MySQLå®¢æˆ·ç«¯ psycopg2: æœ€å¸¸ç”¨PostgreSQLå®¢æˆ·ç«¯ asyncpg: æ”¯æŒasyncioçš„PostgreSQLå®¢æˆ·ç«¯ cx_Oracle: Oracleå®¢æˆ·ç«¯  I/O å¤šçº¿ç¨‹  Curio : åç¨‹åº“,aysncioçš„å…¶ä»–ç‰ˆæœ¬  åŠŸèƒ½å¢å¼º  schedule: ç±»ä¼¼cronçš„ä»»åŠ¡å®‰æ’ ElastAlert : Elasticsearchæé†’ Celery : å¼‚æ­¥æ¶ˆæ¯/ä»»åŠ¡é˜Ÿåˆ— rq: ç²¾ç®€ç‰ˆä»»åŠ¡é˜Ÿåˆ—,åŸºäºRedis  å›¾åƒå¤„ç†  Pillow  åŠ å¯†  cryptography  ç½‘ç»œæŠ“å–  Scrapy/Portia webå‰ç«¯ pyspider  è¯­è¨€è§„èŒƒ  YAPF : æ ¼å¼åŒ–åŠè§„èŒƒ å¸¸ç”¨è®¾è®¡æ¨¡å¼  å®¢æˆ·ç«¯  Click: å‘½ä»¤è¡Œå·¥å…· PyInstaller : å®‰è£…æ‰“åŒ… Kivy: è·¨å¹³å°/æ‰‹æœºäº§å“åŸå‹è®¾è®¡  è¿ç»´ç›¸å…³ ç”Ÿäº§éƒ¨ç½²  Gunicorn : WSGI HTTP Server  è‡ªåŠ¨åŒ–/è¿ç»´  Fabric : è½»é‡éƒ¨ç½² Ansible Boto 3: AWSè¿ç»´  ç›‘æ§  psutil:è¿›ç¨‹å’Œç³»ç»Ÿç›‘æ§ psdash: åŸºäºpsutilå’Œflaskçš„webç«¯  æµ‹è¯• æµ‹è¯•åº“/æ¡†æ¶  pytest : åŸºç¡€æµ‹è¯•æ¡†æ¶ Faker : å‡æ•°æ®ç”Ÿæˆ æ˜“å‡ºé”™è¾“å…¥å­—ç¬¦é›† PyAutoGUI: GUIè‡ªåŠ¨åŒ–,æ“ä½œé¼ æ ‡/é”®ç›˜  æ€§èƒ½æµ‹è¯•  Locust  æ•°æ®ç§‘å­¦ æ•°æ®å¤„ç†  pandas openpyxl : Excelæ“ä½œ q: åœ¨csvä¸Šè¿è¡ŒSQL  å¯è§†åŒ–  Matplotlib : æœ€æ—©æ¥è§¦çš„ç»˜å›¾åº“ Bokeh : äº¤äº’å¼å¯è§†åŒ–  å·¥å…·  HTTPie : å¢å¼ºæ˜“ç”¨ç‰ˆcurl httpbin/å®˜æ–¹ç«™ : è¯·æ±‚/å“åº”æœåŠ¡,å­¦ä¹ HTTPåè®®
 cookiecutter:é¡¹ç›®å¼€å‘æ¨¡æ¿
  æ‰©å±•é˜…è¯»  awesome-python </content>
    </entry>
    
     <entry>
        <title>Fabricè‡ªåŠ¨åŒ–éƒ¨ç½²</title>
        <url>/blog/fabric/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>automation</tag><tag>python</tag>
        </tags>
        <content type="html"> Fabricæ¯”è¾ƒè½»é‡çº§,å¹³æ—¶åœ¨éƒ¨ç½²å¤šä¸ªæœåŠ¡å™¨æ—¶ç»å¸¸ç”¨åˆ°.
ä»Šå¹´ä½œè€…å‘å¸ƒäº†ä¸å‘åå…¼å®¹çš„Fabric2, ç”±äºåŸæœ‰çš„è„šæœ¬æ”¹åŠ¨å¤ªå¤š,æš‚æ—¶è¿˜æ²¡æœ‰è¿ç§».
[2018.12æ›´æ–°]
Fabric2ç°åœ¨çœ‹æ¥æ˜¯ä¸ªé”™è¯¯é€‰æ‹©, Fabric v1ä¸æ”¯æŒPython3,è€ŒFabric2ä»å­˜åœ¨å¤§é‡bugå’Œæœªå®ç°åŠŸèƒ½,ä»å®ç”¨çš„è§’åº¦çœ‹v2åŸºæœ¬ä¸å¯ç”¨.
åœ¨ä¸»æµå·²ç»ä½¿ç”¨Python3çš„æƒ…å†µä¸‹,è¿™æ„å‘³ç€Fabricæ¯«æ— è¿ç§»å¿…è¦.
ç®—äº†ä¸æŠ˜è…¾äº†,ç›´æ¥ä¸ŠAnsibleå§.

Fabric2 # å¦‚æœè¦åŒæ—¶å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬,å»ºè®®ä½¿ç”¨ä¸‹é¢æ–¹å¼å®‰è£…æ–°ç‰ˆæœ¬ pip install fabric2 TODO
Fabric v1 å› ä¸ºé»˜è®¤ä¼šå®‰è£…æ–°ç‰ˆv2,éœ€è¦æŒ‡å®šå…·ä½“çš„ç‰ˆæœ¬å·
pip install Fabric==1.14.1 Q: å¦‚æœé‡åˆ°é”™è¯¯: CTR mode needs counter parameter, not IV
A: éœ€è¦å‡çº§paramikoåº“ &amp;gt; sudo pip install -U paramiko
fabå‘½ä»¤è¡Œ  -u User : ä»¥è¯¥ç”¨æˆ·è¿œç¨‹ç™»å½• -R ROLES : ä»¥è¯¥è§’è‰²æ‰§è¡Œä»»åŠ¡ -l : åˆ—å‡ºå¯æ‰§è¡Œä»»åŠ¡ -P : åˆ‡æ¢ä¸ºå¹¶è¡Œæ‰§è¡Œ -H : ç”¨,åˆ†å‰²çš„è¿œç¨‹ä¸»æœºåˆ—è¡¨ -f PATH : åŠ è½½pythonæ¨¡å—  # æ‰§è¡Œå‚æ•°åŒ–ä»»åŠ¡ fab mytask:arg1,arg2 fabfile.pyçš„å†™æ³• å¸¸ç”¨æ¥å£ from fabric.api import * run(&amp;#39;pwd&amp;#39;) # å¿½ç•¥é”™è¯¯ with settings(warn_only=True): sudo(&amp;#39;cat /etc/passwd&amp;#39;) æ–‡ä»¶æ“ä½œ from fabric.operations import put,get from fabric.contrib import files put(&amp;#39;/home/xulz/test1.txt&amp;#39;, &amp;#39;/home/ubuntu/tmp/&amp;#39;) get(&amp;#39;/home/ubuntu/remote.txt&amp;#39;,&amp;#39;/home/xulz/tmp/&amp;#39;) files.append(&amp;#34;/home/xulz/test.txt&amp;#34;, &amp;#34;new line&amp;#34;) çµæ´»è°ƒç”¨ from fabric.api import execute from fabric.api import env env.user = &amp;#39;xulz&amp;#39; env.roledefs = { &amp;#39;db&amp;#39;: { &amp;#39;hosts&amp;#39;: [&amp;#39;192.168.1.1&amp;#39;] } } @roles(&amp;#39;db&amp;#39;) def my_func(arg1,arg2) pass def my_task(): execute(my_func,arg1,arg2) å…¶ä»– from fabric.colors import red, green èµ„æº  å®˜ç½‘ </content>
    </entry>
    
     <entry>
        <title>Vimå¿…çŸ¥å¿…ä¼š</title>
        <url>/blog/vim/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>tools</tag><tag>linux</tag>
        </tags>
        <content type="html"> VI/VIMä½œä¸ºNixç¯å¢ƒçš„å¸¸ç”¨ç¼–è¾‘å™¨,æœ‰ä¸€äº›å¸¸ç”¨å‘½ä»¤/ç”¨æ³•.
ç”±äºå¹³æ—¶ç”¨VSCode/SublimeTextæ¯”è¾ƒå¤š,ä»¥è‡³äºåˆ‡æ¢åˆ°viç»å¸¸éœ€è¦æŸ¥é˜…,ç‰¹è®°å½•ä¸æ­¤.

å‘½ä»¤è¡Œç”¨æ³• # ä»¥åªè¯»æ–¹å¼æ‰“å¼€ vi -R filename # ä»æŸè¡Œæ‰“å¼€ vi &#43;linenumber file.py #ä¿®æ”¹å½“å‰è·¯å¾„ gvim -c &amp;#34;cd ~/workspace&amp;#34; å¯¼èˆª  åˆ‡æ¢Tab: Ngt (Næ˜¯é¡µç ) è·³è½¬åˆ°æŸè¡Œ ï¼šNGæˆ–Nggæˆ–:N (Nä»£è¡¨è¡Œæ•°)  å¸¸ç”¨å¿«æ·é”®    å¿«æ·é”® è¯´æ˜     zz ç§»åŠ¨å½“å‰è¡Œåˆ°å±å¹•ä¸­é—´   zt ç§»åŠ¨å½“å‰è¡Œåˆ°å±å¹•é¡¶éƒ¨   zb ç§»åŠ¨å½“å‰è¡Œåˆ°å±å¹•åº•éƒ¨   Ctrl-y ä¸Šç§»å±å¹•ä¸€è¡Œ, åª   Ctrl-e ä¸‹ç§»å±å¹•ä¸€è¡Œ   Ctrl-u å‘ä¸Šç§»åŠ¨å…‰æ ‡å±å¹•1/2é¡µé¢   Ctrl-d å‘ä¸Šç§»åŠ¨å…‰æ ‡å±å¹•1/2é¡µé¢   Ctrl-b å‘å‰ç¿»é¡µ,å…‰æ ‡ç§»åˆ°æœ€åä¸€è¡Œ   Ctrl-f å‘åç¿»é¡µ,å…‰æ ‡ç§»åˆ°ç¬¬ä¸€è¡Œ   Ctrl&#43;C æˆ– Ctrl&#43;[ Esc     &amp;lsquo;zt&amp;rsquo;, &amp;lsquo;zz&amp;rsquo; å’Œ &amp;lsquo;zb&amp;rsquo; ä¼šä¿æŒå½“å‰å…‰æ ‡ä½ç½®, ä½†ç§»åŠ¨è§†é‡ä½¿å…¶åœ¨å±å¹•çš„&amp;rsquo;t&amp;rsquo;op, &amp;lsquo;z&amp;rsquo; center, æˆ– &amp;lsquo;b&amp;rsquo;ottom ä½ç½®.
&amp;lsquo;H&amp;rsquo;ighest, &amp;rsquo;M&amp;rsquo;iddle, &amp;lsquo;L&amp;rsquo;ower å±å¹•è¡Œ
 è®¾ç½®å‘½ä»¤ # æ‰§è¡Œå‘½ä»¤ !! ç­‰åŒäº :.! æˆ–Ctrl-z &#43; fg #æ˜¾ç¤ºè¡Œå·/è‡ªåŠ¨ç¼©è¿›/å¿½ç•¥å¤§å°å†™/æ˜¾ç¤ºç»“æŸè¡Œå’Œtabæ ‡è¯†/æ˜¾ç¤ºæ¢è¡Œç¬¦ :set number/ai/ic/list/wm # å…³é—­æ˜¾ç¤º set nu! :set nonumber #é«˜äº®æœç´¢,å…³é—­:noh;å®æ—¶æ˜¾ç¤ºåŒ¹é… :set hlsearch incsearch ç®€å†™ set hls is # å¿½ç•¥å¤§å°å†™ :set ignorecase smartcase # ç”¨sudoä¿å­˜åªè¯»æ–‡ä»¶(ç»å¸¸ç”¨åˆ°çš„ä¸€ä¸ªå‘½ä»¤) :w !sudo tee % # è®¾ç½®ç»ˆç«¯ä¸ºvi æ¨¡å¼ :set -o vi #åˆ‡æ¢å·¥ä½œè·¯å¾„ :cd ~/workspace # å°†å½“å‰ç¼–è¾‘æ–‡ä»¶ç¬¬ # è¡Œè‡³ç¬¬ # è¡Œçš„å…§å®¹ä¿å­˜åˆ°æ–‡ä»¶FILENAME :#,#w FILENAME # è¯»å– FILENAMEæ–‡ä»¶ å¹¶å°†å…¶æ’å…¥åˆ°å½“å‰æ–‡ä»¶çš„å…‰æ ‡ä½ç½®åé¢ :r FILENAME # é‡å¤ä¸Šä¸€æ¬¡å˜æ›´ . (period) ç¼–è¾‘å†…å®¹ # å¤åˆ¶å’Œç²˜è´´ &amp;#34;ayy (å†…å®¹å­˜æ”¾åœ¨å¯„å­˜å™¨ &amp;#34;) / &amp;#34;ap æŸ¥æ‰¾ æœç´¢å…‰æ ‡å¤„å•è¯ * *(å‘å‰) æˆ–#(å‘å) * q/ æˆ–/Ctrl-f (== find) * /ä¹‹åç”¨ä¸Šä¸‹æ–¹å‘é”®
æ›¿æ¢  :[address]s/search-string/replacement-string[/g]
  address ä¸ºä¸€ä¸ªè¡Œå·æˆ–è€…æ˜¯ç”¨é€—å·éš”å¼€çš„ä¸¤ä¸ªè¡Œå·ã€‚å¥ç‚¹ (.) ä»£è¡¨å½“å‰è¡Œã€‚å¯ä»¥ä½¿ç”¨æ ‡è®°æˆ–è€…æœç´¢å­—ç¬¦ä¸²è¡¨ç¤ºè¡Œå·ã€‚ %ä»£è¡¨å½“å‰æ–‡ä»¶ search-string å¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼æˆ–ç®€å•çš„å­—ç¬¦ä¸² g è¡¨ç¤ºè¿›è¡Œå…¨å±€æ›¿æ¢ ( é’ˆå¯¹ä¸€è¡Œå¯èƒ½æ‰§è¡Œå¤šæ¬¡æ›¿æ¢ )  # å‡ ä¸ªä¾‹å­ # æ›¿æ¢å½“å‰æ–‡ä»¶æ‰€æœ‰å¹¶ç¡®è®¤ï¼Œglobal :%s/old/new/gc # åˆ—å‡ºæ‰€æœ‰è¡Œ :g/old/p :g/old/s//new/gp # åŒ¹é…æ•´ä¸ªå•è¯ :s/\&amp;lt;bar\&amp;gt;/baz æ‰¹é‡æ›¿æ¢ :
:args *.[ch] # æ›¿æ¢æ‰€æœ‰*.cå’Œ*.hæ–‡ä»¶ :argdo %s/&amp;lt;my_foo&amp;gt;/My_Foo/ge | update # e å¿½ç•¥æ²¡æœ‰æ‰¾åˆ°çš„é”™è¯¯  # update å†™å…¥ä¿®æ”¹ å®šåˆ¶ è®¾ç½®å­—ä½“  Linux: set guifont=DejaVu Sans Mono 10 Windows :set guifont=DejaVu Sans Mono:h10  Troubleshooting Q: ç»ˆç«¯æ˜¾ç¤ºé¢œè‰²å¤±è´¥ A: export TERM=xterm-256color
Qï¼š Ubuntuä¸‹ä¸­æ–‡èœå•ä¸èƒ½æ˜¾ç¤º Aï¼š $sudo cp /usr/share/vim/vim72/lang/{menu_zh_cn.utf-8.vim,menu_zh_cn.utf8.vim}
Qï¼šä½¿ç”¨Taglist(Ctag)æŠ¥é”™  Aï¼š apt-get install exuberant-ctags æˆ–åœ¨WIndowsæŠŠctags.exeæ”¾åˆ°vimæ ¹ç›®å½•
æ‰©å±•å­¦ä¹  å·¥å…·æ‰©å±•  spf13-vim Maximum For Mac  å­¦ä¹ èµ„æº  How I Boosted My Vim Cheat Sheet å…¥é—¨å›¾è§£ </content>
    </entry>
    
     <entry>
        <title>Ansible Checklist</title>
        <url>/blog/ansible/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>automation</tag><tag>ops</tag>
        </tags>
        <content type="html"> æœ€æ—©æ¥è§¦Ansibleæ˜¯åœ¨15å¹´,åæ¥æ–­æ–­ç»­ç»­ç”¨è¿‡å‡ æ¬¡,å› ä¸ºæ›´å€¾å‘äºæ‰€å†™å³æ‰€å¾—çš„Fabric,åè€…ä¹Ÿæ›´è½»é‡çº§.
æ¯æ¬¡æ‹¾èµ·æ¥éƒ½è¦æŸ¥æ–‡æ¡£,è®°å½•ä¸‹å¸¸è§ç”¨æ³•.

åŸºç¡€ ansibleå‘½ä»¤è¡Œç”¨æ³• ansible  [options]
 -m ping : ä½¿ç”¨æ¨¡å— -a/&amp;ndash;args &amp;ldquo;&amp;hellip;&amp;rdquo;: æ¨¡å—å‚æ•° -u xulz : åˆ‡æ¢è¿œç¨‹è¿æ¥ç”¨æˆ· -b/&amp;ndash;become : ç­‰åŒäºä¹‹å‰çš„sudo  # å¤åˆ¶æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ ansible all -m copy -a &amp;#39;src=./README.md dest=/tmp&amp;#39; ansible-console äº¤äº’å¼shell
# åˆ—å‡ºhosts list # åˆ‡æ¢åˆ†ç»„ cd groupA cd db* é…ç½® é…ç½®é€‰é¡¹ # ansible-configå‘½ä»¤æŸ¥çœ‹å½“å‰é…ç½® ansible-config view ä»¥ä¸‹åˆ—é¡ºåºæŸ¥æ‰¾:
 ANSIBLE_CONFIG ç¯å¢ƒå˜é‡ å½“å‰è·¯å¾„çš„ansible.cfg æ–‡ä»¶ ~/.ansible.cfg ç³»ç»Ÿé…ç½® /etc/ansible/ansible.cfg (é»˜è®¤)  Ansible Configuration Settings
æœåŠ¡å™¨ä¿¡æ¯é…ç½®  /etc/ansible/hosts (ç±»ä¼¼iniæ ¼å¼:ä»¥;ä½œä¸ºæ³¨é‡Š,[header]ä½œä¸ºåˆ†ç»„) inventoryæ–‡ä»¶  æ³¨: å¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ¹é…æŒ‡å®šä¸»æœº
Working with Inventory
Playbook ansible-palybook playbook.yml # è¿è¡Œadhocå‘½ä»¤ ansible boston -i production -m command -a &amp;#39;/sbin/reboot&amp;#39; ### ç”¨æ³• * -i/--inventory : æŒ‡å®šå‚è€ƒæ–‡ä»¶ ### å‡å°‘æ‰§è¡Œæ—¶é—´  * -l/--limit : é™å®šå­é›† * --tags/--skip-tags : æ ‡ç­¾ * gather_facts: False ### æœ€ä½³å®è·µ * å‘½åä»»åŠ¡ * æ¶‰åŠçŠ¶æ€ * ä»¥è§’è‰²åˆ†ç»„ ### ansible-galaxyç”¨æ³•  ```bash ansible-galaxy init -p playbooks/roles web æ—¥å¿—åŠè°ƒè¯• # æ‰“å°è¯¦ç»†ä¿¡æ¯åˆ°æ§åˆ¶å° ansible-playbook -vvv playbook.yaml # æŸ¥çœ‹ä¸€äº›ä¿¡æ¯ --list-hosts --list-tasks é…ç½®æ—¥å¿—æ–‡ä»¶
[defaults] log_path=/path/to/logfile å…¶ä»–å·¥å…· ansible-vault åŠ å¯†secret
ansible-doc æ’ä»¶æ–‡æ¡£
Rollback https://github.com/ansistrano/rollback
</content>
    </entry>
    
     <entry>
        <title>Docker Command</title>
        <url>/blog/docker-command/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>docker</tag><tag>ops</tag>
        </tags>
        <content type="html"> å®é™…ä½¿ç”¨ä¸­ï¼Œdockerçš„å‘½ä»¤è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œè¿™é‡Œå•åˆ—å‡ºæ¥æ–¹ä¾¿æŸ¥è¯¢ã€‚

å¸¸ç”¨å‘½ä»¤ # åœæ­¢æ‰€æœ‰è¿è¡Œçš„containers docker stop $(docker ps -q) # åˆ é™¤æ‰€æœ‰å®¹å™¨ docker rm $(docker ps -a -q) # æ˜¾ç¤ºæ‰€æœ‰exitedçš„å®¹å™¨ID docker ps -a -q -f status=exited # æ˜¾ç¤ºæ ‡å‡†è¾“å‡ºæ—¥å¿— docker logs --follow &amp;lt;container&amp;gt; # å¤åˆ¶æ–‡ä»¶ docker cp foo.txt &amp;lt;container&amp;gt;:/ docker cp &amp;lt;container&amp;gt;:/foo.txt / docker run docker run é€‰é¡¹è¯¦è§£
# --rm å®¹å™¨å…³é—­æ—¶è‡ªåŠ¨åˆ é™¤å®¹å™¨, é€šå¸¸ç”¨äºè¿è¡Œä¸€æ¬¡æ€§å‘½ä»¤ # -d, â€”detach åœ¨åå°è¿è¡Œ(detachedæ¨¡å¼)å¹¶æ‰“å°å®¹å™¨ID, å¦‚æœä¸æŒ‡å®š,å®¹å™¨è¿è¡Œæ—¥å¿—ä¼šæ‰“å°åˆ°ç»ˆç«¯ # -p &amp;lt;hostPort&amp;gt;:&amp;lt;containerPort&amp;gt; å»ºç«‹å®¿ä¸»æœºåˆ°å®¹å™¨çš„ç«¯å£æ˜ å°„  # -v &amp;lt;hostDirectory/volume&amp;gt;:&amp;lt;containerDirectory&amp;gt; å»ºç«‹å®¿ä¸»æœºåˆ°å®¹å™¨çš„æ–‡ä»¶ç›®å½•æ˜ å°„, å¦‚æœä¸æŒ‡å®š,åˆ™ä¸èƒ½æŒä¹…åŒ–ä¿å­˜å˜æ›´  ä¸Šé¢çš„docker volumeå¦‚æœä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º, ä¹Ÿå¯ä»¥æ‰‹åŠ¨åˆ›å»º: docker volume create my-container-data
 # æŒ‡å®šç½‘ç»œ docker run --net mynet123 --ip 172.18.0.22 -it ubuntu bash ä»Hostä¼ é€’ç¯å¢ƒå˜é‡åˆ°Container æ–¹å¼1: ä½¿ç”¨-e å‚æ•°
export LOCUST_MODE=&amp;#34;master&amp;#34;;printenv |grep LOADS_MODE; docker run -e LOCUST_MODE ... æ–¹å¼2: ä½¿ç”¨ &amp;ndash;env-fileå‚æ•°
# æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ docker run --env-file=runtime_env æ’æŸ¥/è°ƒè¯• # æŸ¥çœ‹å®¹å™¨æ—¥å¿—, åŒ…å«å·²Exited docker logs -f &amp;lt;container id/name&amp;gt; # æˆ–è€…ç›´æ¥ç™»å½•å®¹å™¨ docker run xxx -ti bash # inspect æŸ¥çœ‹çŠ¶æ€/LogPath docker inspect xxx docker network docker port &amp;lt;CONTAINER&amp;gt; docker network ls # åˆ›å»ºæ–°çš„bridge ç½‘ç»œ  docker network create net-demo docker network create --subnet=172.18.0.0/16 mynet123 docker volume/æ•°æ®å·  docker volume ls  docker system  docker system prune : åˆ é™¤ä¸ç”¨çš„æ•°æ®  -a, &amp;ndash;all : åˆ é™¤æ‰€æœ‰ä¸ç”¨é•œåƒè€Œä¸ä»…ä»…æ‚¬æŒ‚çš„ -f, &amp;ndash;force &amp;ndash;volumes : ä¸ç”¨çš„å·ä¹Ÿåˆ é™¤ &amp;ndash;filter &amp;ldquo;key=value&amp;rdquo;  docker system info : ç³»ç»Ÿä¿¡æ¯ docker system df : ç£ç›˜å ç”¨  docker system prune -a # This will remove: # - all stopped containers # - all networks not used by at least one container # - all images without at least one container associated to them # - all build cache åˆ¶ä½œé•œåƒ Dockerfile ä¾‹å­
# åŸºç¡€é•œåƒ FROM python:3-onbuild # å¯¹å¤–æš´éœ²ç«¯å£ EXPOSE 5000 # æ‰§è¡Œå‘½ä»¤ CMD: [&amp;#34;python&amp;#34;,&amp;#34;.app.py&amp;#34;]   # å…¶ä»– # è¿è¡Œå‘½ä»¤ RUN apt -yqq update  # æŠŠåº”ç”¨æ·»åŠ åˆ°å®¹å™¨å· ADD flask-app /opt/flask-app # è®¾ç½®å·¥ä½œç›®å½• WORKDIR /opt/flask-app docker build  -t &amp;lt;ç‰ˆæœ¬æ ‡ç­¾&amp;gt; PATH/URL/. : é€šå¸¸ä½¿ç”¨çš„æœ€åçš„.ä»£è¡¨å½“å‰è·¯å¾„  # æ„å»ºåŠè¿è¡Œç¤ºä¾‹ docker build -t my-app . docker run -it --rm --name my-running-app my-app # å¼ºåˆ¶æ„å»º/ä¸ä½¿ç”¨ç¼“å­˜ docker build --no-cache -t my-app -f Dockerfile . RUN/ENTRYPOINT/CMDçš„åŒºåˆ«  RUN: æ„å»ºæ–°é•œåƒå±‚ ENTRYPOINT: æ€»æ˜¯éœ€è¦æ‰§è¡Œå‘½ä»¤æ—¶ä½¿ç”¨,ä½¿å®¹å™¨å¯æ‰§è¡Œ CMD: éœ€è¦æä¾›é»˜è®¤å‘½ä»¤,å‚æ•°å¯ä»¥è¢«è¦†ç›–  ä¸¤ç§å½¢å¼:shellå’Œexec
 shellå½¢å¼   : ä¼šè°ƒç”¨/bin/sh -c å¹¶æ‰§è¡Œshellå¤„ç† exceå½¢å¼  [&amp;ldquo;executable&amp;rdquo;,&amp;ldquo;param1&amp;rdquo;]  ç›´æ¥è°ƒç”¨executable,ä¾‹å¦‚ /bin/bashå†™ä½œ ENTRYPOINT [&amp;ldquo;/bin/bash&amp;rdquo;,&amp;ldquo;-c&amp;rdquo;,&amp;ldquo;echo Hello, $name&amp;rdquo;] æ›´å¤šç”¨äº CMDå’Œ ENTRYPOINT   ä¼ é€’å‚æ•° # é€šå¸¸ç»„åˆä¸º ENTRYPOINT [&amp;#34;/bin/bash&amp;#34;,&amp;#34;-c&amp;#34;,&amp;#34;param1&amp;#34;] CMD [&amp;#34;param2&amp;#34;,&amp;#34;param3&amp;#34;] è°ƒè¯• # å¯¹äºç›´æ¥EXITEDçš„å®¹å™¨,å¯ä¿®æ”¹å…¥å£ä¸º ENTRYPOINT [&amp;#34;/bin/bash&amp;#34;,&amp;#34;-c&amp;#34;,&amp;#34;sleep 1800&amp;#34;] # å®¹å™¨å¯åŠ¨å,å†ç™»å½•å®¹å™¨shellæŸ¥çœ‹æ—¥å¿— é•œåƒå¯¼å‡º/å¯¼å…¥ ä¿å­˜é•œåƒ # æ ¼å¼: docker save -o &amp;lt;path for generated tar file&amp;gt; &amp;lt;image name&amp;gt; # å‹ç¼© docker save &amp;lt;docker image name&amp;gt; | gzip &amp;gt; &amp;lt;docker image name&amp;gt;.tar.gz å¯¼å…¥é•œåƒ docker load &amp;lt; my-image.tar.gz # æ³¨: å¯¹äºgzip, bzip2, xzçš„å‹ç¼©æ–‡ä»¶,å¯¼å…¥æ—¶ä¼šè‡ªåŠ¨è§£å‹ docker-compose å®šä¹‰åŠè¿è¡Œå¤šä¸ªå®¹å™¨åº”ç”¨,Pythonå†™çš„ä¸€ä¸ªå·¥å…·
PS. åŸæ¥docker-composeæœ€åˆä¹Ÿæ˜¯æ”¶è´­æ¥çš„
# åœæ­¢æœåŠ¡ docker-compose stop # åœæ­¢å¹¶åˆ é™¤containeråŠæ•°æ®å· docker-compose down -v # åˆ›å»º,å¯åŠ¨å¹¶åœ¨åå°è¿è¡Œcontainer docker-compose up -d docker-compose.yml version:services:&amp;lt;service_name&amp;gt;:image:command:ports:volumes: æŠ€å·§  æ‰€æœ‰å‘½ä»¤çš„Container IDå¯ä»¥ä»…ä½¿ç”¨å‰2/4ä½  æ‰©å±•é˜…è¯»  Docker RUN vs CMD vs ENTRYPOINT å¦‚ä½•åœ¨å·²å¯åŠ¨çš„å®¹å™¨å¼€å¯æ–°ç«¯å£æ˜ å°„ </content>
    </entry>
    
     <entry>
        <title>Dockeræœ€ä½³å®è·µ</title>
        <url>/blog/docker-best-practice/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>docker</tag>
        </tags>
        <content type="html">  è¿™é‡Œä¸»è¦é’ˆå¯¹åˆ¶ä½œDockeré•œåƒï¼Œæ±‡æ€»å¸¸è§çš„æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼š
åˆ¶ä½œé•œåƒ ä½¿ç”¨ç»§æ‰¿é•œåƒ å¦‚æœè¦åˆ¶ä½œåŒ…å«Tomcatå’ŒJavaè¿è¡Œç¯å¢ƒçš„é•œåƒï¼Œ å»ºè®®å…ˆåŸºäºCentOSåˆ¶ä½œJavaé•œåƒï¼Œæ¥ç€åŸºäºå®ƒåšTomcaté•œåƒã€‚
centos7-java8 &amp;gt; centos7-java8-tomcat8
åœ¨ä¸€ä¸ªå®¹å™¨æœ€å¥½åªè¿è¡Œä¸€ä¸ªè¿›ç¨‹ åˆ¶ä½œåˆé€‚å±‚æ•°çš„é•œåƒ é¿å…åªåŒ…å«ä¸€å±‚ï¼Œä¹Ÿé¿å…å¤ªå¤šå±‚ã€‚å¸¸ç”¨çš„æ–¹å¼ä¾‹å¦‚ï¼š
 åŸºäºæ“ä½œç³»ç»Ÿçš„å®šåˆ¶åŸºç¡€é•œåƒ æ–°ç”¨æˆ·åˆ›å»ºå‡†å¤‡ å®‰è£…è¿è¡Œæ—¶ é…ç½® åº”ç”¨å±‚  å®šä¹‰.dockerignore ä½¿ç”¨WORKDIR æ³¨æ„é¡ºåºï¼Œä¾ç…§æ„å»ºè¿‡ç¨‹ï¼ˆä¸å˜çš„åœ¨å‰ï¼‰ ç¼©å‡é•œåƒå°ºå¯¸ é•œåƒçš„é€‰æ‹©ï¼š
Ubuntu &amp;gt; openjdk:8-alpine &amp;gt; tomcat:8.5-alpine
å¸¸ç”¨æ¸…é™¤å‘½ä»¤
# Alpine  apk add --no-cache curl # CentOS  yum clean all # Ubuntu  rm -rf /var/lib/apt/lists/* ä½¿ç”¨Health Check HEALTHCHECK CMD curl --fail http://localhost || exit 1 --interval=10s --timeout=10s --start-period=30s # æ£€æŸ¥çŠ¶æ€  docker ps response Javaåº”ç”¨æ€§èƒ½ä¼˜åŒ– JVM åº”è¯¥æŒ‡å®š -Xmx
é»˜è®¤ä½¿ç”¨å®¿ä¸»æœºçš„25%æˆ–1G(å–è¾ƒå°å€¼)
ä½¿ç”¨dockerèµ„æºé™åˆ¶  &amp;ndash;memory &amp;ndash;memory-reservation &amp;ndash;cpus  å¦‚æœCPUè¢«é™åˆ¶ï¼Œéœ€è¦åŒæ—¶è®¾ç½® -XX:ParallelGCThreads
æ—¥å¿—å¤„ç† ä¸å»ºè®®å†™åˆ°å®¹å™¨çš„RWå±‚ï¼Œåº”è¯¥å‘é€åˆ°æ•°æ®å·ï¼ˆNAS/SANï¼‰æˆ–ä½¿ç”¨ Docker Log Drivers.
é—®é¢˜è¯Šæ–­ JVMå‘½ä»¤ï¼š
GC Stats: jstat &amp;ndash;gcutil
Heap Dump/ç›´æ–¹å›¾: jmap
Dockerå‘½ä»¤ï¼š docker stats
ctop
ä¸€äº›é•œåƒèµ„æº  Tomcat Dockfile Postgres Dockfile JBoss Dockfile  å‚è€ƒ  SlideShare Java Docker Pipeline Dockerfile Good Practices  </content>
    </entry>
    
     <entry>
        <title>åœ¨Windows10è¿è¡Œå¢å¼ºç‰ˆUbuntu,æ”¯æŒå¤åˆ¶ç²˜è´´å’Œæœ¬åœ°ç£ç›˜æ˜ å°„</title>
        <url>/blog/hyperv-ubuntu-enhanced-mode/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>hyper-v</tag><tag>ubuntu</tag><tag>windows10</tag>
        </tags>
        <content type="html">  ä½¿ç”¨Win10è‡ªå¸¦çš„Hyper-Vè¿è¡ŒUbuntuè™šæ‹Ÿæœºç¡®å®èµ„æºä½¿ç”¨å¾ˆå°ï¼ŒUbuntuè™šæ‹Ÿæœºå¼€ä¸ªå…¨å±ï¼Œç”¨èµ·æ¥å’ŒåŒç³»ç»Ÿæ²¡æœ‰åŒºåˆ«ã€‚
å‰æ ç”±äºè¿™æ˜¯æœ€æ–°ç‰ˆWindows 10å‘å¸ƒç‰ˆæ‰æ”¯æŒçš„ç‰¹æ€§ï¼ˆå¢å¼ºLinuxæ”¯æŒï¼‰ï¼Œéœ€è¦ç¡®ä¿Windowså·²å‡çº§è‡³1803. å‡çº§ä½¿ç”¨å®˜æ–¹çš„Windows10æ˜“å‡å°±å¯ä»¥ã€‚
åŒæ—¶Hyper-Véœ€è¦ä¸“ä¸šç‰ˆå’Œä¼ä¸šç‰ˆæ‰æ”¯æŒï¼ˆå®¶åº­ç‰ˆä¸è¡Œï¼‰ã€‚
ä¸»è¦æ­¥éª¤ 1.ä¸‹è½½Ubuntu 18.04ï¼ˆæˆ–16.04ï¼‰é•œåƒ
2.åœ¨Hyper-Våˆ›å»ºæ–°è™šæ‹Ÿæœºï¼Œå¯ä»¥é€‰æ‹©&amp;rdquo;Generation 2/2ä»£ã€‚ åˆ›å»ºå®Œæˆä¹‹åï¼Œåœ¨è™šæ‹Ÿæœº[è®¾ç½®]-[ç¡¬ä»¶]-[å®‰å…¨],æŠŠ&amp;rdquo;Enable Secure Boot&amp;rdquo;å‰çš„å‹¾é€‰å»æ‰ã€‚
3.è™šæ‹Ÿæœºå®‰è£…å®Œæˆä¹‹åï¼Œè¿›å…¥Ubuntuç³»ç»Ÿï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼š
sudo apt-get update sudo apt install git git clone https://github.com/jterry75/xrdp-init.git ~/xrdp-init cd ~/xrdp-init/ubuntu/18.04/ vi install.sh # æŠŠä»¥ä¸‹ä¸¤è¡Œæ³¨é‡Šæ‰å¹¶ä¿å­˜ï¼Œå¦‚ä¸‹ #rmmod vmw_vsock_vmci_transport #rmmod vsock  # è¿è¡Œ sudo chmod &#43;x install.sh sudo ./install.sh sudo reboot # é‡å¯åï¼Œè¿›å…¥è¯¥ç›®å½•å†æ¬¡è¿è¡Œ sudo ./install.sh # ä¹‹åå…³é—­Ubuntu 4.ä»¥ç®¡ç†å‘˜æ‰“å¼€powershellï¼Œè¿è¡Œ
Set-VM -VMName Ubuntu -EnhancedSessionTransportType HvSocket 5.è¿›å…¥Ubuntuè™šæ‹Ÿæœºï¼Œä»¥é»˜è®¤çš„Xorgæ–¹å¼ç™»å½•ç³»ç»Ÿã€‚
å¦‚æœç™»å½•å¤±è´¥ï¼Œè¿›å…¥[Hyper-V Settings]-[User]-[Enhanced Session Mode]è®¾ç½®é¡¹ï¼ŒæŠŠ&amp;rdquo;Use enhanced session mode&amp;rdquo;å‰çš„å‹¾é€‰å»æ‰ï¼Œé‡æ–°ç™»å½•Ubuntuå¹¶æ£€æŸ¥æ—¥å¿—/var/log/xrdp.logæœ€åçš„é”™è¯¯ã€‚å¦‚æœæ˜¯å› ä¸ºç§é’¥è¯»å¤±è´¥ï¼Œå¯æ‰§è¡Œ
# è¿™é‡Œä¿®æ”¹ä¸ºä½ çš„ç”¨æˆ·å  sudo chown xulz /etc/xrdp/key.pem å‚è€ƒ  Windows 10: A guide how to run Ubuntu 18.04 in Enhanced Mode in Hyper-V   </content>
    </entry>
    
     <entry>
        <title>Kubernetesæ§åˆ¶å‘½ä»¤kubectlæ±‡æ€»</title>
        <url>/blog/k8s-command/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>ops</tag>
        </tags>
        <content type="html">  kubectl ä½œä¸ºKubernetesé›†ç¾¤ç®¡ç†çš„å‘½ä»¤è¡Œå·¥å…·,ç»å¸¸ç”¨åˆ°çš„å‡ ä¸ªå­å‘½ä»¤åŒ…æ‹¬:
 kubectl get &amp;ndash; list resources kubectl describe &amp;ndash; show detailed information about a resource kubectl logs &amp;ndash; print the logs from a container in a pod kubectl exec &amp;ndash; execute a command on a container in a pod  æŒ‰ç±»å‹åˆ† é›†ç¾¤çŠ¶æ€ kubectl cluster-info get è·å–ä¿¡æ¯ kubectl get nodes kubectl get deployments # -o yaml è¾“å‡ºyamlé…ç½®æ ¼å¼ kubectl -n kube-system get deployment coredns -o yaml kubectl get pods # æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯ kubectl get pods -o wide # æ˜¾ç¤ºæ‰€æœ‰å‘½åç©ºé—´çš„ kubectl get pods --all-namespaces # æŒ‡å®šå‘½åç©ºé—´ -n # -w ç›‘æ§å˜åŒ– kubectl get pod -n kube-system kubectl get componentstatuses # ç­‰ä»·äº kubectl get cs delete åˆ é™¤èµ„æº kubectl delete pod &amp;lt;pod-name&amp;gt; describe è¯¦ç»†ä¿¡æ¯ kubectl describe pod &amp;lt;pod-id&amp;gt; # æè¿°ç³»ç»Ÿå‘½åç©ºé—´Pod, ç»å¸¸ç”¨äºæŸ¥æ‰¾é—®é¢˜ kubectl describe pod calico-node-j2ggr --namespace=kube-system logs è·å–å®¹å™¨æ—¥å¿— POD_NAME=$(kubectl get pods -l run=nginx -o jsonpath=&amp;#34;{.items[0].metadata.name}&amp;#34;) kubectl logs $POD_NAME exec åœ¨å®¹å™¨æ‰§è¡Œå‘½ä»¤ kubectl exec -ti -- $POD_NAME &amp;lt;command&amp;gt;kubectl exec -ti k8s-demo -- /bin/bash # æŸ¥çœ‹ç¯å¢ƒå˜é‡ # printenv é…ç½®/éƒ¨ç½² # éƒ¨ç½²Deployment kubectl create -f deployment.yaml # ç¼–è¾‘Deployment kubectl edit deployment/nginx-deployment # åŸºäºé…ç½®æ–‡ä»¶åˆ›å»ºpod kubectl create -f &amp;lt;config.yaml&amp;gt; # åˆ›å»ºå…¶ä»–èµ„æº kubectl create secret generic kubernetes-bootcamp --from-literal=&amp;#34;mykey=mydata&amp;#34; åœ¨éMasteræœºå™¨ä½¿ç”¨kubectl scp root@&amp;lt;master ip&amp;gt;:/etc/kubernetes/admin.conf . kubectl --kubeconfig ./admin.conf get nodes æŒ‰ä½¿ç”¨åœºæ™¯ éƒ¨ç½²å®¹å™¨é•œåƒ ## éƒ¨ç½² kubectl run &amp;lt;deployment name&amp;gt; â€”image=&amp;lt;full url&amp;gt; â€”port=8080 # ä¾‹å¦‚ kubectl run kubernetes-bootcamp --image=gcr.io/google-samples/kubernetes-bootcamp:v1 --port=8080 kubectl run busybox --image=busybox # æ£€æŸ¥ kubectl get deployments # ä½¿ç”¨æ ‡ç­¾è¿‡æ»¤ kubectl get pods -l run=busybox å‡çº§åŠå›æ»š ## å‡çº§ kubectl set image deployment/nginx-deployment nginx=nginx:1.9.1 kubectl rollout status deployment/nginx-deployment kubectl rollout undo &amp;lt;deployment&amp;gt; [--to-revision=2] # æ‰‹åŠ¨å¼ºåˆ¶æ›´æ–°å®¹å™¨é•œåƒ # æ³¨: ä»…é€‚ç”¨äºReplicationController kubectl rolling-update k8s-demo --image=k8s-demo:latest --image-pull-policy Always æš´éœ²æœåŠ¡ # ä½¿API Serverç›‘å¬æœ¬åœ°çš„8001ç«¯å£ kubectl proxy # ä½¿ç”¨NodePortæœåŠ¡æ–¹å¼æš´éœ²éƒ¨ç½² kubectl expose deployment nginx --port 80 --type NodePort # æ ‡ç­¾æ ‡è®° kubectl label # æ£€æŸ¥ kubectl get services è‡ªåŠ¨æ‰©å®¹ kubectl scale deployment nginx-deployment --replicas=5 # è‡ªåŠ¨æ‰©å®¹/Horizontal Pod Autoscaler kubectl autoscale deployment nginx-deployment --min=10 --max=15 --cpu-percent=80</content>
    </entry>
    
     <entry>
        <title>ç”µéŸ³æ¬£èµ</title>
        <url>/play/electronic-muisc/</url>
        <categories>
          <category>Play</category>
        </categories>
        <tags>
          <tag>music</tag>
        </tags>
        <content type="html"> å»å¹´ä¸‹åŠå¹´ç©ç‹è€…è£è€€(å¹´å‰å·²å‡ºå‘)çš„æ”¶è·ä¹‹ä¸€å°±æ˜¯æ¥è§¦äº†ç”µéŸ³,å½“æ—¶æ‰¾ä¸€äº›æ”»ç•¥è§†é¢‘çœ‹,èƒŒæ™¯éŸ³ä¹éƒ½å¾ˆå¸¦åŠ²,äºæ˜¯é€šè¿‡ç½‘æ˜“äº‘éŸ³ä¹çš„æ­Œå•å‘ç°äº†ç”µéŸ³çš„å¹¿é˜”å¤©åœ°.
ä»ä¸ªäººçˆ±å¥½è¯´,è¶…å–œæ¬¢é“æ‰˜,é‚£é¦–BOOMå°±å¾ˆé­”æ€§. å…¶ä»–DJæœ‰Deorro(Five Hourså¿…å¬),Timmy Trumpet,Zedd.
æ¬¢è¿æ”¶å¬æˆ‘çš„æ­Œå•:Â http://music.163.com/#/playlist?id=969925767
</content>
    </entry>
    
     <entry>
        <title>Kuberneteséƒ¨ç½²ç¯‡:Kubesprayæ–¹å¼è‡ªåŠ¨åŒ–</title>
        <url>/blog/k8s-deploy/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>ops</tag>
        </tags>
        <content type="html">  ä¼—æ‰€å‘¨çŸ¥Kubernetesé›†ç¾¤çš„éƒ¨ç½²æ¯”è¾ƒç¹çå¤æ‚,è¿™é‡Œåˆ—å‡ºå¸¸è§çš„å‡ ç§éƒ¨ç½²æ–¹å¼åŠè¿‡ç¨‹.
å®˜æ–¹ç°åœ¨æä¾›2ç§ä¸»è¦çš„éƒ¨ç½²æ–¹å¼:
 Kubespray : åŸºäºAnsibleçš„é›†ç¾¤è‡ªåŠ¨åŒ–éƒ¨ç½²,æ”¯æŒçš„å¹³å°æ›´å¹¿æ³›,éƒ¨ç½²æ›´çµæ´» Kubernetes Operations (kops): ç”Ÿäº§ç¯å¢ƒé›†ç¾¤è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·, ç›®å‰åªæ”¯æŒAWS, GCEäº‘ç¯å¢ƒ.  Kuberneteséƒ¨ç½²/è¿è¡Œç»“æ„ Control Plane åŒ…æ‹¬ä¸‰éƒ¨åˆ†ç»„ä»¶:
 apiServer controllerManager scheduler  kube-controller-managerå®ä¾‹:
ç®¡ç†controllerçŠ¶æ€çš„å®ˆæŠ¤è¿›ç¨‹,åŒ…æ‹¬replication controller, endpoints controller, namespace controller, serviceaccounts controller.
ç»„ä»¶å®‰è£…é¡ºåº  Docker etcd kubelet and kube-proxy network_plugin (such as Calico or Weave) kube-apiserver, kube-scheduler, and kube-controller-manager Add-ons (such as KubeDNS)  é«˜å¯ç”¨ Control Planeå’ŒETCDè‡³å°‘éœ€è¦3ä¸ªèŠ‚ç‚¹,æ‰å¯æä¾›HA.
æ·»åŠ  &amp;ndash;experimental-control-plane é€‰é¡¹ç»„æˆcontrol planeé›†ç¾¤.
Kubesprayéƒ¨ç½²å®æˆ˜ è¯´æ˜ ç”±äºå›½å†…ç½‘ç»œè®¿é—®docker.comåŠé•œåƒ, kubernates, gcr.ioç­‰ç›¸å…³é•œåƒæä¸ç¨³å®š,æ›¿æ¢äº†ç›¸å…³å®‰è£…æº.
è¿™é‡Œä½¿ç”¨çš„æ˜¯æˆ‘çš„Kubespray(å·²æ›´æ–°è‡³2018.12æœ€æ–°ç‰ˆv2.8.0) forkç‰ˆæœ¬
éƒ¨ç½²èŠ‚ç‚¹å‰æ cp inventory/sample inventory/mycluster æ ¹æ®è‡ªå·±çš„èŠ‚ç‚¹ä¿¡æ¯ä¿®æ”¹inventory/mycluster/hosts.ini
æˆ‘çš„ä¾‹å­
moon1 ansible_ssh_host=10.20.30.101  moon2 ansible_ssh_host=10.20.30.102  moon3 ansible_ssh_host=10.20.30.103 moon4 ansible_ssh_host=10.20.30.104  moon5 ansible_ssh_host=10.20.30.105  moon6 ansible_ssh_host=10.20.30.106  [kube-master] moon1 moon2 [etcd] moon1 moon2 moon3 [kube-node] moon2 moon3 moon4 moon5 moon6 [k8s-cluster:children] kube-master kube-node å›½å†…é•œåƒåŠåŠ é€Ÿçš„å¸¸è§æ­¥éª¤ å·²åŒ…å«äºAnsibleè¿è¡Œè„šæœ¬.
docker é˜¿é‡Œäº‘é•œåƒ # step 1: å®‰è£…å¿…è¦çš„ä¸€äº›ç³»ç»Ÿå·¥å…·  sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common # step 2: å®‰è£…GPGè¯ä¹¦  curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - # Step 3: å†™å…¥è½¯ä»¶æºä¿¡æ¯  sudo add-apt-repository &amp;#34;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs)stable&amp;#34; # Step 4: æ›´æ–°å¹¶å®‰è£… Docker-CE  sudo apt-get -y update # æŸ¥æ‰¾Docker-CEçš„ç‰ˆæœ¬: apt-cache madison docker-ce  # å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„Docker-CE  sudo apt-get -y install docker-ce=17.03.2~ce-0~ubuntu-xenial dockeré•œåƒ é˜¿é‡Œäº‘åŠ é€Ÿ sudo mkdir -p /etc/docker sudo tee /etc/docker/daemon.json &amp;lt;&amp;lt;-&amp;#39;EOF&amp;#39; { &amp;#34;registry-mirrors&amp;#34;: [&amp;#34;https://nz4awhki.mirror.aliyuncs.com&amp;#34;] } EOF # é‡å¯ä»¥ç”Ÿæ•ˆ  sudo service docker restart kubernetesé•œåƒ cat &amp;lt;&amp;lt;EOF | sudo tee /etc/apt/sources.list.d/kubernetes.list deb http://mirrors.ustc.edu.cn/kubernetes/apt kubernetes-xenial main EOF gcr.ioå’Œquay.ioé•œåƒ å°†ç›¸å…³é•œåƒURLé‡Œ
 gcr.ioéƒ¨åˆ†æ›¿æ¢ä¸ºgcr.mirrors.ustc.edu.cn quay.ioéƒ¨åˆ†æ›¿æ¢ä¸ºquay.mirrors.ustc.edu.cn  æ³¨1: å›½å†…ç½‘ç»œçš„é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡æ‰‹åŠ¨ä¸‹è½½ç›¸å…³é•œåƒå¹¶é‡æ–°tagçš„æ–¹å¼è§£å†³. æ³¨2: gcr.ioçš„é•œåƒåˆ—è¡¨è§ å®˜æ–¹ç½‘ç«™
è¿è¡ŒAnsible Playbookå‘½ä»¤ é¦–æ¬¡è¿è¡Œ,å»ºè®®:
 å¼€å¯è¯¦æƒ…æ—¥å¿—: -v
 å¦‚æœéroot,åˆ‡æ¢sudoç”¨æˆ·: -u xulz -b
 å»ºè®®å…ˆè¿è¡Œå…¶ä¸­ä¸€å°èŠ‚ç‚¹: &amp;ndash;limit moon1
  ansible-playbook -u xulz -b -i inventory/mycluster/hosts.ini cluster.yml --limit moon1 # å¦‚æœæŸæ­¥éª¤å‡ºé”™,å»ºè®®ä¿®å¤åå…ˆé‡è¯•é”™è¯¯,åœ¨ä»¥ä¸Šå‘½ä»¤åæ·»åŠ  --limit @/Users/xulz/k8s/kubespray/cluster.retry åˆ é™¤èŠ‚ç‚¹ ansible-playbook -u xulz -b -i inventory/mycluster/hosts.ini remove-node.yml --limit moon11 æ·»åŠ èŠ‚ç‚¹ ansible-playbook -u xulz -b -i inventory/mycluster/hosts.ini scale.yml å‡çº§èŠ‚ç‚¹ ansible-playbook -u xulz -b -i inventory/mycluster/hosts.ini upgrade-cluster.yml é—®é¢˜æ’æŸ¥ å¦‚æœansibleè¿è¡Œå¤±è´¥,æ ¹æ®æœ€åçš„æ§åˆ¶å°é”™è¯¯åšç›¸åº”çš„ä¿®æ­£å¹¶é‡è¯•. æ—¥å¿—çš„å­˜æ”¾ä½ç½®ä¸ºèŠ‚ç‚¹ä¸»æœºçš„: /var/log/containers/
 æ³¨: å¦‚æœä»¥&amp;ndash;checkçš„Dry Runæ–¹å¼è¿è¡Œ,ä¼šé€ æˆè¿è¡Œé”™è¯¯(å› ä¸ºè„šæœ¬ä¾èµ–äºæŸäº›æ­¥éª¤çš„å®é™…è¿è¡Œç»“æœä¸ºç¯å¢ƒå˜é‡),æ‰€ä»¥ä¸è¦ä½¿ç”¨è¿™ç§æ¨¡å¼.
 è¿è¡Œkubectl xxxå‘½ä»¤æŠ¥é”™: The connection to the server localhost:8080 was refused - did you specify the right host or port? è§£å†³æ–¹å¼: æ·»åŠ  KUBECONFIG ç¯å¢ƒå˜é‡
vi ~/.bashrc export KUBECONFIG=/etc/kubernetes/admin.conf åœ¨å‡†å¤‡é˜¶æ®µæŠ¥é”™: &amp;ldquo;assertion&amp;rdquo;: &amp;ldquo;ansible_swaptotal_mb == 0â€ è§£å†³æ–¹å¼: éœ€è¦å…³é—­swap
sudo swapoff -a è¿è¡Œkubectl å‘½ä»¤æŠ¥é”™: Unable to connect to the server: x509: certificate is valid for &amp;hellip;, not &amp;hellip; è§£å†³æ–¹å¼: å‚è€ƒInvalid x509 certificate for kubernetes master
å¦‚æœå‡çº§clusterå‡ºé”™,å»ºè®®é€ä¸ªå‘½ä»¤è°ƒè¯•. sudo kubeadm upgrade plan # å‚è€ƒä¸‹é¢çš„æ‰©å±•é˜…è¯»éƒ¨åˆ†  ç™»å½•Kubernetes Dashboard ### åˆ›å»ºç®¡ç†å‘˜è´¦å·  kubectl create -f admin-role.yaml # æ‰¾åˆ°admin-tokenå¼€å¤´çš„tokenåå­—  kubectl -n kube-system get secret # è·å–ç›¸åº”çš„token  kubectl -n kube-system get secret admin-token-tmh9v -o jsonpath={.data.token}|base64 -d # ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ kubectl -n kube-system describe secret admin-token-tmh9v è·å–token  # è®¿é—®ç½‘å€: https://&amp;lt;first_master&amp;gt;:6443/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/#!/login  # é€‰æ‹©ä»¥tokenæ–¹å¼ç™»å½•, è¾“å…¥ä¸Šä¸€æ­¥è·å–çš„token  # ç™»å½•æˆåŠŸ  admin-role.yamlçš„å…·ä½“å†…å®¹è§è¿™é‡Œ
 å…³äºDashboardçš„è¯´æ˜ Dashboradæ”¯æŒtokenå’Œkubeconfigä¸¤ç§è®¤è¯ç™»å½•æ–¹å¼ï¼Œè€Œkubeconfigçš„æ–¹å¼ä¹Ÿéœ€è¦tokenå­—æ®µã€‚
é»˜è®¤å‘½åç©ºé—´æœ‰: default, kube-public, kube-system
æ‰©å±•é˜…è¯»  Kubernetes The Hard Way: ä¾‹å­åŸºäºGCP(Google Cloud Platform) kubesprayå®˜ç½‘ Kubernetes - Upgrading Cluster  </content>
    </entry>
    
     <entry>
        <title>Kuberneteséƒ¨ç½²ç¯‡:æœ¬åœ°å¼€å‘æµ‹è¯•ç¯å¢ƒæ­å»º</title>
        <url>/blog/k8s-local/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>ops</tag>
        </tags>
        <content type="html"> æœ¬æ–‡ä¾§é‡äºå…¥é—¨Kubernetesæ—¶çš„æœ¬åœ°å¼€å‘æµ‹è¯•ç¯å¢ƒæ­å»º,åŠminikubeçš„ä½¿ç”¨.
å°¤å…¶åœ¨å›½å†…ä½¿ç”¨æ—¶éœ€è¦å¼€å¯ç½‘ç»œä»£ç†,å¦åˆ™ä¼šå› ä¸ºè®¿é—®Googleçš„ä¸€äº›æœåŠ¡å¤±è´¥è€Œé€ æˆå„ç§è¿è¡Œå¤±è´¥çš„é—®é¢˜.

Macå•èŠ‚ç‚¹ä½“éªŒ å…ˆå®‰è£…ç›¸åº”çš„å‡ ä¸ªå·¥å…·:
 ä¸‹è½½Minikube: minikube-darwin-amd64 kuberctl   åç»­å‘½ä»¤:
chmod &#43;x minikube-darwin-amd64 mv minikube-darwin-amd64 /usr/local/bin/minikube brew install kubectl éªŒè¯ç¯å¢ƒæ­£ç¡®:
æ³¨: è¿›è¡Œå‰éœ€æ¢¯å­,å¦åˆ™ç¬¬ä¸€æ­¥ä¸‹è½½localkubeå¯èƒ½å¤±è´¥,äº§ç”Ÿå¦‚ä¸‹é”™è¯¯ Error creating localkube asset from url: Error opening file asset: open /Users/xulz/.minikube/cache/localkube/localkube-v1.8.0: no such file or directory è¿›è€Œå¯¼è‡´ä¹‹åPodçš„çŠ¶æ€ä¸€ç›´æ˜¯ContainerCreating# ç¡®ä¿æœ¬æœºå·²å®‰è£…VirtualBox  minikube start kubectl run hello-minikube --image=gcr.io/google_containers/echoserver:1.4 --port=8080 # æ£€æŸ¥Podæ˜¯å¦å·²è¿è¡Œ, éœ€è¦ä»ContainerCreatingæ›´æ–°ä¸ºRunning  kubectl get pod # å¦‚æœä¸€ç›´æ˜¯ContainerCreating, æ£€æŸ¥é”™è¯¯åŸå›   kubectl describe pods # é¡µé¢åº”è¯¥å¯è®¿é—®  curl $(minikube service hello-minikube --url) # æŸ¥çœ‹Dashboard  minikube dashboard # ä¸ç”¨æ—¶æ¸…é™¤  kubectl delete deployment hello-minikube minikube stop Ubuntuå¤šèŠ‚ç‚¹ ä½¿ç”¨å·¥å…·conjure-upæ­å»ºæœ¬åœ°æµ‹è¯•/å¼€å‘ç¯å¢ƒ, æœ¬èº«åŸºäºjujuéƒ¨ç½²å·¥å…·.
å®˜æ–¹æ”¯æŒ2ç§éƒ¨ç½²æ¨¡å¼:
 kubernetes-core : (Stagingç¯å¢ƒ) 1ä¸ªMasterèŠ‚ç‚¹&#43;1ä¸ªWorkerèŠ‚ç‚¹
 canonical-kubernetes: (ç”Ÿäº§ç¯å¢ƒ) 2 masters, 3 workers, 3 etc nodes åŠAPI Load Balance
# æœ¬åœ°å®‰è£…ä½¿ç”¨kubectl sudo snap install kubectl --classic # å‡†å¤‡é˜¶æ®µ sudo snap install conjure-up --classic sudo snap install lxd newgrp lxd sudo usermod -a -G lxd xulz /snap/bin/lxd init # éœ€è¦é‡å¯æœºå™¨ sudo reboot # ç¦ç”¨IPv6, conjure-upåŸºäºçš„jujuæš‚æ—¶ä¸æ”¯æŒ lxc network set lxdbr0 ipv6.address none  ä½¿ç”¨å›¾åƒç•Œé¢å®‰è£…
conjure-up kubernetes # å¯¹äºDockerçš„è™šæ‹Ÿç½‘ç»œæ’ä»¶,è¿™é‡Œé€‰æ‹©é»˜è®¤çš„Flannel  # å®‰è£…è¿‡ç¨‹éœ€å¼€å¯æ¢¯å­, gcr.io ä¸å¯è®¿é—®  Kuberneteså¸¸ç”¨ç½‘ç»œæ’ä»¶: flannel, calico, weave
è¿™é‡Œçš„ç½‘ç»œä¹Ÿç§°ä½œSDN(è½¯ä»¶å®šä¹‰ç½‘ç»œ), é€šå¸¸åŸºäºCNI: Container Network Interface/å®¹å™¨ç½‘ç»œæ¥å£
 jujuå¸¸ç”¨å‘½ä»¤ åœ¨æŸ¥çœ‹è¿è¡Œç¯å¢ƒåŠé—®é¢˜æ’æŸ¥æ—¶å¸¸ä¼šç”¨åˆ°çš„å‘½ä»¤.
juju controllers # Models æœ‰2ä¸ªæ˜¯å› ä¸ºåŒ…å«å†…ç½®çš„ç®¡ç†æ¨¡å—default  # æŸ¥çœ‹å½“å‰çš„ Controller, Model, User  juju whoami # æ˜¾ç¤ºå½“å‰åº”ç”¨çŠ¶æ€  juju status # è¿œç¨‹ç™»å½•åˆ°master  # æ—¥å¿—å­˜æ”¾åœ¨ /var/log/juju/  juju ssh kubernetes-master/0 # è·å–å½“å‰controlleråç§°  juju switch # å¸è½½åœæ­¢controller  juju destroy-controller &amp;lt;ä¸Šä¸€æ­¥å¾—åˆ°çš„åå­—&amp;gt; --destroy-all-models # å•ç‹¬å¸è½½ model  juju destroy-model &amp;lt;model_name&amp;gt; èµ„æº  Running Kubernetes Locally via Minikube LXDå…¥é—¨ä»‹ç» k8så›½å†…é•œåƒä»‹ç» gcr.io/google-containers Hubé•œåƒ   æ³¨: gcr(Google Container Registry)çš„URLç»“æ„æ˜¯gcr.io/{PROJECT_ID}/{image}:tag,åœ¨å›½å†…ä¸å¯è®¿é—®ï¼Œè¯·ä½¿ç”¨ä»¥ä¸Šé•œåƒï¼
</content>
    </entry>
    
     <entry>
        <title>Webæµ‹è¯•åŠå·¥å…·</title>
        <url>/blog/webtest/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>testing</tag>
        </tags>
        <content type="html"> æ•´ç†ä¸‹æµ‹è¯•ç›¸å…³çš„ä¸œè¥¿åœ¨è¿™é‡Œã€‚
è¯´åˆ°Webç½‘é¡µè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œäº‹å®ä¸Šçš„å”¯ä¸€æ ‡å‡†å°±æ˜¯åŸºäºWebDriver/Seleniumçš„å®ç°äº†ã€‚
 è¯´æ˜: WebDriver ç­‰åŒäºSelenium2
 WebDriver ä»‹ç» WebDriver æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨çš„ç½‘ç«™è‡ªåŠ¨åŒ–æµ‹è¯•APIï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ æ–¹é¢
 Browser Controlï¼š navigation, snapshotting, window control, override geolocation User input simulationï¼š mouse, keyborad, file uploads, altert handling Web stuffï¼š find/query elements, evaluate JavaScript, manipulate cookies

  é¡µé¢å¯¹è±¡æ¨¡å‹ é¡µé¢å¯¹è±¡æ¨¡å‹æ˜¯æŒºæ—©å°±æœ‰çš„ä¸€ä¸ªæ¦‚å¿µï¼Œç°åœ¨ä¹Ÿæ˜¯å®ç°çš„ä¸€ä¸ªé€šç”¨æ ‡å‡†/æœ€ä½³å®è·µ.
ä»–çš„æ€æƒ³æ˜¯åº”è¯¥æš´éœ²ä½ è¦äº¤äº’çš„æœåŠ¡è€Œä¸æ˜¯å…·ä½“å®ç°ï¼Œå³ä½ çš„æµ‹è¯•æ–¹æ³•ä¸åº”è¯¥åŒ…å«æœ€åº•å±‚çš„WebDriver APIã€‚
å¦‚æœæŸäº›å¤æ‚UIçš„å±‚æ¬¡ç»“æ„åªæ˜¯ç”¨æ¥ç»„ç»‡UIï¼Œåº”è¯¥ä¸pageå¯¹è±¡åˆ†ç¦»å¼€ã€‚æ–­è¨€ä¹Ÿåº”è¯¥ä¸é¡µé¢å¯¹è±¡åˆ†ç¦»ã€‚
åŒæ—¶â€œé¡µé¢â€å¯¹è±¡å¹¶ä¸æ„å‘³ç€ä¸ºæ¯ä¸ªé¡µé¢å»ºç«‹ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼Œæ¯”å¦‚é¡µé¢æœ‰é‡è¦æ„ä¹‰çš„å…ƒç´ å¯ä»¥ç‹¬ç«‹ä¸ºä¸€ä¸ªpageå¯¹è±¡ã€‚
Martin Floweræœ€æ—©æå‡ºçš„Page Objectè‹±æ–‡ç‰ˆ/ä¸­æ–‡ç‰ˆ
é¡µé¢å¯¹è±¡çš„ä¾‹å­  Page(object)  init(self, testsetup) get_url(self, url) is_the_current_page get_url_current_page is_element_present(self, *locator) is_element_visible(self, *locator) return_to_previous_page  Base(Page) Regions  ä¸€äº›æµè¡Œè¯­è¨€çš„å·¥å…·å’Œæ¡†æ¶å®ç° Selenium Server  Docker images for Selenium Grid Server
# start the hub java -jar selenium-server-standalone-2.47.0.jar -role hub -port 4444 # start the node java -jar selenium-server-standalone-2.47.0.jar -role node -hub http://localhost:4444/grid/register # å…¶ä»– java -jar selenium-server-standalone-{version}.jar -Dwebdriver.chrome.driver=/path/to/chromedriver # Chrome Only chromedriver --port=4444 --url-base=wd/hub  Pythonå®ç°  Selenium with Python:Pythonä½¿ç”¨æ–‡æ¡£ splinter PageObjectåº“ RobotFrameworkåº“  Javaå®ç° åŸºæœ¬ç»„æˆï¼š
 UIå±‚: selenide Reportæ¡†æ¶: allure æ–­è¨€æ¡†æ¶: assertj-core/assertj-db åŸºç¡€æµ‹è¯•æ¡†æ¶: TestNG/JUnit  ç›¸å…³ç½‘ç«™/æ–‡æ¡£ï¼š
 Selenide/ç¤ºä¾‹ ç»“åˆTestNG JDK:java.awt.Robot Atlassian Selenium: ä¾›å­¦ä¹  Dagger:ç½‘æ˜“å¼€æºï¼Œä¸å†ç»´æŠ¤ï¼ŒåŒæ ·åŸºäºTestNG,ä¾›å‚è€ƒ  Node.JS/JavaScriptå®ç°  UI Recorder:é˜¿é‡Œçš„å½•åˆ¶å›æ”¾å·¥å…· Intern :å…¨åŠŸèƒ½è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…· Karma:æµè§ˆå™¨æµ‹è¯•æ‰§è¡Œå·¥å…·, å› AngularJSè€Œç”Ÿ WebdriverIO :Node.jsåº“,ç»“åˆBDDæ¡†æ¶ä½¿ç”¨ Nightwatch.js :Node.JS å®ç°çš„UIæµ‹è¯•æ¡†æ¶ Testnium:GroupOnçš„Nodeé›†æˆæµ‹è¯•åº“  å“åº”å¼å¸ƒå±€æµ‹è¯•  Galen  Jenkinsé›†æˆ SeleniumPlugin
æµè§ˆå™¨è¾…åŠ©å·¥å…· Chrome
 CSS Selector Helper for Chrome Selenium Page Object Generator  Firefox
 Firebug Firefinder : Finds HTML elements matching chosen CSS selector(s) or XPath expression xpathchecker : An interactive editor for XPath expressions &amp;ndash; Firefox Extension WebDriver Element Locator 2.0  ç¤ºä¾‹ å…ƒç´ å®šä½ CSS Selector
 .class #id element [operator: , &amp;gt; &#43; ~ ] element [id] :checked  å‚è€ƒæ–‡æ¡£CSS Selector/æµ‹è¯•é¡µ/å…³äºSelectors
å…³äºç­‰å¾… # Waiting for an element to appear driver.wait(until.elementLocated(by.id(&amp;#39;elementappearschild&amp;#39;)), 10000, &amp;#39;Could not locate the child element within the time specified&amp;#39;); # Waiting for an element to disappear //Method1: driver.wait(until.elementIsNotVisible(element),10000); //Method2 [better]: driver.wait(function() { return driver.isElementPresent(by.id(&amp;#39;elementdisappears&amp;#39;)).then(function(present) { return !present; }); }, 10000, &amp;#39;The element was still present when it should have disappeared.&amp;#39;); # Waiting for an elementâ€™s text to change to a value driver.wait(until.elementTextContains(element, &amp;#39;new&amp;#39;),10000); æ‰©å±•é˜…è¯»  å®˜æ–¹æ–‡æ¡£ Architecture of Selenium Webdriver Selenium Guidebook </content>
    </entry>
    
     <entry>
        <title>æ¥å£æµ‹è¯•åŠå·¥å…·</title>
        <url>/blog/apitest/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>testing</tag>
        </tags>
        <content type="html">  æ¥å£ï¼ˆAPIï¼‰æµ‹è¯•éšç€RESTçš„æµè¡Œæœ‰ä¸ªè¶Šæ¥è¶Šå¤šçš„åº”ç”¨ï¼Œè€ŒåŸºäºæµ‹è¯•é‡‘å­—å¡”ç†è®ºï¼Œååº•å±‚çš„æ¥å£æµ‹è¯•æ˜¯æŠ•å…¥äº§å‡ºæœ€é«˜çš„ã€‚
æ¥å£æµ‹è¯•åŸºæœ¬æ“ä½œï¼š
 ç”Ÿæˆç¬¦åˆåè®®æ ¼å¼çš„è¯·æ±‚æ•°æ® å‘æŒ‡å®šæ¥å£å‘é€æ•°æ®å¹¶æ¥å—å“åº” éªŒè¯å“åº”ç å¹¶è§£æå“åº”å†…å®¹ï¼Œç¡®ä¿ç¬¦åˆé¢„æœŸæ•°æ®  æ¥å£æµ‹è¯•çš„ç”¨ä¾‹åˆ†ä»¥ä¸‹ä¸¤ç±»ï¼š
 å•æ¥å£ç”¨ä¾‹ï¼š ä¸»è¦æµ‹è¯•ä¸åŒå‚æ•°æ•°æ®ç»„åˆå¾—åˆ°çš„å“åº”ç¬¦åˆæœŸæœ›å€¼ å¤šæ¥å£ä¸šåŠ¡ç”¨ä¾‹ ï¼š æ›´åå‘ä¸šåŠ¡çš„å®é™…åº”ç”¨åœºæ™¯ï¼Œå°½é‡æé«˜è¦†ç›–  é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¥å£æµ‹è¯•è‡ªåŠ¨åŒ–å®ç°ä¼šåŸºäºå•å…ƒæµ‹è¯•æ¡†æ¶ä½œä¸ºæµ‹è¯•è„šæœ¬çš„è¿è¡Œé©±åŠ¨, ä¸ºå‡å°‘æ•°æ®ä¾èµ–é€šå¸¸ä¼šå¼•å…¥Mockæ•°æ®. æœ€ç»ˆéƒ¨ç½²å½¢å¼é€šå¸¸ä¸CIç³»ç»Ÿ(Jenkins)æ•´åˆ.
ä»¥ä¸‹ä¸ºæ¥å£æµ‹è¯•çš„ç›¸å…³å·¥å…·/æ¡†æ¶:
åŸºç¡€åº“ Javaçš„ç”Ÿæ€ç›¸å¯¹æˆç†Ÿä¸°å¯Œ, ç‰µæ¶‰åˆ°å‡ ä¸ªå¸¸ç”¨åº“:
 rest-assuredï¼š æ›´å‹å¥½çš„DSLæµ‹è¯•è¯­æ³• Hamcrest ï¼š çµæ´»çš„åŒ¹é…è¡¨è¾¾å¼(matchers),æ–°ç‰ˆJUnitå·²å†…ç½®;æ”¯æŒå¤šè¯­è¨€ WireMock: HTTPæœåŠ¡Mockå·¥å…·  æµè¡Œå·¥å…· Diffy ï¼š Twitterå¼€æºçš„å›å½’æµ‹è¯•å·¥å…·, é€šè¿‡ä»£ç†çš„å½¢å¼æ¯”è¾ƒå“åº”å†…å®¹,éªŒè¯æ–°ä»£ç æ˜¯å¦å¼•å…¥ç¼ºé™·
æ‰©å±•é˜…è¯» ç›¸å…³é“¾æ¥  rest-assured Hamcrest WireMock Diffyï¼šScalaå¼€å‘  å…¶ä»– æœ‰äº›é¡¹ç›®å·²ä¸å†ç»´æŠ¤ï¼Œä¾›å­¦ä¹ å‚è€ƒã€‚
 WeTest:å¾®åšå¼€æºçš„åŸºäºJUnit4çš„è½»é‡çº§æ¥å£è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ zato-apitestï¼š pythonå®ç°ï¼Œç•¥æ˜¾ç¹ç  </content>
    </entry>
    
     <entry>
        <title>ç”¨Makefileç®€åŒ–é‡å¤çš„å¤šä¸ªå‘½ä»¤</title>
        <url>/blog/makefile/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html">  ç»å¸¸ä¼šé€šè¿‡ç¼–è¯‘å®‰è£…ä¸€äº›LinuxåŒ…,æœ€ç†Ÿæ‚‰çš„å°±æ˜¯make test, make install è¿™ç±»å‘½ä»¤äº†,ä»¥ä¸ºmakeåªé€‚ç”¨äºç¼–è¯‘å®‰è£….
å®é™…ä¸Šå‘ç°Makefile/makefileåœ¨ç®€åŒ–ä¸€äº›å¸¸ç”¨å‘½ä»¤(å¤šè¡Œå‘½ä»¤æˆ–é•¿å‘½ä»¤)æ—¶ä¹Ÿéå¸¸æ–¹ä¾¿.
# Makefile install: @go get github.com/revel/cmd/revel @dep ensure server: revel run github.com/xulz/webapp Makefileè§„åˆ™ &amp;lt;ç›®æ ‡&amp;gt;:&amp;lt;æ‰§è¡Œçš„å‰ææ¡ä»¶,å³æœ‰æ–‡ä»¶æ›´æ–°æ‰æ‰§è¡Œ&amp;gt;
(tab) å…·ä½“çš„å‘½ä»¤
 é»˜è®¤æ‰§è¡Œç¬¬ä¸€ä¸ªç›®æ ‡. åœ¨å‘½ä»¤å‰æ·»åŠ @ è¡¨ç¤ºä¸æ‰“å°æ­£åœ¨æ‰§è¡Œçš„å‘½ä»¤  Makefileçš„ä¸€äº›è¯­æ³• # å®šä¹‰å˜é‡, ä½¿ç”¨ $(LDIR) å¼•ç”¨ LDIR =../lib è‡ªåŠ¨åŒ–å˜é‡:
 $&amp;lt; è¡¨ç¤ºæ‰€æœ‰çš„ä¾èµ–ç›®æ ‡é›†
 $@ è¡¨ç¤ºç›®æ ‡é›†
  è°ƒè¯• å¸¦å‚æ•° -næˆ–&amp;ndash;just-print, åªæ˜¾ç¤ºå‘½ä»¤è€Œä¸æ‰§è¡Œ.
æ‰©å±•é˜…è¯»  è·Ÿæˆ‘ä¸€èµ·å†™Makefile/å¦ä¸€ä¸ªæ•´ç†ç‰ˆæœ¬ å¦‚ä½•è°ƒè¯•MAKEFILEå˜é‡  </content>
    </entry>
    
     <entry>
        <title>ç”¨Jupyter/iPython Notebookåšç¬”è®°</title>
        <url>/blog/jupyter-ipython-notebook/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>python</tag>
        </tags>
        <content type="html">  ipythonä½œä¸ºä¸€ä¸ªå¿…å¤‡çš„å­¦ä¹ /è°ƒè¯•ç¯å¢ƒ, notebookå¯ä»¥çœ‹åšå…¶å¢å¼ºç‰ˆ, æ”¯æŒMarkdownæ ¼å¼è¯´æ˜, å¾ˆé€‚åˆç”¨ç¬”è®°æˆ–è€…æ¼”ç¤º/åŸ¹è®­ç”¨é€”,åŸºæœ¬æ˜¯æœºå™¨å­¦ä¹ çš„æ ‡é….
å®‰è£…åŠè¿è¡Œ python3 -m pip install jupyter notebook jupyter notebook # æ–°ç‰ˆçš„iPythonè¦æ±‚Python 3.3ä»¥ä¸Š,å› æ­¤å»ºè®®åœ¨python3ç¯å¢ƒä½¿ç”¨ å¦‚æœè¦åœ¨Python2.7è¿è¡Œ,å®‰è£…IPython5.7åˆ†æ”¯.
pip install ipython ipython å¦‚æœåœ¨æœ¬åœ°æ²¡æœ‰è¿è¡Œç¯å¢ƒ,åˆæƒ³æ‰“å¼€ä¸€ä¸ªåŒ…å«ç¬”è®°çš„GitHubä»“åº“, å¯ä»¥ä½¿ç”¨binderåœ¨äº‘ç«¯æ‰“å¼€.
å¤šç”¨æˆ·ç‰ˆæœ¬  jupyterhub  æ‰©å±•é˜…è¯»  å®˜ç½‘ ç”¨Jupyteråšslides/ppt Pythonå­¦ä¹ è¯¾ç¨‹  </content>
    </entry>
    
     <entry>
        <title>ä½ çš„ç½‘ç«™è´¦å·å¯†ç å®‰å…¨å—</title>
        <url>/blog/check-your-password/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>security</tag>
        </tags>
        <content type="html"> ä»Šå¤©çœ‹äº†Djangoå¼€å‘è€…çš„ä¸€ç¯‡æ–‡ç« ,å…³äºwebå®‰å…¨çš„å­é¡¹ç›®, å…¶ä¸­æåˆ°äº†ä¸€ä¸ªç”¨äºæ£€æµ‹ç”¨æˆ·å¯†ç æ˜¯å¦å®‰å…¨çš„API.
ä¸åŒäºæ™®é€šçš„å¯†ç å¼ºåº¦æ£€æµ‹,å®ƒçš„æ£€æµ‹åŸç†åŸºäºæœ€è¿‘è¿™äº›å¹´å¤§å‹çš„äº’è”ç½‘å…¬å¸æ•°æ®åº“æ³„æ¼äº‹ä»¶,æ¯”å¦‚CSDN,å¤©æ¶¯,HiAPKå®‰å“ç½‘,ç½‘æ˜“ç­‰.
å¯¹æ™®é€šç”¨æˆ·,æä¾›ä¸¤ä¸ªä¸»è¦çš„ç½‘é¡µæŸ¥è¯¢åŠŸèƒ½:
 ä½ é‚®ä»¶è´¦æˆ·çš„å¯†ç æ˜¯å¦å·²æ³„æ¼[1] ä½ æ­£åœ¨ä½¿ç”¨çš„å¯†ç æ˜¯å¦å­˜åœ¨äºæ³„æ¼æ•°æ®åº“åŠè¢«å…¶ä»–ç”¨æˆ·æ³„æ¼çš„æ¬¡æ•°[2]   é€šè¿‡APIç”¨Pythonæ£€æµ‹çš„ä¾‹å­ import hashlib password = &amp;#39;swordfish&amp;#39; digest = hashlib.sha1(password.encode(&amp;#39;utf-8&amp;#39;)).hexdigest().upper() print(digest) # 4F57181DCAADE980555F2CE6755CA425F00658BE ç„¶åè®¿é—® https://api.pwnedpasswords.com/range/4F571Â  (URLæœ€åçš„å‚æ•°æ˜¯ä»¥ä¸Šå“ˆå¸Œæ‘˜è¦çš„å‰5ä½)
åœ¨å“åº”å†…å®¹ä¸­æœç´¢ä»¥ä¸Šå“ˆå¸Œæ‘˜è¦çš„å‰©ä½™å­—ç¬¦ 81DCAADE980555F2CE6755CA425F00658BE
å¦‚æœæ£€ç´¢åˆ°,åˆ™å†’å·:åé¢çš„æ•°å­—å°±æ˜¯è¢«æ³„æ¼çš„æ¬¡æ•°, å¦‚æœæˆç™¾ä¸Šåƒäº†,ä¸€å®šè¦ä¿®æ”¹ä½ çš„å¯†ç .
å¯†ç åŸºæœ¬åŸåˆ™  å¯†ç åˆ†çº§: æ ¹æ®æ˜¯å¦æ¶‰åŠæ”¯ä»˜å’Œéšç§,æœ€èµ·ç åˆ†æˆå¼ºå¯†ç å’Œå¼±å¯†ç ä¸¤ç±»,å¼ºå¯†ç å®šæœŸæ›´æ–°(æ¯å¹´). å¦‚æœæ˜¯ä¸€æ¬¡æ€§æ³¨å†Œç½‘ç«™, ä½¿ç”¨å›ºå®šçš„å¼±å¯†ç . ä¸è¦ä½¿ç”¨å…¶ä»–äººä¹Ÿå¸¸ç”¨çš„å¼±å¯†ç æˆ–å®¹æ˜“çŒœåˆ°çš„å†…å®¹. å¼ºå¯†ç å®šä¹‰: 8ä½åŠä»¥ä¸Š,åŒ…å«å¤§å°å†™å­—æ¯,æ•°å­—å’Œç¬¦å·   æ³¨: å…¶å®å¾ˆæ—©ä¹‹å‰ä½¿ç”¨è¿‡2æ¬¡è¿™ä¸ªç½‘ç«™,è®°å½•ä¸‹è®©æ›´å¤šäººçŸ¥é“.
</content>
    </entry>
    
     <entry>
        <title>å›åˆ°WordPress</title>
        <url>/play/blog-wordpress/</url>
        <categories>
          <category>Play</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æœ€è¿‘å‡ å¹´åšå®¢ç»å† 3å¹´å‰æ”¹ç”¨Evernoteåšç¬”è®°,å› ä¸ºå¾ˆå°‘å†™åšå®¢çš„åŸå› åœæ‰äº†å›½å¤–å…±äº«ä¸»æœºçš„wordpress,ä¹‹å‰çš„å†…å®¹ä¹Ÿè¿ç§»åˆ°äº†Bloggerå¹³å°(å›½å†…ä¸å¯è®¿é—®,ä»…ä½œä¸ºå¤‡ä»½).
åæ¥ä¸ºäº†å­¦ä¹ gitå’Œmarkdown,ä¹Ÿæ—¶å¸¸åœ¨GitHubä¸Šå†™ç¬”è®°.
ä¹…é—»Goå¤§åå·²ä¹…,åœ¨å¬äº†æ’­å®¢å†…æ ¸ææ…ŒæŸæœŸè®²é™æ€åšå®¢å,å°è¯•äº†é«˜æ€§èƒ½çš„Hugo.
å»å¹´æ€»æ”¶åˆ°é˜¿é‡Œäº‘çš„å¹¿å‘Šä¿ƒé”€,ä¹Ÿæƒ³æœ‰ä¸€ä¸ªç§»åŠ¨ç‰ˆè°ƒè¯•ç³»ç»Ÿ,å°±è´­ä¹°äº†äº‘ä¸»æœº,æŠŠåŸŸåä¹Ÿè¿åˆ°äº†å›½å†….
åœ¨ä¸Šé¢éƒ¨ç½²äº†é™æ€åšå®¢, ç”±äºHugo/Lektorç¼ºä¹å¥½ç”¨çš„ä¸»é¢˜,æœ€åä½¿ç”¨äº†å·²æœ‰æ‰€äº†è§£çš„Hexo. ä¹Ÿå°±æœ‰äº†å‰ä¸¤ç¯‡æ­å»ºåšå®¢çš„è®°å½•æ–‡ç« .
WordPress åˆå›åˆ°WordPress,å…¶å®æ˜¯ä¸ºäº†è®©å†™åšå®¢è¿™ä»¶äº‹å˜å¾—ç®€å•. ä¸ç®¡é™æ€åšå®¢è¿˜æ˜¯æ–°ç”Ÿä»£Ghost,æœ€ç»ˆç”¨ä¸‹æ¥çš„æ„Ÿè§‰æ˜¯è¡¨é¢çœ‹ä¼¼ç®€æ´çš„æ–°åšå®¢ä½¿ç”¨èµ·æ¥å¹¶ä¸ç®€å•.
ä¾‹å¦‚é™æ€åšå®¢, éœ€è¦gitç‰ˆæœ¬ç®¡ç†,æ¯æ¬¡ä¿®æ”¹éœ€è¦commit/push, Hexoéœ€è¦generate/deploy(è™½ç„¶è¿™ä¸€æ­¥åœ¨Github Pageså¯ä»¥hookè‡ªåŠ¨åŒ–),æœ‰æ—¶å€™è¿˜éœ€è¦clean,è€Œç”Ÿæˆé™æ€é¡µé¢/rsyncå¹¶ä¸åƒHugoé‚£ä¹ˆæ™ºèƒ½é«˜æ•ˆ.
ç”±äºäº‘ä¸»æœºå‡ ä¹æ²¡æœ‰èµ„æºå ç”¨ç‡,å®é™…ä¸Šæ–°ç‰ˆWordPressæœ‰å¾ˆå¤§æ”¹è¿›,åœ¨æ’ä»¶ä¼˜åŒ–ä¹‹å,å®‰è£…å‰åèµ„æºå ç”¨å‡ ä¹æ²¡æœ‰å˜åŒ–.
ä¹‹å‰WordPressä½¿ç”¨æ—¶é—´æ¯”è¾ƒé•¿,å¯¹æ’ä»¶/ä¸»é¢˜æ¯”è¾ƒç†Ÿæ‚‰,åªè®°å½•ä¸‹å…³é”®æ­¥éª¤.

åœ¨Ubuntu16ä¸Šå®‰è£…å¯å‚è€ƒDOä¸Šçš„è¿™ç¯‡æ–‡ç« .
# å®‰è£…php7ç¯å¢ƒ  sudo apt-get install php-fpm php-mysql sudo apt-get install php7.0-mysql php7.0-curl php7.0-gd php7.0-mbstring php7.0-mcrypt php7.0-xml php7.0-xmlrpc sudo systemctl restart php7.0-fpm # Nginxæ›´æ–°ç”¨æˆ·  vi /etc/nginx/nginx.conf user www-data; # é»˜è®¤nginx  # è°ƒè¯•ç”¨,æŸ¥çœ‹å½“å‰phpç”¨æˆ·ç»„  ps aux | grep php # æ–‡ä»¶å¤¹æƒé™  sudo chown -R xulz:www-data /var/www/html sudo find /var/www/html -type d -exec chmod g&#43;s {} \; sudo chmod g&#43;w /var/www/html/wp-content sudo chmod -R g&#43;w /var/www/html/wp-content/themes sudo chmod -R g&#43;w /var/www/html/wp-content/plugins</content>
    </entry>
    
     <entry>
        <title>Linux Bashç¬”è®°</title>
        <url>/blog/linux-bash/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> è¿™é‡Œä¸»è¦è®°å½•Linuxç³»ç»Ÿçš„é»˜è®¤shell Bashç”¨æ³•.

å¿«æ·é”® å½“å‰å‘½ä»¤ç¼–è¾‘ Ctrl &#43; A : å…‰æ ‡ç§»åˆ°å¼€å¤´
Ctrl &#43; E : å…‰æ ‡ç§»åˆ°ç»“å°¾
Ctrl &#43; U : åˆ é™¤æ•´è¡Œ
Ctrl &#43; W : åˆ é™¤å‰ä¸€ä¸ªå•è¯
å†å²å‘½ä»¤ Ctrl &#43; R : å†å²å‘½ä»¤æŸ¥æ‰¾
^old^new : æ›¿æ¢ä¸Šä¸€ä¸ªå‘½ä»¤å­—ç¬¦ä¸²
sudo !! : sudoæ‰§è¡Œä¸Šä¸€ä¸ªå‘½ä»¤
Alt &#43; . : æ‰“å°ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åå‚æ•°
!$ : ç‰¹æ®Šå˜é‡,ä»£è¡¨ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åå‚æ•°
ç›®å½•åˆ‡æ¢ cd &amp;ndash; : åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªå·¥ä½œç›®å½•
cd ~ : åˆ‡æ¢åˆ°Homeç›®å½•
Bashç‰¹å®šç”¨æ³• ç¯å¢ƒå˜é‡ # Linux vi ~/.bash_profile export PATH=&amp;#34;/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin&amp;#34; # Mac vi /etc/paths shebang #!/bin/bash # è„šæœ¬æ‰§è¡Œæ—¶å‘Šè¯‰shellç”¨å“ªä¸ªç¨‹åºè§£é‡Šè„šæœ¬ é‡å®šå‘/ç®¡é“ 2&amp;gt;&amp;amp;1 # 1 ä»£è¡¨ stdout, 2 ä»£è¡¨ stderr. # 2&amp;gt;1 å¯ä»¥çœ‹åšé‡å®šå‘ stderr åˆ° stdout.å®é™…ä¸Šè¢«è§£é‡Šä¸º &amp;#34;é‡å®šå‘ stderr åˆ°æ–‡ä»¶åä¸º 1çš„æ–‡ä»¶&amp;#34;. # &amp;amp; æŒ‡å‡ºæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦è€Œä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ åˆ¶ä½œåŒ…å«äºŒè¿›åˆ¶æ•°æ®çš„å®‰è£…è„šæœ¬ å‚è€ƒ1/2
Bash è„šæœ¬ # è°ƒè¯• set -x # å‡ºé”™åé€€å‡º set -e å¸¸ç”¨å˜é‡ # æ˜¾ç¤ºå½“å‰æ—¥æœŸ $(date &#43;%Y-%m-%d) subshell ä½¿ç”¨(åœ¨å­å‘½ä»¤èŒƒå›´æœ‰æ•ˆ), å¦‚ä¸´æ—¶åˆ‡æ¢ç›®å½•ç­‰.
å¾ªç¯ while [$port -lt 1024] do port = &amp;#39;expr $port &#43; 1&amp;#39;; done å¤šåˆ†æ”¯é€‰æ‹© case &amp;#34;$1&amp;#34; in start) ./start.sh ;; stop) ./stop.sh ;; *) echo &amp;#34;Usage: $0 {start|stop}&amp;#34; exit 1 ;; esac HereDoc ä¹Ÿè®¸ä½ æ²¡å¬è¿‡è¿™ä¸ªåå­—,ä½†ä¸€å®šè§è¿‡è¿™ä¸ªç”¨æ³•.
å®ƒä¼šæŠŠå¼€å¤´çš„å•è¯åšæ ‡è®°,æå–ä¸­é—´çš„å†…å®¹ä½œä¸ºæ ‡å‡†è¾“å…¥stdin.
# æ ¼å¼ &amp;lt;&amp;lt;[-]END_TEXT here-document END_TEXT # ç¤ºä¾‹1 cat &amp;lt;&amp;lt;EOF My home directory is $HOME EOF # è¯´æ˜: é»˜è®¤ä¼šè§£é‡Šå†…å®¹ä¸­çš„å˜é‡ç¬¦å· # å¦‚æœè¦ä¿æŒåŸæ ·,å¼€å¤´è¦åŠ ä¸Šå¼•å·&amp;#39;EOF&amp;#39; # å¦‚æœè¦å»æ‰æ ¼å¼ä¸­çš„tabç¬¦å·,å‰é¢åŠ -EOF # ç¤ºä¾‹2,åˆ©ç”¨å®šå‘ç¬¦ cat &amp;lt;&amp;lt;EOF &amp;gt; file My home dir is $HOME EOF # ç²¾ç®€æ ¼å¼ fmt -t -w 20 &amp;lt;&amp;lt;&amp;lt; &amp;#39;Wrap this silly sentence.&amp;#39; Troubleshooting tab ä¸èƒ½è‡ªåŠ¨è¡¥å…¨?  sudo dpkg-reconfigure dash é€‰æ‹©no (åŸå› : é»˜è®¤åˆ›å»ºçš„æ–°ç”¨æˆ·ä½¿ç”¨çš„dash)
 shè„šæœ¬å¼‚å¸¸ï¼š/bin/sh^M:bad interpreter: No such file or directory  :set ff=unix
 èµ„æº  interactive Shell Programming tutorial Bashæ–°æ‰‹æŒ‡å— Bash Guide Advanced Bash-Scripting Guide </content>
    </entry>
    
     <entry>
        <title>Linuxæ–‡ä»¶æŸ¥æ‰¾/å†…å®¹æœç´¢å‘½ä»¤</title>
        <url>/blog/linux-search/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> Linuxçš„æ–‡ä»¶æ£€ç´¢æˆ–è€…æ—¥å¿—æ–‡ä»¶å…³é”®å­—æœç´¢åº”è¯¥æ˜¯å¾ˆå¸¸ç”¨çš„å·¥ä½œåœºæ™¯, è¿™é‡Œæ±‡æ€»å¸¸è§çš„å‘½ä»¤ç”¨æ³•.

find # åªæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶ find . -type f -name &amp;#39;*.py&amp;#39; # åªæŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶ find . -type f -name &amp;#39;*.py&amp;#39; # åœ¨æ‰€æœ‰ç›®å½•æŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶å find / -type f -name httpd.conf # å¿½ç•¥å¤§å°å†™ find . -iname # å¿½ç•¥ç›®å½• find / -xdev -type f -size &#43;100M find / -size &#43;100M -not -path &amp;#39;/proc/*&amp;#39; æŸ¥æ‰¾å¤§æ–‡ä»¶ find . -type f -size &#43;100M -exec ls -lh {} \; | awk &amp;#39;{ print $8 &amp;#34;: &amp;#34; $5 }&amp;#39; # æ”¯æŒæ–‡ä»¶åå«ç©ºæ ¼ find $1 -type f -exec stat --format &amp;#39;%Y :%y %n&amp;#39; {} \; | sort -nr | cut -d: -f2- | head # æ‰§è¡Œæ›´å¿« find $1 -type f | xargs stat --format &amp;#39;%Y :%y %n&amp;#39; | sort -nr | cut -d: -f2- | head # æœ€å¸¸ç”¨  ç»Ÿè®¡ä»£ç è¡Œæ•° find . -name â€˜.pyâ€™ | xargs wc -l (find ./ -name &amp;#39;.py&amp;#39; -print0 | xargs -0 cat)|wc -l # æ³¨: -print0 | xargs -0 == -X è§„é¿ç‰¹æ®Šå­—ç¬¦ grep/egrep  grep [OPTIONS] PATTERN [FILE&amp;hellip;] grep [OPTIONS] &amp;ldquo;text string to searchâ€ directory-path
 -w # åŒ¹é…å•è¯ -i # å¿½ç•¥å¤§å°å†™ -color -R, -r #recursively, é€’å½’çš„æŸ¥æ‰¾å­æ–‡ä»¶å¤¹ -n # æ˜¾ç¤ºè¡Œå· -a, --text # æŠŠäºŒè¿›åˆ¶æ–‡ä»¶å½“ä½œtextå¤„ç† --exclude: --exclude=*.o --include: --include=*.{c,h} # åªæ£€ç´¢åŒ¹é…çš„æ–‡ä»¶ --exclude-dir: --exclude-dir={dir1,dir2,*.dst} --include-dir: -o # åªæ˜¾ç¤ºåŒ¹é…è¡Œ -l # åªæ˜¾ç¤ºåŒ¹é…æ–‡ä»¶å | # åŒ¹é…å¤šä¸ª æ˜¾ç¤ºä¸Šä¸‹æ–‡ -B num # æ˜¾ç¤ºåŒ¹é…å‰å¤šå°‘è¡Œ -A num # æ˜¾ç¤ºåŒ¹é…åå¤šå°‘è¡Œ # ç¤ºä¾‹ grep -B 3 -A 2 foo README.txt # å¦‚æœæ˜¾ç¤ºç›¸åŒè¡Œçš„ä¸Šä¸‹æ–‡,å¯ä½¿ç”¨ -C num # æˆ–è€… -n æŸ¥æ‰¾æŸæ—¶é—´åŒºé—´ grep &amp;#34;31/Mar/2002:19:3[1-5]&amp;#34; logfile egrep &amp;#39;^[^ ]&#43; (0[89]|1[0-9]|2[012]):&amp;#39; # awkçš„æ–¹å¼ awk -v from=&amp;#34;12:52:33&amp;#34; -v to &amp;#34;12:59:33&amp;#34; &amp;#39;$1&amp;gt;=from &amp;amp;&amp;amp; $1&amp;lt;=to&amp;#39; foo.log awk &amp;#39;$0 &amp;gt;= &amp;#34;13/05/13 07:50&amp;#34; &amp;amp;&amp;amp; $0 &amp;lt;= &amp;#34;13/05/23 01:58&amp;#34;&amp;#39; # sedçš„æ–¹å¼ sed -rne &amp;#39;/&amp;lt;timestamp&amp;gt;/,/&amp;lt;timestamp&amp;gt;/ p&amp;#39; &amp;lt;file&amp;gt; # ç¤ºä¾‹ sed -n &amp;#39;/Feb 23 13:55/,/Feb 23 14:00/p&amp;#39; /var/log/mail.log sed -n &amp;#39;/Feb 21 23:08:19/,/Feb 21 23:08:23/p&amp;#39; daemon.log awk/sed awk &amp;#39;NR&amp;gt;=10&amp;amp;&amp;amp;NR&amp;lt;=20&amp;#39; in.log &amp;gt; out.log sed -n &amp;#39;100,1000 p&amp;#39; in.log &amp;gt; out.log sed  sed -i &amp;rsquo;s/foo/bar/gI&amp;rsquo; hello.txt
  -i ç›´æ¥æ›¿æ¢åŸæ–‡ -i.bak åŒæ—¶ä¿å­˜å¤‡ä»½ s æ›¿æ¢ / åˆ†å‰²ç¬¦ï¼Œä¹Ÿå¸¸ç”¨&#43;ä»£æ›¿ g å…¨å±€æ›¿æ¢è€Œä¸æ˜¯ç¬¬ä¸€é¡¹ I ä¸åŒºåˆ†å¤§å°å†™  sort/uniq/cut/tr sort  -n ä»¥æ•°å­—è€Œéå­—æ¯æ’åº -h æ›´å¯è¯»çš„æ–¹å¼æ˜¾ç¤º -r å€’åºæ’åˆ— -k 5 ç¬¬äº”åˆ— -t, &amp;ndash;field-separator=SEP # æŒ‡å®šåˆ†éš”ç¬¦ -s, &amp;ndash;stable # ç¨³å®šæ’åº,ç”¨äºå¤šåˆ—æ’åº  uniq  -u åªæ˜¾ç¤ºå”¯ä¸€è¡Œ -d åªæ˜¾ç¤ºé‡å¤è¡Œ -c æ˜¾ç¤ºé‡å¤æ¬¡æ•°  cut  -d&amp;rsquo;:&amp;rsquo; ä»¥å†’å·ä¸ºåˆ†éš”ç¬¦,é»˜è®¤åˆ†éš”ç¬¦ä¸ºtab -f1-4 é€‰å–1~4åˆ—  tr è½¬æ¢/æ›¿æ¢/åˆ é™¤å­—ç¬¦ tr -d &amp;#39;input-characters&amp;#39; # åˆ é™¤å­—ç¬¦ tr -s &amp;#39;\n&amp;#39; # æŠŠé‡å¤å­—ç¬¦å‹ç¼©ä¸ºä¸€ä¸ª,sä»£è¡¨squeeze tr &amp;#34;[:lower:]&amp;#34; &amp;#34;[:upper:]&amp;#34; &amp;lt; filename # è½¬æ¢å¤§å°å†™ tr -cd &amp;#34;[:print:]&amp;#34; &amp;lt; filename # å–æ¶ˆéæ‰“å°å­—ç¬¦, cä»£è¡¨complement æ‰©å±• xargs  xargs [options] [command] æ„é€ å‚æ•°åˆ—è¡¨ç„¶åæ‰§è¡Œ. å°†æ ‡å‡†è¾“å…¥æˆ–ç®¡é“è½¬æ¢ä¸ºå‘½ä»¤è¡Œçš„å‚æ•°,å¦‚æœçœç•¥commandåˆ™é»˜è®¤ä½¿ç”¨echo. é€šå¸¸ç”¨ä½œæ›¿ä»£findçš„-execå‚æ•°,å› ä¸ºxargså¦‚æœå‡ºé”™ä¸ä¼šåœæ­¢æ‰§è¡Œ.
 å¸¸ç”¨é€‰é¡¹:
 -0 ,&amp;ndash;null ä»¥ç©ºå­—ç¬¦ä¸ºç»“æŸç¬¦, å’Œfind -print0ç»“åˆä½¿ç”¨ -I_ ä»¥_ä¸ºæ›¿æ¢å­—ç¬¦ -L max-lines æœ€å¤šä¸ªéç©ºè¡Œæ‰§è¡Œä¸€æ¬¡ -I replace-str æ›¿æ¢å­—ç¬¦ä¸²,ä»¥æ¢è¡Œç¬¦ä¸ºåˆ†å‰²ç¬¦  -exec ç³»ç»ŸåŒ…æŸ¥æ‰¾ yum # æŸ¥æ‰¾åŒ…å«æŸå‘½ä»¤çš„åŒ… yum provides mpstat # æŸ¥è¯¢å®‰è£…åŒ…å rpm -qpi ***.rpm  èµ„æº  SEDå•è¡Œè„šæœ¬å¿«é€Ÿå‚è€ƒ </content>
    </entry>
    
     <entry>
        <title>pytestæµ‹è¯•æ¡†æ¶</title>
        <url>/blog/pytest/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>testing</tag>
        </tags>
        <content type="html"> å•å…ƒæµ‹è¯•æœ€åˆæµè¡Œæ˜¯ä»JUnit,è€Œä»–çš„å‘æ˜è€…Kent Beckå¤§ç¥çš„ç»å…¸åä½œ&amp;lt;æµ‹è¯•é©±åŠ¨å¼€å‘&amp;gt;è¿™æœ¬å°ä¹¦å´å¼•é¢†äº†TDDçš„é£æ½®,äº§ç”Ÿäº†xUnitå„ä¸ªè¯­è¨€ç³»åˆ—.
åˆæ¬¡æ¥è§¦pytest,æ„Ÿè§‰ä¸åƒä¸ªxUnit,å› ä¸ºæ—¢çœ‹ä¸åˆ°å¯¹TestCaseçš„ç»§æ‰¿,ä¹Ÿæ‰¾ä¸åˆ°Setup/Teardownè¿™äº›å»ºç«‹/é”€æ¯å‡½æ•°.å½“ç„¶è¿™äº›åŸºæœ¬åŠŸèƒ½è‚¯å®šæ˜¯æ”¯æŒçš„.
pytestè™½ç„¶ä½œä¸ºä¸€ä¸ªPythonå•å…ƒæµ‹è¯•æ¡†æ¶çš„æ‰©å±•ç‰ˆ, ä½†æ˜¯å®ƒä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»çš„ç‰¹æ€§ä¹Ÿå¾ˆé€‚åˆåšåŠŸèƒ½æµ‹è¯•, å…¶ä¸­çš„ç²¾åå°±æ˜¯fixtures.

py.test ç”¨æ³• pytestæä¾›ä¸°å¯Œçš„å‘½ä»¤è¡Œå‚æ•°.
pytest -h # å…¶ä»–ç”¨æ³• -q, --quiet -s --capture=no --cache-show --cache-clear ä¸‹é¢ä»¥æµ‹è¯•è¿‡ç¨‹ä¸ºåº,å±•å¼€å„è¿‡ç¨‹ä¸»è¦ç”¨æ³•.
é…ç½® pytesté…ç½®æ–‡ä»¶: pytest.ini|tox.ini|setup.cfg
æ”¶é›† pytest.mark  æ³¨: åªä½œç”¨äºtests,å¯¹fixtureæ— æ•ˆ
 å‘½ä»¤è¡Œæµ‹è¯•ç”¨ä¾‹é€‰æ‹©: -k EXPRESSION : æŒ‰æ­£åˆ™é€‰å– -m MARKEXPR : ç¤ºä¾‹ &amp;#34;not (slow or long)â€ --ignore=path å¿½ç•¥éƒ¨åˆ†æµ‹è¯•é›† è¿è¡Œ åŸºæœ¬ç”¨æ³•:
 pytest test_mod.py::TestClass::test_method
 å‘½ä»¤è¡Œè¾…åŠ©é€‰é¡¹:
--lf, --last-failed rerun only the tests that failed at the last run (or all if none failed) # é€€å‡ºæ¡ä»¶: -x, --exitfirst å‡ºé”™åé€€å‡º --maxfail=num å¤±è´¥Næ¬¡åé€€å‡º æŠ¥å‘Š # éœ€è¦å…ˆå®‰è£…pytest-htmlæ’ä»¶ py.test --html=report.html # å‘½ä»¤è¡Œé€‰é¡¹: --durations=N # æ˜¾ç¤ºæœ€æ…¢çš„æ‰§è¡Œ (N=0 for all) fixture fixturesé€šå¸¸å­˜æ”¾åœ¨æ ¹ç›®å½•çš„conftest.pyæˆ–å­æ–‡ä»¶å¤¹çš„conftest.py(å¯ç”¨æ¥è¦†ç›–å¹¶é‡æ–°å®šä¹‰).
fixtureçš„ç”¨æ³• @pytest.fixture()
ä¸»è¦å‚æ•°:
 scope: session/module/class
 params: å‚æ•°åŒ–,ä¼šæ‰§è¡Œå¤šæ¬¡
 autouse=True
  tear downå‡½æ•°ä½“å®šä¹‰:
 ä»£ç å—ä¸ºyieldä¹‹åçš„æ‰€æœ‰è¯­å¥
 æˆ–è€…ä½¿ç”¨request.addfinalizer(fin)çš„æ–¹å¼ (å¥½å¤„:åŠæ—¶å‘ç”Ÿå¼‚å¸¸ä¹Ÿä¼šæ‰§è¡Œ)
  å‘½ä»¤è¡Œè¾…åŠ©é¡¹ --fixtures æ˜¾ç¤ºå¯ç”¨çš„fixture --setup-only only setup fixtures, do not execute tests. --setup-show show setup of fixtures while executing tests. --setup-plan show what fixtures and tests would be executed but don&amp;#39;t execute anything. åŠŸèƒ½ä»‹ç» Fixtures è£…é¥°å™¨æ ‡è®°å‡½æ•°ä¸ºfixture, æ€»ä½“ä¸Šfixturesæä¾›:
 å•å…ƒæµ‹è¯•æ¡†æ¶çš„åŸºæœ¬åŠŸèƒ½
 ä¾èµ–æ³¨å…¥: ä¸€äº›å…±æœ‰å‡½æ•°å€¼/å¸®åŠ©å‡½æ•°/Mockç­‰
 æµ‹è¯•æ•°æ®å‚æ•°åŒ–
 çµæ´»æ€§ç”±ä¸åŒçš„ä½œç”¨èŒƒå›´å’Œç›®å½•çº§conftest.pyç­‰æä¾›
  monkeypatch Monkeypatching/mocking modules and environments.
 monkeypatch.setattr()
 monkeypatch.delattr()
  æ‰©å±•èµ„æº æµè¡Œæ’ä»¶  pytest-variables : é€šè¿‡jsonæ–‡ä»¶å®šä¹‰å…±äº«å˜é‡ pytest-html : HTMLæµ‹è¯•æŠ¥å‘Š pytest-selenium  æ–‡æ¡£  conftestçš„ç”¨æ³• é…ç½®æ–‡ä»¶ APIæ¥å£å’Œå†…ç½®æ–¹æ³• </content>
    </entry>
    
     <entry>
        <title>Linuxç³»ç»Ÿå‘½ä»¤</title>
        <url>/blog/linux-system-command/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> Linuxç³»çµ±å‘½ä»¤, å®Œæˆä¸€äº›å¸¸è¦‹ä»»å‹™.

å¸¸ç”¨å‘½ä»¤ä½¿ç”¨å¸®åŠ© ç”¨ç¤ºä¾‹æ–¹å¼çš„ç®€åŒ–ç‰ˆmanæ‰‹å†Œ, tldr
sudo npm install -g tldr ç”¨æˆ·ç®¡ç† # æ·»åŠ ç”¨æˆ· sudo useradd -m xulz sudo passwd xulz sudoæƒé™ # åˆ›å»ºsudoç»„ç”¨æˆ· useradd -aG sudo xulz # æ·»åŠ åˆ°sudo gpasswd -a xulz sudo # Ubuntu gpasswd -a xulz wheel # CentOS # sudoå…å¯†ç è¾“å…¥ echo &amp;#34;xulz ALL=(ALL) NOPASSWD:ALL&amp;#34; | sudo tee /etc/sudoers.d/nopass  æ›´æ”¹UID(user)å’ŒGID(group) usermod -u 2001 xulz groupmod -g 2001 xulz # æ³¨: ä»¥ä¸Šå‘½ä»¤ä»…ä¿®æ”¹homeç›®å½•,å…¶ä»–ç›®å½•éœ€æ‰‹åŠ¨æ‰§è¡Œ æ–‡ä»¶ç®¡ç† # åˆ›å»ºHOMEç›®å½• mkhomedir_helper xulz # è¾“å‡ºå…¨è·¯å¾„ readlink -f myfile # åˆ›å»ºè½¯é“¾æ¥ # f ä»£è¡¨é‡å†™åŸé“¾æ¥ # T ä»£è¡¨æŠŠé“¾æ¥å½“åšæ™®é€šæ–‡ä»¶ ln -sfT path/to/file path/to/symlink æ–‡ä»¶å†…å®¹æµè§ˆ less head tail tail -f &amp;lt;file_name&amp;gt; æƒé™ chown chmod åˆ é™¤é™¤æŸæ–‡ä»¶å¤–çš„æ‰€æœ‰æ–‡ä»¶ # å¦‚æœè¦åˆ é™¤æ–‡ä»¶å¤¹,æ›´æ–°ä¸º -type d -r find . ! -name &amp;#39;file.txt&amp;#39; -type f -exec rm -f {} &#43; # æˆ–è€… # enable extglob shopt -s extglob rm -rf -- !(file.txt) mc ç›®å½•æµè§ˆå’Œæ–‡ä»¶ç®¡ç† # ç±»ä¼¼ total command Serverå¿…å¤‡ åŒæ­¥ç³»ç»Ÿæ—¶é—´ # CentOS yum install ntp systemctl enable ntpd.service # CentOS 7.x # chkconfig ntpd on # CentOS 6.x ntpdate pool.ntp.org # Ubuntu apt install ntp service ntp restart è¿›ç¨‹ç®¡ç† nohup ä¸æŒ‚æ–­åœ°è¿è¡Œå‘½ä»¤ã€‚
è¿è¡Œç”± Command å‚æ•°å’Œä»»ä½•ç›¸å…³çš„ Arg å‚æ•°æŒ‡å®šçš„å‘½ä»¤ï¼Œå¿½ç•¥æ‰€æœ‰æŒ‚æ–­ï¼ˆSIGHUPï¼‰ä¿¡å·ã€‚
åœ¨æ³¨é”€åä½¿ç”¨ nohup å‘½ä»¤è¿è¡Œåå°ä¸­çš„ç¨‹åºã€‚
è¦è¿è¡Œåå°ä¸­çš„ nohup å‘½ä»¤ï¼Œæ·»åŠ  &amp;amp; ï¼ˆ è¡¨ç¤ºâ€œandâ€çš„ç¬¦å·ï¼‰åˆ°å‘½ä»¤çš„å°¾éƒ¨ã€‚
ç½‘ç»œ å¸¸ç”¨å‘½ä»¤ ifconfig #ipconfig # for Windows ip a å¢å¼ºå·¥å…·  mtr: ç½‘ç»œè°ƒè¯•å·¥å…· iperf3: ç½‘ç»œååæµ‹è¯•  ä¿®æ”¹hostname hostname # æŸ¥çœ‹å½“å‰å€¼ # åªåº”ç”¨äºå†…éƒ¨ç½‘ç»œIPæ˜ å°„ vi /ect/hosts vi /etc/sysconfig/network NETWORKING=yes HOSTNAME=newHostName # é‡å¯æœåŠ¡ä»¥ç”Ÿæ•ˆ /etc/init.d/network restart ç³»ç»Ÿ # æ—¶é—´æˆ³è½¬æ¢ date -d@1234567890 # æ˜¾ç¤ºunixæ—¶é—´æˆ³ date &#43;%s # å…³æœº shutdown -h now æ–‡ä»¶å®Œæ•´æ€§æ ¡éªŒ md5sum file sha256sum file å¢å¼ºå‘½ä»¤ open # git tig # HTTP Client httpie # å½©æ˜¾æ–‡æœ¬ lolcat # æµè§ˆå™¨ w3m lynx å¤åˆ¶/ç²˜è´´ # å¤åˆ¶/ç²˜è´´ apt install xclip # ç±»ä¼¼Macçš„pbcopy/pbpaste alias pbcopy=&amp;#39;xclip -selection clipboard&amp;#39; alias pbpaste=&amp;#39;xclip -selection clipboard -o&amp;#39;</content>
    </entry>
    
     <entry>
        <title>Linuxè°ƒä¼˜</title>
        <url>/blog/linux-tuning/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>linux</tag>
        </tags>
        <content type="html"> Linuxä½œä¸ºæœåŠ¡å™¨é’ˆå¯¹ä½¿ç”¨åœºæ™¯, æœ‰è®¸å¤šéœ€è¦è°ƒä¼˜çš„åœ°æ–¹, æœ¬æ–‡è®°å½•å¸¸ç”¨ä¼˜åŒ–é¡¹.

æ€§èƒ½åŸºæœ¬è°ƒä¼˜ é€šå¸¸æ¶‰åŠåˆ°/etc/sysctl.confå’Œ/etc/security/limits.confé…ç½®æ–‡ä»¶çš„ä¿®æ”¹.
ä¹Ÿå¯ä½¿ç”¨å‘½ä»¤ä¿®æ”¹,ä½¿ç”¨sysctl -p ç«‹å³ç”Ÿæ•ˆ.
å†…æ ¸å‚æ•°è®¾ç½® sysctlå‘½ä»¤å¯ä»¥ç”¨æ¥å®æ—¶çš„è¯»å–/ä¿®æ”¹å†…æ ¸å‚æ•°
# æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å†…æ ¸å‚æ•°  sysctl -a # åŠ è½½/etc/sysctl.confçš„å‚æ•°  sysctl -p æé«˜æ–‡ä»¶æè¿°ç¬¦é™åˆ¶ soft limitç±»ä¼¼äºwarning, hard limitæ˜¯çœŸå®çš„æœ€å¤§å€¼é™åˆ¶.
é»˜è®¤çš„1024åå°, æœ‰ä¸¤ç§æ–¹å¼ä¿®æ”¹:
ä¸´æ—¶è®¾ç½® # æŸ¥çœ‹å½“å‰å€¼  ulimit -n # ä¸´æ—¶å¢åŠ   ulimit -n 65535 # å•ä¸ªè¿›ç¨‹çš„é™åˆ¶ä¸ºsoft limit  # hard limitåº”å°äºå½“å‰ç³»ç»Ÿæ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦  # ç›¸åº”å¢åŠ nr_open  echo 2000000 &amp;gt; /proc/sys/fs/nr_open # ç³»ç»Ÿçº§é™åˆ¶, ä¸Šé™ä¸ºnr_open  echo 1000000 &amp;gt; /proc/sys/fs/file-max SystemDæœåŠ¡è®¾ç½® åœ¨CentOS7ä½¿ç”¨SystemDå¯åŠ¨çš„æœåŠ¡ä¸åŒäºCentOS6, å¯¹/etc/security/limits.confçš„è®¾ç½®ä¸ä¼šç”Ÿæ•ˆ.
éœ€è¦ä¿®æ”¹/etc/systemd/system.confæˆ–/etc/systemd/system.conf.d/tomcat.conf.
# å¯¹åº”ä¸‹é¢å‡ é¡¹ DefaultLimitCORE=infinity DefaultLimitNOFILE=102400 DefaultLimitNPROC=102400 å¸¸ç”¨çš„å‘½ä»¤:
# æŸ¥çœ‹å½“å‰è¿›ç¨‹çš„é™åˆ¶ cat /proc/$(pgrep java)/limits # æŸ¥çœ‹å½“å‰è¿›ç¨‹å¥æŸ„æ•° lsof -p $(pgrep java)|wc -l ## æˆ–è€…ä½¿ç”¨ ls /proc/$(pgrep java)/fd|wc -l æ°¸ä¹…è®¾ç½® ä¿®æ”¹ /etc/security/limits.conf,é‡å¯ä»¥ç”Ÿæ•ˆ.
* soft nofile 65535 * hard nofile 65535 root soft nofile 65535 root hard nofile 65535 # ç³»ç»Ÿçº§å†…æ ¸å¥æŸ„é™åˆ¶ fs.file-max = 1000000 æŸ¥çœ‹å½“å‰æè¿°ç¬¦æƒ…å†µ # åˆ—å‡ºæ‰“å¼€/å ç”¨çš„æ–‡ä»¶æè¿°ç¬¦  cat /proc/sys/fs/file-nr # ä¸‰ä¸ªå€¼åˆ†åˆ«ä»£è¡¨ å ç”¨/æœªä½¿ç”¨/æœ€å¤§å¯ç”¨å€¼  # æ³¨: lsofåªä¼šåˆ—å‡ºè¿›ç¨‹å ç”¨  lsof | wc -l # è¦å¾—åˆ°çº¿ç¨‹å ç”¨,éœ€è¦ä½¿ç”¨  ps -eLf # æŸ¥çœ‹æŸè¿›ç¨‹é™åˆ¶  cat /proc/[Process ID]/limits å¢åŠ å¯ç”¨ç«¯å£æ•° é»˜è®¤28000, net.ipv4.ip_local_port_range
å¦‚æœNginxä½œä»£ç†,éœ€è¦å¢åŠ ç«¯å£èŒƒå›´,å¦åˆ™ä¼šå‡ºç°é”™è¯¯: Cannot assign requested address .
IPv4ç«¯å£å¯ç”¨æ•°:ç«¯å£å·æ˜¯16ä½æ— ç¬¦å·æ•´æ•°,å³65535
# å®æ—¶ç”Ÿæ•ˆ  echo 12000 64000 &amp;gt; /proc/sys/net/ipv4/ip_local_port_range # æ°¸ä¹…ç”Ÿæ•ˆ  sysctl -w net.ipv4.ip_local_port_range=&amp;#34;12000 64000&amp;#34; å¯é€‰:æœ€å¤§çº¿ç¨‹æ•° ä¸€èˆ¬ä¸éœ€è¦è®¾ç½®
# é»˜è®¤31299 echo 100000 &amp;gt; /proc/sys/kernel/threads-max æŸ¥çœ‹å½“å‰çº¿ç¨‹æ•°:
 top, then hit H to view threads top -H htop  ç½‘ç»œè°ƒä¼˜ é€šç”¨ç½‘ç»œå‚æ•° /etc/sysctl.conf # ç³»ç»Ÿç½‘ç»œè®¾ç½® # ç”Ÿæ•ˆå€¼å–ç³»ç»Ÿå’Œä¸‹é¢TCPè®¾ç½®å€¼çš„æœ€å¤§å€¼ net.core.rmem_max = 16777216 net.core.wmem_max = 16777216 TCP/IPè°ƒä¼˜ Backlog Queue æœ€å¤§è¿æ¥æ•°é˜Ÿåˆ—. å¯é€‰, æŸ¥çœ‹kernelæ—¥å¿—å†³å®šæ˜¯å¦éœ€è¦è°ƒæ•´
net.core.somaxconn net.core.netdev_max_backlog = 300000 ç½‘ç»œç¼“å†²åŒºå¤§å° # TCPè¯»å–ç¼“å†²åŒº # æ ¼å¼: æœ€å°å€¼/é»˜è®¤å€¼/æœ€å¤§å€¼ å­—èŠ‚æ•° # cat /proc/sys/net/ipv4/tcp_rmem net.ipv4.tcp_rmem = 4096 87380 16777216 # å‘é€ç¼“å†²åŒº net.ipv4.tcp_wmem = 4096 65536 16777216 # TCPå†…å­˜, å¯¹åº” low/pressure/high é¡µå¤§å°(4K) net.ipv4.tcp_mem = 786432 2097152 3145728 UDPè°ƒä¼˜ é»˜è®¤æ¯”è¾ƒå—é™
#æ”¹æˆ8M sysctl -w net.core.rmem_max=8388608 ä¸»è¦å‚æ•° Receive-Side Scaling (RSS) also known as multi-queue receive, distributes network receive processing across several hardware-based receive queues, allowing inbound network traffic to be processed by multiple CPUs.
cat /sys/class/net/eth1/queues/&amp;lt;rx-0&amp;gt;/ ethtool --show-rxfh-indir eth1 CLOSE_WAIT å’Œ TIME_WAIT è§£é‡Š TCPæ˜¯å…¨åŒå·¥çš„,ä»»ä½•ä¸€ç«¯å¯ä»¥æ˜¯sourceæˆ–destination.
Due to the way TCP/IP works, connections can not be closed immediately. Packets may arrive out of order or be retransmitted after the connection has been closed.
CLOSE_WAIT indicates that the remote endpoint (other side of the connection) has closed the connection.
TIME_WAIT indicates that local endpoint (this side) has closed the connection. The connection is being kept around so that any delayed packets can be matched to the connection and handled appropriately.
The connections will be removed when they time out within four minutes.
tcp_tw_reuseå’Œtcp_tw_recycle ä¸ç”¨å¼€å¯ net.ipv4.tcp_tw_recycle, æœ€æ–°å†…æ ¸4.12å·²ç»“å»æ‰è¯¥å‚æ•°.
è¿æ¥æœ‰incomingå’Œoutgoingä¹‹åˆ†ï¼Œtcp_tw_reuseä»…ä»…å¯¹outgoingæœ‰æ•ˆ.
è®¾è®¡åè®®æ—¶,å°½é‡ä¸ç”¨è®©å®¢æˆ·ç«¯å…ˆå…³é—­è¿æ¥,åº”è¯¥è®©æœåŠ¡ç«¯æ§åˆ¶.
TCP/UDPå‚æ•°  Socket receive buffer size: Socket send and receive sizes are dynamically adjusted, so they rarely need to be manually edited. rmem_default : A kernel parameter that controls the default size of receive buffers used by sockets.  è°ƒä¼˜å¸¸ç”¨æŒ‡æ ‡  Ping 100ä»¥ä¸‹ ç½‘ç»œå»¶è¿Ÿ50msä»¥ä¸‹ Dnsè§£æå°½é‡å¿« å°½é‡å°‘ä¸¢åŒ… åå‘ä»£ç†ä¼˜åŒ–  è°ƒä¼˜è¾…åŠ©å·¥å…· perf-tools å¼€æºçš„æ€§èƒ½åˆ†æå·¥å…·,åŸºäºperfå’Œftrace.
  Linux Performance Observability Tools   SystemTap  SystemTapå®˜æ–¹ç½‘ç«™ CentOSæœ‰ç”¨çš„è„šæœ¬  æ‰©å±•é˜…è¯»  Linuxæ€§èƒ½èµ„æºå¤§å…¨ RedHatå®˜æ–¹ç³»ç»Ÿè°ƒä¼˜æŒ‡å— TCPçš„é‚£äº›äº‹å„¿ : TCPåè®®ç‰¹ç‚¹æ±‡æ€» Linux TCP/IP åè®®æ ˆè°ƒ tcp_tw_reuseå’Œtcp_tw_recycleè°ƒæ•´å¯¹äºè¿‡å¤šTIME_WAITçš„è°ƒç ” centos7-systemd-conf-limits </content>
    </entry>
    
     <entry>
        <title>Nginxè°ƒä¼˜</title>
        <url>/blog/nginx-tuning/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> Nginxåœ¨éƒ¨ç½²æœåŠ¡æ—¶ç»å¸¸è¢«ç”¨åˆ°, å¤§å¤šæ—¶å€™æ˜¯ä½œä¸ºä»£ç†ä½¿ç”¨. å¦‚æœç”¨æˆ·é‡æ¯”è¾ƒå¤§å°±æ¶‰åŠåˆ°ä¸€äº›è°ƒä¼˜, æœ¬æ–‡åšä¸€äº›åˆ†ç±»è®°å½•.

ä»¥ä¸‹éƒ¨åˆ†ä¸»è¦åŸºäºä¸¤ä¸ªä¸»è¦é…ç½®æ–‡ä»¶:nginx.confå’Œconf.d/default.confå±•å¼€.
Worker Processes # é»˜è®¤ä¸º1, åº”æ›´æ–°ä¸ºä¸€ä¸ªCPUæ ¸å¿ƒä¸€ä¸ªworker # æŸ¥çœ‹CPUæ ¸æ•° $grep ^processor /proc/cpuinfo | wc -l worker_processes auto; # æ–‡ä»¶å¥æŸ„æ•°,é»˜è®¤è·Ÿéšç³»ç»Ÿè®¾ç½® worker_rlimit_nofile 100000; # äº‹ä»¶é©±åŠ¨éƒ¨åˆ† events { # æ¯ä¸ªworkerå…è®¸çš„è¿æ¥æ•°, é»˜è®¤512 worker_connections 65536; use epoll; multi_accept on; } HTTPå’ŒTCPä¼˜åŒ– http{ sendfile on; tcp_nopush on; tcp_nodelay on; } æ–‡ä»¶è®¿é—®ä¼˜åŒ– # è®¿é—®æ—¥å¿—ä½¿ç”¨ç¼“å†²æˆ–å…³é—­ # å¦‚æœæ—¥å¿—æ–‡ä»¶è·¯å¾„åŒ…å«å˜é‡ï¼Œéœ€è¦æ‰“å¼€open_log_file_cacheä»¥æé«˜æ€§èƒ½ access_log buffer=size flush=time # å¤šä½¿ç”¨ç¼“å­˜å’Œå‹ç¼© # ä½†æ˜¯å›¾ç‰‡ä¸åº”è¯¥å¼€å¯å‹ç¼© Keepalive Connections  clientä¿æ´» upstreamä¿æ´»
http { # ä»¥ä¸‹ä¸¤é¡¹ä¸ºclientä¿æ´»é…ç½® # é»˜è®¤100, ä¸€ä¸ªkeep-aliveæœåŠ¡çš„æœ€å¤§è¯·æ±‚æ•°,è¶…å‡ºåå…³é—­è¿æ¥ keepalive_requests 102400; keepalive_timeout 65;
# ä»¥ä¸‹ä¸ºupstreamä¿æ´»é…ç½® keepalive 10240; # é»˜è®¤å’Œä¸Šæ¸¸é—´60ç§’è¶…æ—¶ proxy_read_timeout 120; # ä»¥ä¸‹å¿…é¡»è®¾ç½®, é»˜è®¤å“åº”åä¼šå…³é—­è¿æ¥ proxy_http_version 1.1; proxy_set_header Connection &amp;#34;&amp;#34;; }
  é™åˆ¶IPè¿æ¥å’Œå¹¶å‘  limit_req_zone: é™åˆ¶å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ•°ï¼Œå³é€Ÿç‡é™åˆ¶,é‡‡ç”¨çš„æ¼æ¡¶ç®—æ³• &amp;ldquo;leaky bucket&amp;rdquo; limit_req_conn: é™åˆ¶åŒä¸€æ—¶é—´è¿æ¥æ•°ï¼Œå³å¹¶å‘é™åˆ¶  æ‰©å±•é˜…è¯»  å®˜æ–¹ä¼˜åŒ–æŒ‡å— linodeä¼˜åŒ– æ€§èƒ½ä¼˜åŒ–æ–‡ç«  </content>
    </entry>
    
     <entry>
        <title>åˆ†å¸ƒå¼ç³»ç»Ÿçš„é‚£äº›è®ºæ–‡åŠå¼€æºå®ç°</title>
        <url>/blog/distributed-paper/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> è¿‘å‡ å¹´æ€»èƒ½çœ‹åˆ°å¤§æ•°æ®,äº‘è®¡ç®—è¿™äº›buzz word/æ—¶é«¦è¯, å¯æ˜¯è¯´æ¥æƒ­æ„§,å¯¹è¿‘10æ¥å¹´å†å²ä¸Šé‚£äº›è‘—åè®ºæ–‡åŠä¸»è¦å†…å®¹å´çŸ¥é“çš„å¾ˆå°‘.
ä¹‹å‰é›¶æ•£çš„çœ‹åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€äº›æ–‡ç« ,æ¥ä¸‹æ¥æ€»ç»“ä¸‹ä¸»è¦å†…å®¹,ä¹Ÿæ‰“ç®—è¯»å‡ æœ¬ä¹¦ç³»ç»Ÿçš„å­¦ä¹ ä¸‹.
ä»Šå¤©å…ˆçœ‹çœ‹è¿™äº›ç»å…¸è®ºæ–‡åŠè¡ç”Ÿçš„å¼€æºç³»ç»Ÿ.
æŒ‰æ—¶é—´é¡ºåº/å½±å“åŠ›æœ€å¤§çš„åº”è¯¥å°±æ˜¯è°·æ­Œçš„è€ä¸‰ç¯‡äº†,å³ GFS &#43; MapReduce &#43; BigTable.

è®ºæ–‡åˆ—è¡¨  2003 Google File System/GFS 2004 Google MapReduce: Simplified Data Processing on Large Clusters 2006 Google The Bigtable &amp;ndash; A Distributed Storage System for Structured Data 2007 Amazon Dynamo 2010 Yahoo S4: distributed stream computing platform 2012 Google Spanner:Google&amp;rsquo;s Globally-Distributed Database 2012 Google F1 &amp;ndash; The Fault-Tolerant Distributed RDBMS Supporting Google&amp;rsquo;s Ad Business  å¯¹åº”çš„å¼€æºäº§å“  GFS &#43; MapReduce &#43; BitTable : å¯¹åº”Hadoopçš„HDFSå’ŒHBase S4(Simple Scalable Streaming System): Twitterå¼€æºçš„å®æ—¶æµè®¡ç®—Storm/ç»§æ‰¿è€…Heron Dynamo: Facebookå¼€æºçš„Cassandra, ä¹‹åå‡ºç°äº†é«˜æ€§èƒ½C&#43;&#43;ç‰ˆæœ¬ScyllaDB (å…¼å®¹Cassandraåè®®,KVMä½œè€…å¼€å‘) SSTable &#43; LSM Tree(BigTableèƒŒåæŠ€æœ¯) : Googleå¼€æºå®ç°LevelDBå’ŒFacebookçš„åˆ†æ”¯RocksDB NoSQL(Not only SQL): åŸºäºBigTableçš„å®ç°, ä¸»è¦æœ‰HBase/MongoDB/Cassandra NewSQL: åŸºäºSpanner/F1çš„å®ç°, ä¸»è¦æœ‰ TiDB/CockroachDB   ç‰¹ç‚¹: Cassandraå¼ºè°ƒAP ï¼ŒHbaseå¼ºè°ƒCP, Spanner æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡
 å…¶ä»–æ¦‚å¿µ  LSM: Log-Structured Merge SSTable: Sorted Strings Table paxos/raft : ä¸€è‡´æ€§ç®—æ³• HTAP: Hybrid transactional/analytical processing WAL: Write Ahead Logging MVCC(Multi-Version Concurrency Control): å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶  èµ„æº ä¸€äº›ä¸­æ–‡ç¿»è¯‘å’Œç›¸å…³ç½‘é¡µ
 å¦å¤§ä¸­æ–‡ç‰ˆæœ¬ OpenOpenä¸­æ–‡ç‰ˆæœ¬ </content>
    </entry>
    
     <entry>
        <title>NodeJSåŠå‰ç«¯å¼€å‘</title>
        <url>/blog/nodejs-and-frontend/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> å› ä¸ºæœ€è¿‘ä½¿ç”¨çš„ä¸¤ä¸ªåšå®¢ç³»ç»Ÿéƒ½æ˜¯åŸºäºNodeJSå¼€å‘çš„,ä¹Ÿé¡ºä¾¿è°ˆè°ˆæˆ‘ç†è§£çš„JavaScriptåŠå‰ç«¯å¼€å‘.
NodeJSçš„æ˜¯ä¼´éšChromeçš„V8 Engineè€Œå‡ºç°,ç”±äºJSç¾¤ä¼—åŸºç¡€åŠé«˜æ€§èƒ½è€Œå¿«é€Ÿå‘å±•,æœ¬è´¨æ˜¯å®ƒä½¿ç”¨ç±»ä¼¼Nginxçš„äº‹ä»¶å¾ªç¯æ¨¡å‹å¯ä»¥å¤„ç†æé«˜çš„å¹¶å‘è¯·æ±‚.å¼‚æ­¥IOåŠåŸºäºNodeJSçš„ç¬¬ä¸‰æ–¹åº“éƒ½æä¾›çš„å¼‚æ­¥ç‰ˆæœ¬,ä½¿å¾—è¾ƒç®€å•çš„ç¼–ç¨‹æ¨¡å‹å¸¦æ¥æé«˜çš„æ€§èƒ½, JavaSciptè¿™ä¸€åº”ç”¨äºå‰ç«¯å¼€å‘çš„å¤è€è¯­è¨€ç„•å‘å‡ºæ–°çš„ç”Ÿæœº.
æ—©æœŸå‰ç«¯å¼€å‘çš„JavaScriptç”±äºè¦å¤„ç†æµè§ˆå™¨ç‰ˆæœ¬å…¼å®¹ä¸”è¯­è¨€æœ¬èº«é—®é¢˜,å……æ–¥ç€ä¸‘é™‹çš„ä»£ç . ä¼´éšç€JQueryåŠç¬¬ä¸‰æ–¹æ¡†æ¶/åº“çš„æµè¡Œ,JavaScriptä¹Ÿå˜å¾—ä¼˜ç¾èµ·æ¥.
å‰ç«¯å¼€å‘ä¸‰å‰‘å®¢: HTML &#43; CSS &#43; JavaScriptè¿™äº›å¹´éšç€æ–°æ ‡å‡†çš„å‘å±•ä¹Ÿæ¯”æˆ‘æœ€åˆæ¥è§¦æ—¶å¼ºå¤§æ˜“ç”¨å¤šäº†, ä¸€åˆ‡äº‹ç‰©è¿˜çœŸå¾—ä»¥å‘å±•çš„çœ¼å…‰çœ‹å¾…,æŠ€æœ¯é¢†åŸŸå°¤å…¶å®¹ä¸å¾—åè§.

å› ä¸ºå¶å°”ä¼šå¿˜è®°,ä¸‹é¢è®°äº›ç®€å•çš„ç¬”è®°:
NodeJS Nodeæ˜¯ä¸€ä¸ªJSåº”ç”¨çš„å¹³å°,è€Œä¸æ˜¯æ¡†æ¶. å°¤å…¶é€‚ç”¨äºæ•°æ®å¯†é›†å‹å®æ—¶æœåŠ¡å’Œå¤§å¹¶å‘é‡/å°æ•°æ®å—çš„é•¿è¿æ¥åœºæ™¯.
 åŒ¿åå‡½æ•°è°ƒç”¨ä¹Ÿè¢«ç§°ä¸ºå›è°ƒ(a.k.a callback) steamsæ˜¯éšæ—¶é—´è¿›è¡Œçš„æ•°æ®åˆ†å‘  Nodeç‰ˆæœ¬ ç¨³å®šç‰ˆæœ¬: 6.x /æœ€æ–°ç‰ˆæœ¬: 9.x
ä½¿ç”¨nç®¡ç†å¤šç‰ˆæœ¬ npm install -g n n stable # n lts ä½¿ç”¨nvmç®¡ç†å¤šç‰ˆæœ¬ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash nvm install node nvm use node å¸è½½ # Ubuntu sudo rm -rf /usr/local/lib/node_modules sudo rm -rf ~/.npm # Mac brew uninstall --force node åŒ…ç®¡ç†npm # å®‰è£… curl -0 -L https://npmjs.com/install.sh | sudo sh é€‰é¡¹è¯´æ˜:
 -g: ä»£è¡¨å…¨å±€  ä½¿ç”¨æ·˜å®é•œåƒ npmåœ¨å›½å†…çš„ä½¿ç”¨ç¯å¢ƒå¾ˆç³Ÿ,ç»å¸¸å®‰è£…ç¬¬ä¸‰æ–¹åŒ…è¶…æ—¶,å¼ºçƒˆå»ºè®®æ¢æˆå›½å†…é•œåƒ.
# https://npm.taobao.org/ # ç›¸å…³å·¥å…·é•œåƒ https://npm.taobao.org/mirrors npm install -g cnpm --registry=https://registry.npm.taobao.org # ä½¿ç”¨åˆ«å cnpm echo &amp;#39;\n#alias for cnpm\nalias cnpm=&amp;#34;npm --registry=https://registry.npm.taobao.org \ --cache=$HOME/.npm/.cache/cnpm \ --disturl=https://npm.taobao.org/dist \ --userconfig=$HOME/.cnpmrc&amp;#34;&amp;#39; &amp;gt;&amp;gt; ~/.zshrc &amp;amp;&amp;amp; source ~/.zshrc ä¾èµ–ç®¡ç† Yarn Facebookå‡ºå“æ›¿ä»£npmçš„æ–°å·¥å…·
# https://yarnpkg.com/lang/en/docs/install/ # Mac brew install yarn # ä¼šè‡ªåŠ¨å®‰è£…Node brew install yarn --without-node # ä½¿ç”¨nodeç‰ˆæœ¬ç®¡ç†å·¥å…·å®‰è£… èµ„æº  Macä½¿ç”¨æŒ‡å— How To Install Node.js on Ubuntu 16.04  å‰ç«¯å·¥å…·é›† åŒ…ç®¡ç† Bower
æ„å»ºå·¥å…·  æ³¨: å‰é¢å‡ºç°çš„è¾ƒæ–°
 è‡ªåŠ¨åŒ–æ„å»ºå·¥å…·
Gulp vs. Grunt
æŠŠä¾èµ–å…¨éƒ¨æå–åˆ°ä¸€ä¸ªæ–‡ä»¶
webpack vs. browserify
æ¡Œé¢å¼€å‘Electron æœ€æ—©çŸ¥é“åŸºäºHTML&#43;CSS&#43;JavaScriptçš„æ¡Œé¢å¼€å‘æ˜¯çœ‹åˆ°è±Œè±†èšå›¢é˜Ÿçš„è®¿è°ˆ,çŸ¥é“äº†åŸºäºChromiumçš„CEFæ¡†æ¶.
ä¹‹åä¸æ–­æ¼”è¿›å‡ºä¼˜ç§€çš„Electron,è¯¥æ¡†æ¶æå¤§çš„ç®€åŒ–äº†è·¨å¹³å°å¼€å‘çš„æˆæœ¬,ä½ å¾ˆéš¾æƒ³è±¡VSCode,Slackç­‰å·¥å…·æ˜¯åŸºäºElectronå’ŒWebå¼€å‘æŠ€æœ¯åšå‡ºæ¥çš„.
JavaScript Babel JavaScriptè½¬æ¢å™¨,æŠŠé«˜ç‰ˆæœ¬(ESæ ‡å‡†)è½¬æ¢ä¸ºæµè§ˆå™¨å…¼å®¹ç‰ˆæœ¬
JSè¯­è¨€å¢å¼º  TypeScript CoffeeScript  èµ„æº  MDNå­¦ä¹ èµ„æº  CSS CSSæ‰©å±•è¯­è¨€  Less Stylus Saas  å“åº”å¼è®¾è®¡ èµ„æº  @media æ§åˆ¶ä¸åŒå°ºå¯¸è®¾å¤‡çš„æ˜¾ç¤º CSS3 æ¨¡æ¿ MDNå­¦ä¹ èµ„æº  é“¾æ¥  ç™¾åº¦çš„è½®å­ Babel : Facebookå‡ºå“ Grunt </content>
    </entry>
    
     <entry>
        <title>é™æ€åšå®¢Hexo</title>
        <url>/play/blog-hexo/</url>
        <categories>
          <category>Play</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> å¯èƒ½è¿‡äºè¿½æ±‚å®Œç¾,ä½¿ç”¨Ghoståšå®¢ä¸¤ä¸ªå¤šæœˆ,æ„Ÿè§‰åŠŸèƒ½è¿˜æ˜¯è¿‡äºç®€å•,è®¸å¤šå¸¸ç”¨çš„åŠŸèƒ½ç”¨æˆ·æ—©å°±æäº†Issue,å®˜æ–¹å´è®¤ä¸ºä¸æ˜¯æ ¸å¿ƒ.
æ¯”å¦‚å¸¸ç”¨çš„æ–‡ç« ç›®å½•,å½’æ¡£é¡µ,æœç´¢åŠŸèƒ½ç­‰. æ–‡ç« ç›®å½•æŠ˜è…¾ä¸‹æ¥å·²ç»å¯ç”¨äº†,æœç´¢æŠ˜è…¾äº†ä¸€åŠ,å®åœ¨æ²¡æ—¶é—´è°ƒè¯•æ”¾å¼ƒäº†.è§æ–°åšå®¢è¿™ç¯‡è®°å½•æ–‡ç« .
æœ¬æ¥ç”¨è¿™ä¹ˆä¸ªåšå®¢ç³»ç»Ÿæ˜¯ä¸ºäº†ä¸æŠ˜è…¾,ç´¢æ€§è¿ç§»åˆ°äº†ä¹‹å‰ç†ŸçŸ¥çš„Hexo&#43;NexT(å›½äººæœ€å¥½ç”¨ä¸»é¢˜),è¯¥ä¸»é¢˜å¸¸ç”¨çš„æ‰©å±•éƒ½æä¾›,æ²¡æƒ³åˆ°çš„åŠŸèƒ½ä¹Ÿæ”¯æŒ,å¾ˆğŸ‘.

å®‰è£…åŠé…ç½® npm install hexo-cli -g hexo init blog cd blog npm install hexo server ## äº§ç”Ÿé™æ€æ–‡ä»¶ï¼Œé»˜è®¤å­˜æ”¾äº public  hexo generate # éƒ¨ç½²,æˆ‘ä½¿ç”¨rsyncçš„æ–¹å¼  hexo deploy å¸¸ç”¨åŠŸèƒ½ ä¸»è¦å‚è€ƒ./theme/next/_config.ymlç›¸åº”æ³¨é‡ŠæŒ‰æ­¥éª¤æ“ä½œã€‚
 RSS è°ƒæ•´ä¸»é¢˜schemeä»¥è·å–ä¸åŒçš„å±•ç¤ºæ•ˆæœ å¢åŠ æœç´¢åŠŸèƒ½ ä½¿ç”¨rsyncéƒ¨ç½²  // package.json { &amp;#34;name&amp;#34;: &amp;#34;hexo-site&amp;#34;, &amp;#34;version&amp;#34;: &amp;#34;0.0.0&amp;#34;, &amp;#34;private&amp;#34;: true, &amp;#34;hexo&amp;#34;: { &amp;#34;version&amp;#34;: &amp;#34;3.5.0&amp;#34; }, &amp;#34;dependencies&amp;#34;: { &amp;#34;hexo&amp;#34;: &amp;#34;^3.2.0&amp;#34;, &amp;#34;hexo-algolia&amp;#34;: &amp;#34;^1.2.4&amp;#34;, &amp;#34;hexo-deployer-rsync&amp;#34;: &amp;#34;^0.1.3&amp;#34;, &amp;#34;hexo-generator-archive&amp;#34;: &amp;#34;^0.1.4&amp;#34;, &amp;#34;hexo-generator-category&amp;#34;: &amp;#34;^0.1.3&amp;#34;, &amp;#34;hexo-generator-feed&amp;#34;: &amp;#34;^1.2.2&amp;#34;, &amp;#34;hexo-generator-index&amp;#34;: &amp;#34;^0.2.0&amp;#34;, &amp;#34;hexo-generator-tag&amp;#34;: &amp;#34;^0.2.0&amp;#34;, &amp;#34;hexo-migrator-ghost&amp;#34;: &amp;#34;^0.1.0&amp;#34;, &amp;#34;hexo-renderer-ejs&amp;#34;: &amp;#34;^0.3.0&amp;#34;, &amp;#34;hexo-renderer-marked&amp;#34;: &amp;#34;^0.3.0&amp;#34;, &amp;#34;hexo-renderer-stylus&amp;#34;: &amp;#34;^0.3.1&amp;#34;, &amp;#34;hexo-server&amp;#34;: &amp;#34;^0.2.0&amp;#34; } } ä¸€äº›å¢å¼ºåŠŸèƒ½çš„å±•ç¤º å¤§éƒ¨åˆ†åŠŸèƒ½åªéœ€è¦åœ¨é…ç½®ä¸­ä¿®æ”¹ï¼Œéå¸¸æ˜“ç”¨ã€‚
{% note success %}
Success è¯´æ˜æ–‡æœ¬
{% endnote %}
{% note info %}
info è¯´æ˜æ–‡æœ¬
{% endnote %}
{% cq %} äººçš„ä¸€åˆ‡ç—›è‹¦,æœ¬è´¨ä¸Šéƒ½æ˜¯å¯¹è‡ªå·±æ— èƒ½çš„æ„¤æ€’.
** ç‹å°æ³¢ **
{% endcq %}
{% fi /images/publication-cover.png, æµ‹è¯•, å¥½å›¾ %}
é“¾æ¥  Hexo NexTä¸»é¢˜æ–‡æ¡£ </content>
    </entry>
    
     <entry>
        <title>Linuxè°ƒè¯•å‘½ä»¤/å·¥å…·</title>
        <url>/blog/linux-debug-command/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>linux</tag>
        </tags>
        <content type="html"> Linuxçš„å¼ºå¤§ä¹‹ä¸€æ˜¯ä¸°å¯Œçš„å‘½ä»¤ç³»ç»Ÿ,å°¤å…¶åœ¨è°ƒè¯•æœåŠ¡ç«¯åº”ç”¨æ—¶.
è®°å½•åœ¨è¿™é‡Œæ–¹ä¾¿æŸ¥é˜….

èµ„æºç»Ÿè®¡ yum install sysstat mpstat -P ALL 1 pidstat 1 top -p &amp;lt;pid ## å†…å­˜,IOç›¸å…³  free -m vmstat 1 iostat -xz 1 top/htop åç§°è§£é‡Š
 RSS: Resident Set Size VmRSS: è¿›ç¨‹é™¤äº†swapå¤–ä½¿ç”¨çš„ç‰©ç†å†…å­˜å¤§å° VmSwap: swapå¤§å°  watch # æ¯éš”2ç§’æ›´æ–°ä¸€æ¬¡å†…å­˜å˜åŒ– watch free -h sar saræ˜¯System Activity Reporterï¼ˆç³»ç»Ÿæ´»åŠ¨æƒ…å†µæŠ¥å‘Šï¼‰çš„ç¼©å†™
sar -n DEV 1 sar -n TCP,ETCP 1 vmstat vmstatæ˜¯Virtual Meomory Statisticsï¼ˆè™šæ‹Ÿå†…å­˜ç»Ÿè®¡ï¼‰çš„ç¼©å†™ï¼Œå¯å®æ—¶åŠ¨æ€ç›‘è§†æ“ä½œç³»ç»Ÿçš„è™šæ‹Ÿå†…å­˜ã€è¿›ç¨‹ã€CPUæ´»åŠ¨ã€‚
 cs: ä»£è¡¨ context switches in: ä»£è¡¨ interrupts  iostat ä½¿ç”¨-xå‚æ•°æˆ‘ä»¬å¯ä»¥è·å¾—æ›´å¤šç»Ÿè®¡ä¿¡æ¯
 rrqm/sï¼šæ¯ç§’è¿™ä¸ªè®¾å¤‡ç›¸å…³çš„è¯»å–è¯·æ±‚æœ‰å¤šå°‘è¢«Mergeäº†(å½“ç³»ç»Ÿè°ƒç”¨éœ€è¦è¯»å–æ•°æ®çš„ æ—¶å€™ï¼ŒVFSå°†è¯·æ±‚å‘åˆ°å„ä¸ªFSï¼Œå¦‚æœFSå‘ç°ä¸åŒçš„è¯»å–è¯·æ±‚è¯»å–çš„æ˜¯ç›¸åŒBlockçš„æ•°æ®ï¼ŒFSä¼šå°†è¿™ä¸ªè¯·æ±‚åˆå¹¶Merge);wrqm/sï¼šæ¯ç§’è¿™ä¸ª è®¾å¤‡ç›¸å…³çš„å†™å…¥è¯·æ±‚æœ‰å¤šå°‘è¢«Mergeäº†ã€‚
 rsec/sï¼šæ¯ç§’è¯»å–çš„æ‰‡åŒºæ•°;wsec/ï¼š æ¯ç§’å†™å…¥çš„æ‰‡åŒºæ•°ã€‚r/sï¼šThe number of read requests that were issued to the device per second;w/sï¼šThe number of write requests that were issued to the device per second; awaitï¼šæ¯ä¸€ä¸ªIOè¯·æ±‚çš„å¤„ç†çš„å¹³å‡æ—¶é—´(å•ä½æ˜¯å¾®ç§’)ã€‚è¿™é‡Œå¯ä»¥ç†è§£ä¸ºIOçš„å“åº”æ—¶ é—´ï¼Œä¸€èˆ¬åœ°ç³»ç»ŸIOå“åº”æ—¶é—´åº”è¯¥ä½äº5msï¼Œå¦‚æœå¤§äº10mså°±æ¯”è¾ƒå¤§äº†ã€‚ %utilï¼šåœ¨ç»Ÿè®¡æ—¶é—´å†…æ‰€æœ‰å¤„ç†IOæ—¶é—´ï¼Œé™¤ä»¥æ€»å…±ç»Ÿè®¡æ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç»Ÿè®¡é—´éš”1ç§’ï¼Œè¯¥ è®¾å¤‡æœ‰0.8ç§’åœ¨å¤„ç†IOï¼Œè€Œ0.2ç§’é—²ç½®ï¼Œé‚£ä¹ˆè¯¥è®¾å¤‡çš„%util = 0.8&amp;frasl;1 = 80%ï¼Œæ‰€ä»¥è¯¥å‚æ•°æš—ç¤ºäº†è®¾å¤‡çš„ç¹å¿™ç¨‹åº¦ã€‚ä¸€èˆ¬åœ°ï¼Œå¦‚æœè¯¥å‚æ•°æ˜¯100%è¡¨ç¤ºè®¾å¤‡å·²ç»æ¥è¿‘æ»¡è´Ÿè·è¿è¡Œäº†(å½“ç„¶å¦‚æœæ˜¯å¤šç£ç›˜ï¼Œå³ä½¿%utilæ˜¯100%ï¼Œå›  ä¸ºç£ç›˜çš„å¹¶å‘èƒ½åŠ›ï¼Œæ‰€ä»¥ç£ç›˜ä½¿ç”¨æœªå¿…å°±åˆ°äº†ç“¶é¢ˆ)ã€‚  å‘½ä»¤å‚æ•°
iostat [-c|-d] [-k] [-t] [é—´éš”æè¿°] [æ£€æµ‹æ¬¡æ•°]
å‚ æ•°ï¼š
-c : ä»…æ˜¾ç¤ºcpuçš„çŠ¶æ€ -d : ä»…æ˜¾ç¤ºå­˜å‚¨è®¾å¤‡çš„çŠ¶æ€ï¼Œä¸å¯ä»¥å’Œ-cä¸€èµ·ä½¿ç”¨ -k : é»˜è®¤æ˜¾ç¤ºçš„æ˜¯è¯»å…¥è¯»å‡ºçš„blockä¿¡æ¯ï¼Œç”¨-kå¯ä»¥æ”¹æˆKBå¤§å°æ¥æ˜¾ç¤º -t : æ˜¾ç¤ºæ—¥æœŸ -p device | ALL : deviceä¸ºæŸä¸ªè®¾å¤‡æˆ–è€…æŸä¸ªåˆ†åŒºï¼Œå¦‚æœä½¿ç”¨ALLï¼Œå°±è¡¨ç¤ºè¦æ˜¾ç¤ºæ‰€æœ‰åˆ†åŒºå’Œè®¾å¤‡çš„ä¿¡æ¯ CPU å ç”¨æƒ…å†µåŒ…æ‹¬å››å—å†…å®¹ %userï¼šæ˜¾ç¤ºuser level (applications)æ—¶ï¼ŒCPUçš„å ç”¨æƒ…å†µã€‚ %niceï¼šæ˜¾ç¤ºuser levelåœ¨ nice priority æ—¶ï¼ŒCPU çš„å ç”¨æƒ…å†µã€‚ %sys: æ˜¾ç¤º system level (kernel)æ—¶ï¼ŒCPU çš„å ç”¨æƒ…å†µã€‚ %idle: æ˜¾ç¤ºCPU ç©ºé—²æ—¶é—´æ‰€å æ¯”ä¾‹ã€‚ ç£ç›˜ä½¿ç”¨æŠ¥å‘Šåˆ†æˆä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š Device: å—è®¾å¤‡çš„åå­— tps: è¯¥è®¾å¤‡æ¯ç§’ I/O ä¼ è¾“çš„æ¬¡æ•°ã€‚å¤šä¸ª I/O è¯·æ±‚å¯ä»¥ç»„åˆä¸ºä¸€ä¸ªï¼Œæ¯ä¸ª I/O è¯·æ±‚ä¼ è¾“çš„å­—èŠ‚æ•°ä¸åŒï¼Œå› æ­¤å¯ä»¥å°†å¤šä¸ª I/O è¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªã€‚ Blk\_read/s, Blk\_wrtn/s: è¡¨ç¤ºä»è¯¥è®¾å¤‡æ¯ç§’è¯»å†™çš„æ•°æ®å—æ•°é‡ã€‚å—çš„å¤§å°å¯ä»¥ä¸åŒï¼Œå¦‚1024, 2048 æˆ– 4048 å­—èŠ‚ï¼Œè¿™å–å†³äº partition çš„å¤§å°ã€‚ Blk\_read, Blk\_wrtn: æŒ‡ç¤ºè‡ªä»ç³»ç»Ÿå¯åŠ¨ä¹‹åæ•°æ®å—è¯»/å†™çš„åˆè®¡æ•°ã€‚ä¹Ÿå¯ä»¥æŸ¥çœ‹è¿™å‡ ä¸ªæ–‡ä»¶/proc/statï¼Œ/proc/partitionsï¼Œ/proc/diskstatsçš„å†…å®¹ã€‚ mpstat mpstatæ˜¯MultiProcessor Statisticsçš„ç¼©å†™ï¼Œæ˜¯å®æ—¶ç³»ç»Ÿç›‘æ§å·¥å…·ã€‚å…¶æŠ¥å‘Šä¸CPUçš„ä¸€äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å­˜æ”¾åœ¨/proc/statæ–‡ä»¶ä¸­ã€‚åœ¨å¤šCPUsç³»ç»Ÿé‡Œï¼Œå…¶ä¸ä½†èƒ½æŸ¥çœ‹æ‰€æœ‰CPUçš„å¹³å‡çŠ¶å†µä¿¡æ¯ï¼Œè€Œä¸”èƒ½å¤ŸæŸ¥çœ‹ç‰¹å®šCPUçš„ä¿¡æ¯ã€‚
# æ¯éš”2ç§’æ˜¾ç¤ºä¸€æ¬¡ mpstat 2 mpstat -P ALL mpstat -P 0 3 3 # å¯¹ç¬¬ä¸€å—CPUï¼Œæ¯éš”3ç§’ç›‘æ§ä¸€æ¬¡ï¼Œé‡å¤3æ¬¡ã€‚ å…³é”®å­—æ®µè§£é‡Šï¼š LOC :Local interrupt Timer
CPU CPU ç¼–å·,all é‚£è¡Œæ˜¯æ‰€æœ‰CPUçš„å¹³å‡ç»Ÿè®¡å€¼ã€‚ %user åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼Œç”¨æˆ·çº§è¿›ç¨‹ï¼ˆè¿ç”¨ç¨‹åºï¼‰å ç”¨çš„CPUæ—¶é—´ç™¾åˆ†æ¯”ã€‚ %nice åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼Œniceå€¼ä¸ºè´Ÿçš„ç”¨æˆ·çº§è¿›ç¨‹æ‰€å ç”¨çš„CPUæ—¶é—´ç™¾åˆ†æ¯”ã€‚ %sys åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼Œç³»ç»ŸåŠè¿›ç¨‹ï¼ˆå†…æ ¸ï¼‰å ç”¨çš„CPUä½¿ç”¨ç‡ã€‚è¯¥æ—¶é—´åŒ…æ‹¬äº†ç³»ç»Ÿå¤„ç†è½¯ã€ç¡¬ä¸­æ–­æ‰€èŠ±çš„æ—¶é—´ã€‚ %iowait åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼Œç­‰å¾…ç¡¬ç›˜I/Oçš„æ—¶é—´ï¼ŒCPUçš„é—²ç½®æ—¶é—´ç™¾åˆ†æ¯”ã€‚ %irq åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…,CPUæœåŠ¡ç¡¬ä¸­æ–­çš„æ‰€å çš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚ %soft åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼ŒCPUæœåŠ¡è½¯ä¸­æ–­çš„æ‰€å çš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚ %idle åœ¨ç›‘æ§çš„æ—¶é—´é—´éš”å†…ï¼ŒCPUé—²ç½®æ—¶é—´æ‰€å ç”¨çš„æ—¶é—´ç™¾åˆ†æ¯”ï¼Œä¸åŒ…æ‹¬ç­‰å¾…ç£ç›˜IOè¯·æ±‚çš„æ—¶é—´ã€‚ å…¶ä¸­æœ€é‡è¦çš„å­—æ®µæ˜¯%idle,%iowaitã€‚å¦‚æœ%idle è¯´æ˜CPUçš„è´Ÿè½½ä¸é«˜ã€‚å¦‚æœ%iowaitï¼Œè¯´æ˜å­˜åœ¨I/Oç«äº‰ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨è¾“å‡ºé‡å®šå‘ä¿å­˜mpstatå¯¹CPUçš„ç›‘æ§æ•°æ®ï¼Œç”¨ä½œCPUå†å²ä½¿ç”¨ç‡åˆ†æã€‚ si è½¯ä¸­æ–­å¤ªé«˜: cat /proc/interrupts uptime dmesg å†…æ ¸æ—¥å¿—  dmesg | tail
 æ–‡ä»¶/è¿›ç¨‹ç±» ps # æŸ¥çœ‹ç”¨æˆ·çº¿ç¨‹æ•° ps -fLu xulz # æ ¹æ®pidæ‰¾åˆ°process ps -p &amp;lt;pid -o comm= # è¿è¡Œé˜Ÿåˆ— ps -eo stat,pid,user,command | egrep &amp;#34;^STAT|^D|^R&amp;#34; # D : Uninterruptible sleep (usually IO) # R : Running or runnable (on run queue) è¿›ç¨‹æ£€ç´¢/ç®¡ç† # æ˜¾ç¤ºè¿›ç¨‹æ ‘  pstree -p pgrep kill/pkillç”¨æ³•:
# é»˜è®¤ç”¨SIGTERM (terminate)ä¿¡å·ç»ˆæ­¢è¿›ç¨‹ kill &amp;lt;porcess_id # åˆ—å‡ºå¯ç”¨(ä¸å¸¦SIGå‰ç¼€çš„)ä¿¡å·å kill -l # ç«‹å³ç»ˆæ­¢è¿›ç¨‹ kill -9|KILL &amp;lt;process_id # æ ¹æ®è¿›ç¨‹åç§°(è€Œä¸æ˜¯id) pkill &amp;lt;process_name pkill -f &amp;#34;command_name&amp;#34; lsof åˆ—å‡ºæ–‡ä»¶æ‰“å¼€æƒ…å†µ
# æŸ¥çœ‹æŸè¿›ç¨‹æ‰“å¼€è¿æ¥ lsof -i -a -p `pidof firefox` # æˆ–è€… ss -nap | grep $(pidof firefox) # æŸ¥çœ‹ç«¯å£å ç”¨ lsof -i :portNumber lsof -i :22 taskset set or retrieve a process&amp;rsquo;s CPU affinity
# æ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„ affinity taskset -c -p 1162 # è®¾ç½®è¿›ç¨‹çš„affinity taskset -c 0,1 -p 1162 taskset -c 1  proc Process information pseudo-filesystem
man proc /proc/&amp;lt;pid/status /proc/&amp;lt;pid/statm #Memory valgrind æŸ¥å†…å­˜æ³„æ¼
ç½‘ç»œç±» # æ˜¾ç¤ºæ‰€æœ‰æ‰“å¼€è¿æ¥ ss -l # æˆ–è€… netstat -tlpn netstat -anp # æˆ–è€… lsof -i # æ›´ç²¾ç¡®çš„æ–¹å¼æ˜¾ç¤ºæ‰“å¼€çš„ç½‘ç»œç«¯å£ nmap -sT -O localhost # å¦‚æœé‡åˆ°æœªçŸ¥æœåŠ¡æ‰“å¼€ç«¯å£: cat /etc/services | grep 834 ç½‘ç»œè¿æ¥ç›‘æ§ss socket stats
ss -s ss -lp | grep 8080 netstat å¸¸ç”¨é€‰é¡¹:
 -a/&amp;ndash;all: æ˜¾ç¤ºç›‘å¬å’Œéç›‘å¬è¿æ¥ -n: æ˜¾ç¤ºIP  # æ˜¾ç¤ºæ‰€æœ‰TCP  netstat -nat #Windows  netstat -aon | more # æ˜¾ç¤ºå»ºç«‹çš„TCPè¿æ¥  netstat -np | grep ESTABLISHED | wc -l netstat -nat | grep &amp;#39;ESTABLISHED&amp;#39; netstat -s |grep &amp;#39;connections established&amp;#39;  cURL å‘½ä»¤è¡Œæ–‡ä»¶ä¼ è¾“å·¥å…·.
å¸¸ç”¨é€‰é¡¹:
-d, --data ä½¿ç”¨ç±»å‹ application/x-www-form-urlencodedåšPOST -F, --form &amp;lt;name=content -x, --proxy ä»£ç†è®¾ç½® -X, --request &amp;lt;command&amp;lt;/command æŒ‡å®šç±»å‹ -I, --head åªæ˜¾ç¤ºå“åº”å¤´ï¼Œåœ¨å“åº”ä½“è¾ƒå¤§æ—¶å¾ˆæœ‰ç”¨# åœ¨å†…ç½‘æŸ¥çœ‹å¤–ç½‘IP curl ifconfig.me wget åŸŸåè§£æ nslookup www.google.com dig xulizhao.com dnstracer dig &#43;trace xulizhao.com # æŸ¥æ‰¾åŸŸåæœåŠ¡å™¨ less /etc/resolv.conf nmcli device show &amp;lt;interfacename| grep IP4.DNS Windowsä»IPå¾—åˆ°hostname: ping -a 10.10.10.10
ä¿®æ”¹DNS ## Ubuntu vi /etc/network/interfaces dns-nameservers 8.8.8.8 # é‡å¯æœåŠ¡ /etc/init.d/networking restart ## CentOS vi /etc/resolv.conf nameserver 8.8.8.8 ç½‘ç»œè°ƒè¯•traceroute/mtr mtrå¯ä»¥çœ‹åštracerouteçš„åŠ å¼ºç‰ˆ æ˜¾ç¤ºæ•°æ®åŒ…åœ¨IPç½‘ç»œç»è¿‡çš„è·¯ç”±å™¨çš„IPåœ°å€,ä¸€ç›´è¾¾åˆ°é»˜è®¤æˆ–ç”¨å‚æ•°æŒ‡å®šçš„è¿½è¸ªé™åˆ¶ï¼ˆmaximum_hopsï¼‰æ‰ç»“æŸè¿½è¸ª. [Windows] tracert å“åº”æ ¼å¼: Hop RTT1 RTT2 RTT3 Domain Name [IP Address] æ¯ä¸ªhopå‘é€ä¸‰ä¸ªåŒ…, * ä»£è¡¨ä¸¢åŒ… ä½¿ç”¨ICMPåè®® (åŒping); RTT: round trip time ; å»¶æ—¶çªç„¶å¢åŠ å¹¶æŒç»­çš„å¢åŠ é€šå¸¸æ„å‘³ç€é—®é¢˜; ç½‘ç»œæ•°æ®ç»Ÿè®¡iftop r ä»£è¡¨receive
# æŸç½‘å£å¸¦å®½å ç”¨ iftop -i eth1 # å­ç½‘æ•°æ®æµ iftop -F 192.168.1.0/24 ç½‘ç»œæ¨¡æ‹Ÿtc/netem æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ,ä¸¢åŒ…,é‡å¤,ä¹±åºç­‰
è½¯ä»¶è°ƒè¯•ç±»  strace/dtruss: ç³»ç»Ÿè°ƒç”¨è·Ÿè¸ªå·¥å…· ltraceï¼šæŸ¥è¯¢åº“è°ƒç”¨  è¾…åŠ©ç±»  pv : ç®¡é“è¿›åº¦ç›‘æ§  # ç›¸å½“äºcat # ç›‘æ§æŸè¿›ç¨‹æ–‡ä»¶ pv -d &amp;lt;pid&amp;gt; # ç®¡é“å‘½å pv -cN gzip æ‰©å±•é˜…è¯»  å¦‚ä½•ç”¨curlåšAPIæ¥å£æµ‹è¯• Linux å·¥å…·å¿«é€Ÿæ•™ç¨‹ sså‘½ä»¤è¯¦è§£ tracerouteè§£é‡Š1/2 </content>
    </entry>
    
     <entry>
        <title>Redis</title>
        <url>/blog/redis/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æœ€æµè¡Œçš„å†…å­˜æ•°æ®åº“,Rediså¯ä»¥ç†è§£ä¸ºRemote Dictionary Service.

åŸºæœ¬é…ç½® # é»˜è®¤ç«¯å£ 6379 # é…ç½®æ–‡ä»¶ /etc/redis/redis.conf bind 0.0.0.0 # è¿è¡Œè¿œç¨‹è®¿é—®,å¼€å‘ç¯å¢ƒ redis-cli # å¸¸ç”¨å‘½ä»¤ ping # æ£€æŸ¥è¿é€šæ€§ -h &amp;lt;host&amp;gt; -p &amp;lt;port&amp;gt; shutdown flushall æ¸…æ•°æ®åº“ INFO SLAVEOF NO ONE / hostname port CONFIG SET protected-mode no é›†ç¾¤/é«˜å¯ç”¨ Redis Cluster æä¾›è‡ªåŠ¨åˆ†ç‰‡(sharding)å’Œéƒ¨åˆ†é«˜å¯ç”¨
å¯ç”¨æ€§ï¼šåªè¦é›†ç¾¤ä¸­å¤§å¤šæ•°masterå¯è¾¾ã€ä¸”å¤±æ•ˆçš„masterè‡³å°‘æœ‰ä¸€ä¸ªslaveå¯è¾¾æ—¶ï¼Œé›†ç¾¤éƒ½å¯ä»¥ç»§ç»­æä¾›æœåŠ¡
# ä¸¤ç§å®‰è£…æ–¹å¼ # Rubyè„šæœ¬æ–¹å¼ yum install ruby -y yum install rubygems gem install redis # è‡ªå¸¦è„šæœ¬ cd utils/create-cluster/ # ç¼–è¾‘create-clusteræ–‡ä»¶,æ›´æ–°35è¡Œ HOSTS=&amp;#34;$HOSTS &amp;lt;YOUR_SERVER_IP&amp;gt;:$PORT&amp;#34; ./create-cluster start ./create-cluster create # åœæ­¢/å¸è½½ ./create-cluster stop ./create-cluster clean ## å¯†ç è®¤è¯ config set masterauth p@ssw0rd config set requirepass p@ssw0rd config rewrite # å¸¦å‚æ•° --masterauth p@ssw0rd --requirepass p@ssw0rd Redis Sentinel æä¾›é«˜å¯ç”¨åŠä»¥ä¸‹åŠŸèƒ½:
 Monitoring
 é€šçŸ¥
 è‡ªåŠ¨æ•…éšœè½¬ç§»Failover (Master -&amp;gt; Slave)
 é…ç½®æä¾›è€…(ä¸ºå®¢æˆ·ç«¯æä¾›å”¯ä¸€å…¥å£)
  ä¼˜åŒ– # ç¼–è¾‘/etc/sysctl.conf net.core.somaxconn=65535 # æˆ–åŠæ—¶ç”Ÿæ•ˆ sysctl -w net.core.somaxconn=65535 ç®¡ç†å·¥å…·  RedisDesktopManager: GUIå·¥å…·,æä¾›Windowså®‰è£…åŒ… redsmin: äº‘ç«¯ç®¡ç†ç•Œé¢  èµ„æº  codis: è±Œè±†èšå¼€æºé›†ç¾¤ </content>
    </entry>
    
     <entry>
        <title>MySQL</title>
        <url>/blog/mysql/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>ops</tag><tag>mysql</tag><tag>database</tag>
        </tags>
        <content type="html"> æœ€æµè¡Œçš„å¼€æºå…³ç³»å‹æ•°æ®åº“,å¸¸ç”¨çš„MySQLç‰ˆæœ¬ä¸ºç¤¾åŒºç‰ˆæˆ–Perconaç‰ˆ.

å®‰è£…åŠé…ç½® # å®‰å…¨åŒ–å®‰è£…  sudo apt install mysql-server sudo mysql_secure_installation # è®¾ç½®rootå¯†ç , Percona  /usr/bin/mysqladmin -u root password &amp;#39;new-password&amp;#39; # é…ç½®æ–‡ä»¶  /etc/mysql/my.cnf # CentOS  /etc/sysconfig/mysql # Ubuntu  /etc/default/mysql æˆæƒç™»å½•  GRANT ALL PRIVILEGES ON dbname.* TO &amp;lsquo;USERNAME&amp;rsquo;@&amp;lsquo;IP&amp;rsquo; IDENTIFIED BY &amp;lsquo;PASSWORD&amp;rsquo;;
  grantä¸onä¹‹é—´æ˜¯å„ç§æƒé™ï¼Œä¾‹å¦‚:insert,select,updateç­‰ onä¹‹åæ˜¯æ•°æ®åº“åå’Œè¡¨å,ç¬¬ä¸€ä¸ª_è¡¨ç¤ºæ‰€æœ‰çš„æ•°æ®åº“ï¼Œç¬¬äºŒä¸ª_è¡¨ç¤ºæ‰€æœ‰çš„è¡¨ ï¼ åå¯ä»¥è·ŸåŸŸåæˆ–IPåœ°å€(%ä»£è¡¨æ‰€æœ‰åœ°å€)ï¼Œidentified byåé¢çš„æ˜¯ç™»å½•ç”¨çš„å¯†ç ï¼Œå¯ä»¥çœç•¥ï¼Œå³ç¼ºçœå¯†ç æˆ–è€…å«ç©ºå¯†ç   å¸¸ç”¨å‘½ä»¤ CREATE USER &amp;#39;newuser&amp;#39;@&amp;#39;localhost&amp;#39; IDENTIFIED BY &amp;#39;password&amp;#39;; select current_user(); -- æˆäºˆæƒé™éœ€è¦ä»¥ root@localhost ç™»å½• -- åˆ›å»ºæ•°æ®åº“å¹¶æˆæƒ CREATE DATABASE wordpress DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci; GRANT ALL ON wordpress.* TO &amp;#39;wordpressuser&amp;#39;@&amp;#39;localhost&amp;#39; IDENTIFIED BY &amp;#39;password&amp;#39;; FLUSH PRIVILEGES; -- åˆ›å»ºç›¸åŒç»“æ„ CREATE TABLE new_table LIKE old_table; -- åŒæ—¶å¤åˆ¶æ•°æ® INSERT INTO new_table SELECT * FROM old_table; -- æ˜¾ç¤ºæ‰€æœ‰ç´¢å¼• SHOW INDEX FROM yourtable; -- å­—ç¬¦é›† CREATE DATABASE IF NOT EXISTS `gitlabhq_production` DEFAULT CHARACTER SET `utf8` COLLATE `utf8_unicode_ci`; show variables like &amp;#34;character_set_database&amp;#34;; show variables like &amp;#34;collation_database&amp;#34;; å¯¼å‡º/å¯¼å…¥æ•°æ® # å¤‡ä»½æ•°æ®  mysqldump -d -uroot -p mydb &amp;gt;mydb_schema.sql --no-create-info, -t # åªåŒ…å«æ•°æ®  --skip-triggers --no-data, -d # å¯¼å…¥æ•°æ®  mysql -h host -u username -p password --default_character_set utf8 database &amp;lt; file.sql # Load-dataé«˜é€Ÿå¯¼å…¥æ•°æ®  load data local infile /root/out.txt into table table1 fields terminated by &amp;#39;,â€™ (field1,field2) é‡ç½®ä¸¢å¤±çš„rootå¯†ç  sudo mysqld_safe --skip-grant-tables &amp;amp; mysql -u root use mysql; update user set password=PASSWORD(&amp;#34;newpass&amp;#34;) where User=&amp;#39;root&amp;#39;; flush privileges; mysql-pythonçš„ä½¿ç”¨  mysql-python éœ€è¦çš„mysql_config åŒ…å«åœ¨ libmysqlclient-dev æˆ– libmysqld-dev sudo apt-get install mysql-server mysql-client libmysqlclient-dev
 æ€§èƒ½ æ…¢æŸ¥è¯¢ -- é…ç½® show variables like &amp;#39;%slow_query%&amp;#39;; SET GLOBAL log_output = &amp;#39;FILE,TABLE&amp;#39;; select * from mysql.slow_log; -- æˆ–è€… mysql&amp;gt; SET GLOBAL slow_query_log = &amp;#39;ON&amp;#39;; mysql&amp;gt; SET GLOBAL slow_query_log_file = &amp;#39;/var/log/mysql/localhost-slow.log&amp;#39;; mysql&amp;gt; SET GLOBAL log_queries_not_using_indexes = &amp;#39;ON&amp;#39;; mysql&amp;gt; SET SESSION long_query_time = 1; -- é…ç½®æ–‡ä»¶: long_query_time = 1 mysql&amp;gt; SET SESSION min_examined_row_limit = 100; å·¥å…·  è‡ªå¸¦å·¥å…·: mysqldumpslow -t 5 -s at /var/log/mysql/localhost-slow.log ç¬¬ä¸‰æ–¹ï¼špt-query-digest  å…¶ä»–å‘½ä»¤ select @@global.max_connections; show variables like â€˜max_connectionsâ€™; SELECT * FROM information_schema.STATISTICS WHERE TABLE_SCHEMA = DATABASE() é›†ç¾¤åŠé«˜å¯ç”¨ Percona XtraDB Cluster æ¨èè‡³å°‘3èŠ‚ç‚¹,æ¯ä¸ªèŠ‚ç‚¹åŒ…å«å…¨éƒ¨æ•°æ®çš„å¤åˆ¶.ä¸»è¦ä½œä¸ºè¯»æ“ä½œçš„æ‰©å±•æ–¹æ¡ˆ,å†™æ“ä½œä¸ä¼šæˆå€scale.å®ç°åŸºäºå•å®ä¾‹å¹¶åŠ å…¥äº†å†™å¤åˆ¶(åŒæ­¥). é™åˆ¶:å¤åˆ¶åªæ”¯æŒInnoDBå­˜å‚¨å¼•æ“, ç³»ç»Ÿè¡¨å¤åˆ¶åªæ”¯æŒDDL.å†™ååé‡ç”±æœ€å·®çš„èŠ‚ç‚¹å†³å®š.ä¸æ”¯æŒLockæŸ¥è¯¢ ç”¨Connector/Jå®ç°è´Ÿè½½å‡è¡¡ Failoveråè®®æ˜¯â€œMulti-Hostâ€é“¾æ¥æ¨¡å¼ä¸­æœ€åŸºç¡€çš„åè®®ï¼Œâ€œload balancingâ€ã€â€œreplicationâ€ã€â€œfarbicâ€åè®®éƒ½åŸºäºFailoveråè®®ã€‚ ä¸­é—´ä»¶ å®ç°é€æ˜è®¿é—®åˆ†å¸ƒå¼æ•°æ®åº“é›†ç¾¤ä¸­çš„å„ä¸ªåˆ†åº“åˆ†è¡¨
 ProxySQL : High-performance MySQL proxy kingshard  ä¸€äº›å·¥å…·  vitess: å·¥å…·é›†,youtubeåœ¨ç”¨ orchestrator: MySQL replication topology management and HA mysql_utils:Pinterest MySQL Management Tools  èµ„æº  MySQL Yum Repository Percona Server for MySQL </content>
    </entry>
    
     <entry>
        <title>PostgreSQL</title>
        <url>/blog/postgresql/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>ops</tag>
        </tags>
        <content type="html"> PostgreSQLæ˜¯2017å¹´æµè¡Œåº¦ä¸Šå‡æœ€å¿«çš„æ•°æ®åº“.
 åæ§½:å®˜æ–¹çš„ç®¡ç†å·¥å…·pgAdminçœŸéš¾ç”¨å•Š, å‘½ä»¤ä¹Ÿæ²¡æœ‰MySQLæ˜“è®°.

 é…ç½®  ç«¯å£: 5432 é»˜è®¤ç”¨æˆ·: postgres é…ç½®é»˜è®¤ç›®å½•: /var/lib/pgsql/   pg_hba.confæ§åˆ¶è®¤è¯æ–¹å¼
 é»˜è®¤è®¤è¯æ–¹å¼: ident,ä»¥å½“å‰ç™»å½•çš„ç³»ç»Ÿç”¨æˆ·ä¸ºæ•°æ®åº“ç”¨æˆ·åè¿æ¥ å¯†ç è®¤è¯: md5 æ— å¯†ç : trust ä½¿ç”¨Linuxç³»ç»Ÿè´¦å·: peer(ä»…é™äºæœ¬åœ°è¿æ¥)  Ubuntué…ç½® é…ç½®æ–‡ä»¶ä½ç½®ï¼š /etc/postgresql/10/main/pg_hba.conf
å¸¸ç”¨å‘½ä»¤ # è¿æ¥æœåŠ¡å™¨  psql -h hostname database user # åˆ›å»ºæ•°æ®åº“  sudo -u postgres createuser xulz -s sudo -u postgres createdb mydb &amp;gt; createuser -E --encrypted (store password) -s --superuser -P --pwprompt &amp;gt; createdb &amp;gt; dropdb -W -U postgres -h localhost your_db_name PSQL:
-- è¿æ¥  sudo -u postgres psql -- åˆ›å»ºç”¨æˆ·  CREATE USER xulz WITH PASSWORD &amp;#39;password&amp;#39;; -- æ›´æ”¹å¯†ç   ALTER USER &amp;#34;user_name&amp;#34; WITH PASSWORD &amp;#39;new_password&amp;#39;; -- ä¿®æ”¹postgreså¯†ç   alter user postgres password &amp;#39;postgres&amp;#39;; #æˆ–è€…ã€€\password postgres -- ç”¨æˆ·æˆæƒ  grant all privileges on database db1 to user1; -- é‡å‘½åæ•°æ®åº“  ALTER DATABASE people RENAME TO &amp;#34;customers&amp;#34;; PSQL Command:
\dt list tables \du list users \password user_name \dn list schemas \l list database \? \c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo} #Connection å…³é—­æ‰€æœ‰sessionè¿æ¥ SELECT pg_terminate_backend(pid) FROM pg_stat_activity WHERE datname = &amp;#39;dbname&amp;#39; AND pid &amp;lt;&amp;gt; pg_backend_pid(); -- é¿å…å…³é—­å½“å‰è¿æ¥ REVOKE CONNECT ON DATABASE dbname FROM PUBLIC, username; -- Revoke CONNECTæƒé™ä»¥é¿å…åˆ›å»ºæ–°è¿æ¥ å¤‡ä»½å’Œè¿˜åŸ è¿™é‡Œä¸»è¦æŒ‡é€»è¾‘å¤‡ä»½ï¼ˆè€Œä¸æ˜¯ç‰©ç†å¤‡ä»½ï¼‰ã€‚
pg_dumpçš„å‡ ä¸ªä¸»è¦é€‰é¡¹ï¼š
-U, --username=NAME connect as specified database user -F, --format=c|t|p output file format (custom, tar, plain text) -f, --file=FILENAME output file name SQLæ ¼å¼æ–‡ä»¶å¤‡ä»½ ## å¤‡ä»½ pg_dump dbname -f db_bak.sql # æˆ–è€… pg_dump -Fp dbname &amp;gt; db_bak.sql ## psqlå‘½ä»¤è¿˜åŸ psql -U username -f db_bak.sql dbname # æˆ–è€…ç›´æ¥åœ¨psqlç»ˆç«¯è¿˜åŸ postgres=# \i db_bak.sql è‡ªå®šä¹‰æ ¼å¼å’Œtaræ ¼å¼å¤‡ä»½ pg_dump -Fc dbname -f filename # è¿˜åŸ pg_restore -Fc -d dbname filename # taræ ¼å¼ä¸æ­¤ç±»ä¼¼ï¼Œ-Ft æ³¨ï¼š pg_dumpall ç”¨äºé›†ç¾¤çº§åˆ«å¤‡ä»½ï¼Œä½¿ç”¨psqlå‘½ä»¤è¿˜åŸã€‚
ä»æ•°æ®åº“åˆ é™¤æ‰€æœ‰è¡¨ -- â€”clean æ¸…é™¤æ•°æ®åº“ pg_dump -U postgres -h localhost -p 5432 --clean --file=sandbox.sql sandbox pg_dumpall -U postgres -h localhost -p 5432 --clean --globals-only --file=globals.sql psql -W -U postgres -h localhost your_db_name &amp;lt; backup.sql drop schema public cascade; create schema public; æ–¹å¼äºŒï¼š
DO $$ DECLARE r RECORD; BEGIN -- æ³¨æ„æ›¿æ¢current_schemaä¸ºè¦åˆ é™¤çš„schema FOR r IN (SELECT tablename FROM pg_tables WHERE schemaname = current_schema()) LOOP EXECUTE &amp;#39;DROP TABLE IF EXISTS &amp;#39; || quote_ident(r.tablename) || &amp;#39; CASCADE&amp;#39;; END LOOP; END $$ æ€§èƒ½ å…³æ³¨å‡ ä¸ªæ–¹é¢:
 ç´¢å¼•ä½¿ç”¨ IOå°½é‡ä½¿ç”¨ç¼“å­˜: cache hit ratio = blks_hit /(blks_hit&#43;blks_read) å¹¶å‘è¿æ¥ é¿å…æ­»é” é•¿æ—¶é—´æŸ¥è¯¢  ä¸»è¦å‚æ•°è°ƒä¼˜ å‚è€ƒ å®˜æ–¹wiki æˆ–Performance Tuning PostgreSQL
## postgres.conf # é€šå¸¸è®¾ç½®ä¸ºå‡ ç™¾è¿æ¥ max_connections = &amp;lt;num&amp;gt; # 1/4 ~ 1/3å†…å­˜ shared_buffers = &amp;lt;num&amp;gt; Explain  Explain SQL STATEMENT  cost å»ºè®®æ§åˆ¶åœ¨300 ä»¥å†… é‡ç‚¹å…³æ³¨ç¼ºå°‘ç´¢å¼•çš„å¤§è¡¨  EXPLAIN ANALYZE æ£€æŸ¥è§„åˆ’å™¨é¢„ä¼°å€¼çš„å‡†ç¡®æ€§  Startup Cost Max Time Rows   ç›‘æ§æ€§èƒ½æ•°æ®  å†…éƒ¨ä½¿ç”¨ pg_stats ç›‘æ§ç”¨é€”
 æ•°æ®åº“: pg_stat_database è¡¨: pg_stat_all_tables tup : rows æŸ¥è¯¢ : pg_stat_statements éœ€è¦å…ˆenable plugin  ç¼–è¾‘postgres.conf
shared_preload_libraries = &amp;#39;pg_stat_statements&amp;#39; pg_stat_statements.track = all  è¡¨ç›‘æ§
SELECT sum(idx_scan)/(sum(idx_scan) &#43; sum(seq_scan)) as idx_scan_ratio FROM pg_stat_all_tables WHERE schemaname=â€˜public&amp;#39;; SELECT relname,idx_scan::float/(idx_scan&#43;seq_scan&#43;1) as idx_scan_ratio FROM pg_stat_all_tables WHERE schemaname=&amp;#39;public&amp;#39; ORDER BY idx_scan_ratio ASC; Troubleshooting  æ­»é”é—®é¢˜æ£€æŸ¥  SELECT * FROM pg_stat_activity WHERE datname = &amp;#39;deadlock database IDâ€™; -- æ‰¾åˆ°waitingå­—æ®µ, procpidæ‰¾åˆ°å¯¹åº”çš„åˆ—å€¼ SELECT pg_cancel_backend (&amp;#39;æ­»é”çš„procpidå€¼&amp;#39;);  åœ¨Macä¸‹ä½¿ç”¨pipå®‰è£…psycopg2æ—¶æŠ¥é”™:&amp;ldquo;pg_config executable not found&amp;rdquo;  è§£å†³: export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/9.6/bin
ä¸MySQLæ¯”è¾ƒ  æ›´å®Œæ•´çš„äº‹åŠ¡æ”¯æŒ æ›´å¿«çš„åˆ—æ·»åŠ  æ›´å¥½çš„å¤šæ ¸CPUæ”¯æŒ  èµ„æº  æŸ¥çœ‹è¡¨/å¯¹è±¡å¤§å° What PostgreSQL Tells You About Its Performance pgAdmin How To Install and Use PostgreSQL on Ubuntu 18.04 </content>
    </entry>
    
     <entry>
        <title>Linuxé˜²ç«å¢™</title>
        <url>/blog/linux-firewall/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> CentOSä½œä¸ºä¸€ä¸ªå¼€å‘ç¯å¢ƒç”¨è¿˜æ˜¯æœ‰äº›ç¹çäº†,ä»Šå¤©å› ä¸ºå¿˜äº†iptablesé˜²ç«å¢™é»˜è®¤å¼€å¯,è¿˜æµªè´¹äº†äº›æ—¶é—´æ‰¾åŸå› .

æ›´éƒé—·çš„æ˜¯ç”¨lokkitè¿™ä¸ªå·¥å…·æ–°å¼€é€šä¸€ä¸ªç«¯å£,å‡ åˆ†é’Ÿä¹‹åä¹‹å‰çš„é˜²ç«å¢™è®¾ç½®å…¨æ²¡äº†.
Dockerå•Š,èµ¶ç´§ç»™å›¢é˜Ÿç»Ÿä¸€èµ·æ¥å§,æŠ˜è…¾ç¯å¢ƒå¤ªæ— èŠäº†.
é˜²ç«å¢™æ¦‚è¦ iptables  iptablesæ˜¯å­˜æ”¾é˜²ç«å¢™è§„åˆ™çš„æ•°æ®åº“
 # æ£€æŸ¥å½“å‰çŠ¶æ€  iptables -nvL # æˆ–è€… service iptables status  # å…³é—­é˜²ç«å¢™,åœ¨éç”Ÿäº§ç¯å¢ƒ  service iptables save service iptables stop chkconfig iptables off # å¼€å¯é˜²ç«å¢™  service iptables start chkconfig iptables on lokkit CentOSç®€åŒ–å‘½ä»¤è¡Œå·¥å…·
# å…è®¸æŸç«¯å£ lokkit -p 3389:tcp ufw Ubuntuç®€åŒ–å·¥å…·: Uncomplicated Firewall
sudo ufw allow ssh/tcp sudo ufw allow 3389/tcp # å¸¸ç”¨å‘½ä»¤  sudo ufw logging on sudo ufw enable/disable sudo ufw status å…¶ä»–å·¥å…·  fail2ban: pythonå·¥å…·,æ ¹æ®æ­£åˆ™åŒ¹é…æ—¥å¿—é”™è¯¯å¹¶è§¦å‘iptablesåŠ¨ä½œ  GUIå·¥å…·
 Gufw FirewallBuilder: å¼ºå¤§è€Œå¤æ‚  iptablesè¯¦è§£ iptablesä½¿ç”¨è¡¨ç»“æ„ç®¡ç†é˜²ç«å¢™è§„åˆ™, åº•å±‚å®é™…ä¸Šè°ƒç”¨Linuxå†…æ ¸çš„netfilteræ¡†æ¶.
å‡ ç§è¡¨ç±»å‹:
 Filter: é˜²ç«å¢™è¿‡æ»¤ NAT: åœ°å€è½¬æ¢ Mangle: æ”¹å˜æ•°æ®åŒ…IPå¤´ä¿¡æ¯æˆ–å¢åŠ æ ‡è®° Raw: ç”¨äºè¿æ¥è¿½è¸ª,ä¿æŒè¿æ¥ä¼šè¯å…³ç³»/çŠ¶æ€ Security: SELinuxç›¸å…³  å¸¸ç”¨å‘½ä»¤ # åˆ—å‡ºæ‰€æœ‰è§„åˆ™ -S # åˆ é™¤æ‰€æœ‰è§„åˆ™ -F --flush # æ¸…é™¤è®¡æ•° -Z --zero -L --list -A # æ·»åŠ ä¸€æ¡è§„åˆ™ -I #åœ¨æŒ‡å®šä½ç½®æ’å…¥ä¸€æ¡è§„åˆ™,é»˜è®¤chainçš„ç¬¬ä¸€æ¡  # æ˜¾ç¤ºè¡Œå· --line-numbers -m --match -p --protocol -i --in-interface å¸¸ç”¨è§„åˆ™ # å…è®¸æœ¬åœ°è¿æ¥ iptables -A INPUT -i lo -j ACCEPT # å¼€å¯å¸¸ç”¨æœåŠ¡ç«¯å£ iptables -A INPUT -p tcp -m tcp --dport 80 -j ACCEPT iptables -A INPUT -p tcp -m tcp --dport 22 -j ACCEPT # æˆ–è€… iptables -A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT # å…è®¸åœ¨serverå‘èµ·å»ºç«‹çš„outgoingè¿æ¥ä¸Šè¿”å›æ•°æ®. iptables -I INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT# å…¶ä»– # æŸ¥è¯¢å¯¹å¤–IP w # ä¹‹åå¯ä»¥é™å®šæ¥æºIP iptables -A INPUT -p tcp -s YOUR_IP_ADDRESS -m tcp --dport 22 -j ACCEPT # å…è®¸æ‰€æœ‰outgoing iptables -P OUTPUT ACCEPT # æ‹’ç»å…¶ä»–incoming iptables -P INPUT DROP # å¤šä¸ªç«¯å£ iptables -A INPUT -p tcp -m multiport --dport 80,443 -j ACCEPT è§„åˆ™çš„ä¿å­˜/å¤‡ä»½/æ¢å¤ æ³¨: ç”¨å‘½ä»¤é…ç½®é‡å¯åä¼šå¤±å»ä½œç”¨,éœ€è¦å…ˆä¿å­˜å¹¶é‡å¯é˜²ç«å¢™æœåŠ¡
#ä¿å­˜è§„åˆ™ # Ubuntu apt-get install iptables-persistent netfilter-persistent save # CentOS service iptables save # é»˜è®¤ä¿å­˜åˆ° /etc/sysconfig/iptables # ç­‰ä»·äº iptables-save | sudo tee /etc/sysconfig/iptables  # CentOS7æœ‰å¯èƒ½ä¼šå¼€å¯firewalld, æ£€æŸ¥firewalld è¿è¡ŒçŠ¶æ€ firewall-cmd --state# å¯¼å‡ºè§„åˆ™ iptables-save &amp;gt; iptables-export #æ¢å¤è§„åˆ™ iptables-restore &amp;lt; ~/iptables-export è§„åˆ™ä½¿ç”¨è¯´æ˜ Chainæ˜¯ä¸€ç»„è§„åˆ™çš„é›†åˆ,é»˜è®¤å†…ç½®æœ‰å‡ ä¸ªChain,åŒ…å«INPUT,FORWARD,OUTPUT.
æ¯ä¸ªChainæœ‰ä¸€ä¸ªé»˜è®¤çš„policy, ACCEPT/DROP/REJECT
ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰æ–°çš„Chain(å¿…é¡»é€šè¿‡jumpåˆ°è¾¾),æ¯”å¦‚Dockerå¯åŠ¨å®¹å™¨æ—¶ä¼šé»˜è®¤åˆ›å»ºå‡ ä¸ª.
Chainå¯ä»¥ç†è§£ä¸ºæœ‰é¡ºåºçš„ä¸€ç³»åˆ—è§„åˆ™,ç”±ä¸Šåˆ°ä¸‹æŒ¨ä¸ªåŒ¹é…,æ²¡æœ‰åŒ¹é…åˆ™ä½¿ç”¨é»˜è®¤ç­–ç•¥.
è§„åˆ™æ„æˆ:
 INPUT: ç³»ç»Ÿæ¥æ”¶çš„æ•°æ®åŒ…,æ‰“å¼€/å…³é—­(è¿›å£/incoming)ç«¯å£/åœ°å€ OUTPUT: ç³»ç»Ÿå‘å‡ºçš„æ•°æ®åŒ…,æ‰“å¼€/å…³é—­(å‡ºå£/outgoing)ç«¯å£/åœ°å€ FORWARD:é€šå¸¸ç”¨äºè·¯ç”±è½¬å‘,å¦‚LANåˆ°äº’è”ç½‘  åŒ…/packet åŒ¹é…è§„åˆ™:
 æ¯ä¸ªåŒ…ä»¥ç¬¬ä¸€æ¡è§„åˆ™å¼€å§‹ ç»§ç»­å¤„ç†åŒ…ç›´åˆ°åŒ¹é…åˆ°ä¸€æ¡è§„åˆ™ å¦‚æœæ‰¾åˆ°åŒ¹é…,æ§åˆ¶è·³è½¬åˆ°æŒ‡å®šç›®æ ‡  ç›®æ ‡/target : æŒ‡è§„åˆ™åŒ¹é…æ—¶é‡‡å–çš„è¡ŒåŠ¨.
 ACCEPT : å…è®¸ REJECT : ä¸¢æ‰åŒ…,é€šçŸ¥é”™è¯¯æ¶ˆæ¯ç»™è¿œç¨‹ä¸»æœº(connection refused) DROP : ä¸¢æ‰åŒ…,ä¸å‘é”™è¯¯é€šçŸ¥  è¾ƒå°‘ç”¨åˆ°çš„:
 RETURN : é€šå¸¸ç”¨äºè‡ªå®šä¹‰Chain NOTRACK: ä¸åšè¿æ¥è¿½è¸ª  è¿æ¥è¿½è¸ª iptablesä¹Ÿå¯ä»¥track connection/state(new,established,related).
å¯ç”¨çŠ¶æ€:
 NEW ESTABLISHED RELATED: ä¸è¢«æ ‡è®°ä¸ºRELATEDçš„è¿æ¥å…³è”,å¦‚FTP,ICMP INVALID UNTRACKED SNAT/DNAT: åŸ/ç›®çš„åœ°å€å·²è¢«è½¬æ¢  èµ„æº/å‚è€ƒ  Set Up a Basic Iptables Firewall Deep Dive into Iptables Using FirewallD on CentOS 7 </content>
    </entry>
    
     <entry>
        <title>Tomcat</title>
        <url>/blog/tomcat/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>java</tag><tag>ops</tag>
        </tags>
        <content type="html"> Tomcatæ˜¯æœ€å¸¸ç”¨çš„Javaéƒ¨ç½²å®¹å™¨ï¼Œåœ¨æˆ‘æœ€åˆæ¥è§¦Javaæ—¶å°±æ˜¯ä¸»æµï¼Œç‰¹ç‚¹å°±æ˜¯ç¨³å®š.
ä¸ä¹‹ç±»ä¼¼è¿˜æœ‰ä¸ªJettyï¼Œç”¨çš„ä¸å¤šå°±ä¸æ¶‰åŠäº†.

å®‰è£… Ubuntu å®‰è£…:
apt install tomcat8 tomcat8-admin tomcat8-docs tomcat8-examples # å¸¸ç”¨è·¯å¾„ /etc/tomcat8/server.xml /etc/default/tomcat8 /var/lib/tomcat8/webapps/ROOT/index.html  æœå‹™ï¼š
# /etc/systemd/system/tomcat.service  [Unit] Description=Apache Tomcat Web Application Container After=network.target [Service] Type=forking Environment=JAVA_HOME=/usr/java/default Environment=CATALINA_PID=/opt/tomcat/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat Environment=CATALINA_BASE=/opt/tomcat Environment=&amp;#39;CATALINA_OPTS=-Xms512M -Xmx1024M -server -XX:&#43;UseParallelGC&amp;#39; Environment=&amp;#39;JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom&amp;#39; ExecStart=/opt/tomcat/bin/startup.sh ExecStop=/opt/tomcat/bin/shutdown.sh User=tomcat Group=tomcat UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target CentOS å®‰è£…:
groupadd tomcat useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat cd /opt/ wget http://mirrors.tuna.tsinghua.edu.cn/apache/tomcat/tomcat-8/v8.5.28/bin/apache-tomcat-8.5.28.tar.gz sudo tar xvf apache-tomcat-8*tar.gz -C /opt/tomcat --strip-components=1 chown -hR tomcat:tomcat tomcat æœåŠ¡ï¼š
# vi /etc/systemd/system/tomcat.service  # Systemd unit file for tomcat [Unit] Description=Apache Tomcat Web Application Container After=syslog.target network.target [Service] Type=forking Environment=JAVA_HOME=/usr/java/default Environment=CATALINA_PID=/opt/tomcat/temp/tomcat.pid Environment=CATALINA_HOME=/opt/tomcat Environment=CATALINA_BASE=/opt/tomcat Environment=&amp;#39;CATALINA_OPTS=-Xms512M -Xmx2048M -server&amp;#39; ExecStart=/opt/tomcat/bin/startup.sh ExecStop=/bin/kill -15 $MAINPID #User=tomcat #Group=tomcat #UMask=0007 RestartSec=10 Restart=always [Install] WantedBy=multi-user.target æœåŠ¡ç®¡ç†ï¼š
# åŠ è½½æœåŠ¡ systemctl daemon-reload # å¯åŠ¨ systemctl start tomcat # å¼€æœºå¯åŠ¨ systemctl enable tomcat é…ç½® å¸¸ç”¨é…ç½® ä»¥æœ€å¸¸ç”¨çš„HTTP Connectorä¸ºä¾‹, æœ€å…³é”®çš„å‡ ä¸ªå‚æ•°æ˜¯ï¼š
 maxThreads ï¼š èƒ½åŒæ—¶å¤„ç†çš„è¯·æ±‚æ•°, é»˜è®¤200æœ‰äº›åå°ã€‚ acceptCount ï¼š è¯·æ±‚é˜Ÿåˆ—æœ€å¤§å€¼,å¤„ç†ä¸è¿‡æ¥å°±æ”¾åˆ°è¿™ä¸ªé˜Ÿåˆ—,é˜Ÿåˆ—æ»¡ä¹‹åä¼šæ‹’ç»è¯·æ±‚. é»˜è®¤100æœ‰äº›åå°. maxConnections ï¼š æœåŠ¡å™¨æ¥å—å¹¶å¤„ç†çš„æœ€å¤§è¿æ¥æ•°,è¶…å‡ºåæ–°è¿æ¥ä¼šè¢«é˜»å¡.å¯¹äºBIOè¿æ¥å™¨é»˜è®¤=maxThreads, NIOè¿æ¥å™¨é»˜è®¤10000.   Connectorçš„å®ç°ä¸»è¦æ˜¯BIO,NIO,NIO2 å…¶ä¸­BIOæ˜¯å¤§å¤šæ•°ç‰ˆæœ¬çš„é»˜è®¤å®ç°ï¼Œä½†æ˜¯åœ¨æœ€æ–°ç‰ˆTomcat8.5ï¼Œå·²ç»ä¸å†æ”¯æŒBIO
 å¼€å¯HTTPS å…³äºSSL/TLS,å»ºè®®ä½¿ç”¨Nginxåå‘ä»£ç†é…ç½®è€Œä¸ä½¿ç”¨Tomcat.
Tomcatå¼€å¯TLSå,æ€§èƒ½ä¼šæœ‰æ‰€ä¸‹é™(CPUå ç”¨æ›´é«˜).å®˜æ–¹æ¨èä½¿ç”¨APR,è€Œä¸ä½¿ç”¨BIOæˆ–NIO(ä½¿ç”¨Javaå†…ç½®çš„å®‰å…¨ç»„ä»¶JSSE)ã€‚
 APR(Apache Portable Runtime)æ˜¯Tomcatçš„Native Libraryï¼Œå®ç°ç½‘ç»œè¿æ¥å’Œéšæœºæ•°ç”Ÿæˆå™¨.ä¸»è¦ç‰¹ç‚¹:
* æ”¯æŒKeep-Aliveè¯·æ±‚çš„éé˜»å¡I/O * ä½¿ç”¨OpenSSL ç‰ˆæœ¬çš„TLS/SSL
 å…³äºå‚æ•°è°ƒä¼˜ å»ºè®®ä½¿ç”¨setenv.shçš„æ–¹å¼è°ƒæ•´å‚æ•°ï¼Œæ¯”å¦‚è®°å½•GCæ—¥å¿—
JAVA_OPTS=&amp;#34; -Xmx6g -XX:&#43;PrintGC -XX:&#43;PrintGCDetails -XX:&#43;PrintHeapAtGC -Xloggc:/usr/local/tomcat/logs/gc.log -XX:&#43;HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/usr/local/tomcat/logs/ &amp;#34; å¼€å¯è¿œç¨‹ç›‘æ§JMX CATALINA_OPTS=&amp;#34; -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=1616 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Djava.rmi.server.hostname=10.120.1.99 &amp;#34; å¼€å¯ç›®å½•åˆ—è¡¨ default servlet è´Ÿè´£å¤„ç†é™æ€èµ„æºå’Œç›®å½•åˆ—è¡¨
&amp;lt;init-param&amp;gt; &amp;lt;param-name&amp;gt;listings&amp;lt;/param-name&amp;gt; &amp;lt;param-value&amp;gt;true&amp;lt;/param-value&amp;gt; &amp;lt;/init-param&amp;gt; å‹ç¼©æ—¥å¿— # vi /etc/logrotate.d/tomcat /usr/local/tomcat/logs/catalina.out { copytruncate daily rotate 5 dateext compress missingok size 1024M } è°ƒè¯•ï¼š
 logrotate -d -f /etc/logrotate.d/tomcat
 -d = å¼€å¯è°ƒè¯•æ¨¡å¼ -f = å¼ºåˆ¶å¾ªç¯æ—¥å¿—   å…¶ä»– # æŸ¥çœ‹è¿è¡Œæ—¶å‚æ•°  ps aux | grep catalina # æˆ–è€…  jinfo # è°ƒè¯•debug  set -x # ä½¿ç”¨pid  CATALINA_PID=&amp;#34;$CATALINA_BASE/bin/catalina.pid&amp;#34;  AJP( Apache JServ Protocol)çš„ç‰¹ç‚¹æ˜¯ä½œä¸ºWeb Server(Apache)å’ŒServlet Container(Tomcat/JBoss)ä¹‹é—´çš„åå‘ä»£ç†, ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼ è¾“,æ²¡æœ‰è§£æå¼€é”€.
 èµ„æºé“¾æ¥  Tocmat7 HTTP Connector Choosing Tomcat Connectors @2014 PPT Jetty How to rotate the Tomcat catalina log file </content>
    </entry>
    
     <entry>
        <title>ç½‘ç»œåˆ†æå·¥å…·</title>
        <url>/blog/network-tools/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> è¿™é‡Œçš„ç½‘ç»œåˆ†æå·¥å…·å¯ä»¥å½’ä¸ºä¸¤å¤§ç±»:
 ç½‘ç»œä»£ç†: ç”¨çš„æœ€å¤šçš„æ˜¯ Fiddler
 åˆ†æå·¥å…·: æ¯”è¾ƒç†Ÿæ‚‰çš„æ˜¯Wireshark
  
ä»£ç†ç±» Fiddler ä»¥Androidå®¢æˆ·ç«¯æŠ“åŒ…ä¸ºä¾‹,ä¸»è¦æ­¥éª¤ä¸º:
 [Tools]-[Options], æ£€æŸ¥Connectionså’ŒHTTPSé€‰é¡¹,å¼€å¯ä»£ç†æ¨¡å¼
 å®‰å“æµè§ˆå™¨è®¿é—® :8888, ä¸‹è½½å¹¶å®‰è£…æ ¹è¯ä¹¦
 è®¾ç½®å®‰å“WIFIä»£ç†ä¸ºä»¥ä¸Šåœ°å€å’Œç«¯å£
  Charles (ä»˜è´¹) Burp Suite é»˜è®¤ç«¯å£8080
mitmproxy Pythonå†™çš„å¼€æºè°ƒè¯•å·¥å…·, è§£æ/ä¿®æ”¹/é‡æ”¾/ä¿å­˜
æŠ“åŒ…åˆ†æ Wireshark éœ€è¦åŒºåˆ†ä¸¤ç§è¿‡æ»¤è¯­è¨€
Capture Filter: Berkley Packet Filter  ç¤ºä¾‹: host xulizhao.com and port 443
 Display Filter å¸¸ç”¨è¿‡æ»¤å™¨
# åœ°å€/ç«¯å£ ip.addr == 10.0.0.1 ip.src == ip.src_host == tcp.port==4000 tcp.port == 8080 and ip.addr==127.0.0.1 # HTTP http http.request # æ˜¾ç¤ºæ‰€æœ‰GETè¯·æ±‚ # å…¶ä»– # æ˜¾ç¤ºæ‰€æœ‰ TCP resets tcp.flags.reset==1 # æ˜¾ç¤ºæ‰€æœ‰retransmissions tcp.analysis.retransmission tcp.analysis.lost_segment tcp.analysis.ack_lost_segment # æ˜¾ç¤ºåŒ…å«å…³é”®å­— traffic çš„åŒ… tcp contains traffic frame contains ... çŸ¥è¯†ç‚¹  Wiresharkçš„æ—¶é—´æˆ³å­˜åœ¨åå·®,éæ ‡å‡†æ—¶é—´ æ¯ä¸ªåŒ…åœ¨Infoå­˜åœ¨å”¯ä¸€æ ‡è¯† DUP ACK/TCP Retransmission æ˜¯æ­£å¸¸çš„ åè®®  802.11å³ä»¥å¤ªç½‘,åœ¨frames Internet Protocol/IP: åŒ…å«åœ¨æ¯ä¸ªä»¥å¤ªframe,åœ¨packets Transmission Control Protocol/TCP: åŒ…åœ¨æ¯ä¸ªIP packet,åœ¨segments Transport Layer Security/TLS: é€šè¿‡TCPå­—èŠ‚æµ,åœ¨records/messages Hypertext Transfer Protocol/HTTP: åœ¨åŠ å¯†çš„TLSè¿æ¥ä¸­æºå¸¦,ä¸€èˆ¬ä¸å¯è§  åè¯è§£é‡Š  TCP Spurious Retransmission: å‘é€æ–¹é‡ä¼ äº†æ¥æ”¶æ–¹å·²ç¡®è®¤çš„æ•°æ®, é€šå¸¸å› ä¸ºå‘é€æ–¹è®¤ä¸ºè¯¥æ•°æ®åŒ…ä¸¢å¤±è€Œé‡å‘. TCP post number reused: å¯èƒ½æ„å‘³ç½‘ç»œå­˜åœ¨é‡å¤åŒ….   ç¼–è¾‘/åˆå¹¶æ–‡ä»¶ editcap -c 10000 in.pcap out.pcap editcap -A &amp;#34;2017-05-11 12:00:00&amp;#34; -B &amp;#34;2017-05-11 13:00:00&amp;#34; in.pcap out.pcap mergecap out.pcap in1.pcap in2.pcap tcpdump  sudo tcpdump -n -s 4096 -w l.log port 80
 å¸¸ç”¨é€‰é¡¹:
 -n: ä¸åšåœ°å€å’Œç«¯å£çš„æ•°å­—/åç§°è½¬æ¢
 -i: æ•è·çš„ç½‘å¡å
 -w: æŠŠåŸå§‹åŒ…å†™åˆ°æ–‡ä»¶, è€Œä¸æ˜¯è§£æå¹¶æ‰“å°(é»˜è®¤è¡Œä¸º). å¯ä»¥ç”¨-ré€‰é¡¹å†æ¬¡æ‰“å°
  tcpflow è½»é‡çº§ç½‘ç»œåŒ…åˆ†æ
Androidå…¨å±€æŠ“åŒ…åˆ†æ(HTTP/HTTPS&#43;TCP) æœ€è¿‘é‡åˆ°çš„é—®é¢˜æ˜¯ï¼ŒAppä¹Ÿä½¿ç”¨äº†TCPåè®®ï¼Œå¦‚æœä½¿ç”¨Fiddlerè¿™ç±»HTTPä»£ç†å·¥å…·ä¼šé€ æˆåº”ç”¨ä½¿ç”¨é—®é¢˜ã€‚
æ‰€ä»¥è¦åŒæ—¶æŠ“å–HTTP/HTTPSå’ŒTCPæ•°æ®ï¼Œå®‰å“è‡ªå¸¦çš„WiFiä»£ç†ä¾¿å±€é™äº†ã€‚
æŠ“åŒ…æ–¹æ¡ˆæœ‰2ä¸ªï¼š
Androidæœºå·²ROOTED æ‰‹æœºç«¯å®‰è£…tcpdumpï¼Œå› ä¸ºå®‰å“æœ¬èº«å°±æ˜¯åŸºäº*Nixçš„å˜›ï¼Œåœ¨ç”µè„‘ç”¨WiresharkæŠ“åŒ…ã€‚
å…¶å®å°±æ˜¯ä¸€æ¡å‘½ä»¤ï¼š
adb exec-out &amp;#34;tcpdump -i any -U -w - 2&amp;gt;/dev/null&amp;#34; | wireshark -k -S -i - ç”µè„‘å»ºç«‹WiFiçƒ­ç‚¹ ç”±äºæ˜¯å…¬å¸çš„æ‰‹æœºï¼Œä¸èƒ½éšä¾¿ROOTã€‚æ€è·¯æ˜¯é€šè¿‡ç”µè„‘çš„æ— çº¿ç½‘ç»œå»ºç«‹ä¸€ä¸ªä»£ç†WiFiçƒ­ç‚¹ã€‚
åœ¨Windows7/10éƒ½å¯ä»¥ï¼Œå¦‚æœæ˜¯å°å¼æœºï¼Œéœ€è¦è‡ªå¤‡æ— çº¿ç½‘å¡ã€‚
# ç¡®å®š Hosted network supported/æ”¯æŒçš„æ‰¿è½½ç½‘ç»œä¸º Yes/æ˜¯ netsh wlan show drivers # å»ºç«‹è™šæ‹ŸWiFi netsh wlan set hostednetwork mode=allow ssid=testWiFi key=password # è®¾ç½®ç½‘ç»œè¿æ¥å…±äº«: å³é”®ç‚¹å‡»æ­£åœ¨ä½¿ç”¨çš„ä»¥å¤ªç½‘ç»œè¿æ¥ï¼Œ[å±æ€§]-[å…±äº«]æ ‡ç­¾-å‹¾é€‰ [Internetå…±äº«è¿æ¥]å¹¶ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©åˆšåˆ›å»ºçš„ç½‘ç»œã€‚ # Windows10ä½ç½®ï¼š[Windows Settings]-[Network&amp;amp;Internet]-[Change Adapter Options] #å¼€å¯æ— çº¿AP netsh wlan start hostednetwork èµ„æº é“¾æ¥  Fiddler mitmproxy tcpflow  æ‰©å±•é˜…è¯»  fiddlerå®‰å“é…ç½®å›¾æ–‡æ•™ç¨‹ fiddlerå„å›¾æ ‡çš„æ„æ€ TLSçš„Wiresharkä¾‹å­ tcpdumpå‘½ä»¤è¯¦è§£ AndroidæŠ“åŒ…æ–¹æ³•(ä¸‰) Android æŠ“åŒ…å®è·µæ€»ç»“ </content>
    </entry>
    
     <entry>
        <title>èŠèŠç›‘æ§ç³»ç»Ÿ</title>
        <url>/blog/monitoring/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> 2017å¾ˆå¿«å°±è¦è¿‡å»äº†,ä¹Ÿé¡ºä¾¿æ•´ç†ä¸‹æ•£è½åœ¨å°è±¡ç¬”è®°çš„ä¸€äº›ç‰‡æ®µ.
ç›‘æ§ç³»ç»Ÿæœ¬æ¥æ˜¯è¿ç»´çš„ä¸€ä¸ªé‡è¦ç»„æˆ,å› ä¸ºå·¥ä½œéœ€è¦ä¹Ÿæ¥è§¦äº†ä¸€äº›å¼€æºçš„ç›‘æ§ç³»ç»Ÿ, ä¸‹é¢ç®€è¦çš„èŠèŠæˆ‘æ‰€çŸ¥é“çš„.

æ¥è§¦ç›‘æ§ç³»ç»Ÿå†å² å¼€å§‹æ¥è§¦ç›‘æ§ç³»ç»Ÿæ˜¯åœ¨ä¹‹å‰å…¬å¸æ—¶é€šè¿‡è¿ç»´çš„Nagiosè®¿é—®ä¸€äº›æ•°æ®,è¿™ä¸ªå¤è€çš„ç³»ç»Ÿä¹‹å‰æœ‰å¾ˆé«˜çš„å æœ‰ç‡, èƒ½å¾ˆå¥½çš„æä¾›ç³»ç»Ÿçº§æ£€æµ‹å’Œå‘Šè­¦, æ„Ÿè§‰ç•Œé¢æ˜“ç”¨æ€§å·®äº›.åæ¥å¶ç„¶çœ‹åˆ°Cactiè¿™ä¸ªç½‘ç»œç›‘æ§çš„ç•Œé¢,æ„Ÿè§‰æ¸…çˆ½äº†è®¸å¤š.
ç¬¬ä¸€ä¸ªç”¨èµ·æ¥çš„Muninä¹Ÿæ˜¯åŒæ ·åŸºäºRRDToolçš„,å½“æ—¶èµ·ç èƒ½æ»¡è¶³ç³»ç»Ÿå’ŒJavaåº”ç”¨çš„æ€§èƒ½ç›‘æ§éœ€æ±‚.
ä¹‹åäº†è§£åˆ°æ–°æµªåœ¨ç”¨Zabbixè¿™ä¸ªå¤§è€Œå…¨çš„æ–¹æ¡ˆ,è€Œä¸”æä¾›äº†ä¸å°‘æ‰©å±•. æˆ‘å¯¹è¿™ä¸ªå¤æ‚çš„ç³»ç»Ÿæœ‰äº›æŠµè§¦,å¹¶æ²¡æœ‰ä½¿ç”¨.
å› ä¸ºæœ€ç†Ÿæ‚‰Python, ä¹Ÿæœ‰è¯•ç”¨è¿‡Graphite,æ„Ÿè§‰éƒ¨ç½²å’Œé…ç½®éƒ½ç¨æ˜¾å¤æ‚.
è¿‘ä¸¤å¹´éšç€å¤§æ•°æ®å’Œæ—¶åºæ•°æ®åº“çš„ç«çƒ­, åœ¨2016å¹´ä¸­å¼€å§‹ä½¿ç”¨ InfluxDBå’ŒGrafanaè¿™å¯¹ç»„åˆ, æ€»ä½“åŠŸèƒ½å¼ºå¤§è€Œçµæ´».
åœ¨å›½å†…,å°ç±³å¼€æºçš„Open-Falconä¹Ÿæœ‰è¾ƒå¤šåº”ç”¨,æˆ‘çš„é¡¹ç›®å¤ªå°æš‚æ—¶ç”¨ä¸åˆ°:)
æ€»çš„æ¥è¯´,æœ€è¿‘å‡ å¹´çš„è¶‹åŠ¿æ˜¯ç›‘æ§ç³»ç»Ÿç”¨Goå¼€å‘,ä¸€èˆ¬ç”±ä¸“é—¨çš„æ—¶åºæ•°æ®åº“å­˜å‚¨æ•°æ®.
ç›‘æ§ç³»ç»Ÿç»„æˆ ç›‘æ§ç³»ç»Ÿä¸€èˆ¬ç”±ä¸¤éƒ¨åˆ†æ„æˆ:
 åº¦é‡æ•°æ®æ”¶é›†å’Œå¯è§†åŒ– æ”¶é›†å°½å¯èƒ½å¤šçš„æ€§èƒ½å’ŒçŠ¶æ€æ•°æ® å›¾å½¢åŒ–åšæœ‰æ„ä¹‰çš„å±•ç¤º å¦‚æœå‘ç°å¯ç–‘é—®é¢˜,å¯ä»¥å…³è”å…¶ä»–å›¾è¡¨æ‰¾åˆ°åŸå›  é”™è¯¯æ£€æµ‹ æŒ‰éœ€å‘Šè­¦, è§¦å‘æ¡ä»¶è¶Šå®½æ¾åˆ™å‘Šè­¦åº”è¯¥è¶Šå°‘ é¿å…è¯¯æŠ¥  ä»ç›‘æ§çš„å±‚æ¬¡åˆ’åˆ†çš„è¯,ä¸€èˆ¬åŒ…å«ä¸‰å±‚ç›‘æ§:
 åŸºç¡€å±‚: ä¸»æœºçš„CPU,å†…å­˜,ç½‘ç»œåŠIOç­‰ ä¸­é—´å±‚: åº”ç”¨è¿è¡Œçš„ä¸­é—´ä»¶å±‚,Nginx,Tomcat,MySQL,Redis åº”ç”¨å±‚: æœåŠ¡ç«¯åŠå®¢æˆ·ç«¯æ€§èƒ½æ•°æ®,å¦‚APIè®¿é—®æ¬¡æ•°å’Œå“åº”æ—¶é—´ç­‰  ç°ä»£çš„ç›‘æ§è¶Šæ¥è¶Šå…³æ³¨åº”ç”¨å±‚å’Œå…¶ä»–å±‚æ•°æ®çš„æ•´åˆèƒ½åŠ›,å…·æœ‰å¿«é€Ÿæ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆ,æ–¹ä¾¿æ‰©å®¹æˆ–ä»£ç ä¼˜åŒ–.
InfluxDataæä¾›çš„å¼€æºæ–¹æ¡ˆ å¼€æºçš„å‡ ä¸ªäº§å“ç®€ç§°TICK. ç›¸å¯¹äºä»˜è´¹çš„ä¼ä¸šç‰ˆ/äº‘ç‰ˆå°‘äº†é›†ç¾¤å’Œé«˜å¯ç”¨ç­‰æ”¯æŒ.
æˆ‘ä¸»è¦ä½¿ç”¨çš„Telegrafå’ŒInfluxDB, åä¸¤è€…æ„Ÿè§‰æ˜“ç”¨æ€§å¤ªå·®.
å±•ç¤ºè¿™éƒ¨åˆ†ä½¿ç”¨Grafanaæ›¿ä»£,å®ƒè‡ªå¸¦åŸºæœ¬çš„å‘Šè­¦.
 Telegraf : æ€§èƒ½æ•°æ®çš„æ”¶é›†,æ’ä»¶æ”¯æŒä¸°å¯Œ InfluxDB: æ ¸å¿ƒçš„æ—¶åºæ•°æ®åº“,è´Ÿè´£å­˜å‚¨ Chronograf : å‰ç«¯å›¾å½¢åŒ–å±•ç¤º Kapacitor: æµæ•°æ®å¤„ç†,å¼‚å¸¸æ£€æµ‹å¹¶è§¦å‘æŠ¥è­¦  Telegrafå¤‡å¿˜ # å®‰è£… sudo dpkg -i telegraf_*_amd64.deb # Ubuntu sudo yum localinstall telegraf-*.rpm # CentOS # å¸¸ç”¨æ’ä»¶ procstat/ netstat/ jolokia/ postgres/ statsd # æµ‹è¯•é…ç½® telegraf -config /etc/telegraf/telegraf.conf -input-filter processes -test # å¯åŠ¨æœåŠ¡ sudo service telegraf start InfluxDBå¤‡å¿˜ å‡ ä¸ªæ¦‚å¿µ:
 measurement : æ¦‚å¿µä¸Šå¯¹åº”SQLè¡¨,ä¸»ç´¢å¼•æ˜¯æ—¶é—´æˆ³ tags : å¯¹åº”è¡¨åˆ—,æœ‰ç´¢å¼• fields : å¯¹åº”è¡¨åˆ—,æ— ç´¢å¼•  # æŸ¥çœ‹æ—¥å¿—  sudo journalctl -u influxdb.service # å‘½ä»¤è¡Œå·¥å…·  influx ## æ€§èƒ½æé«˜  # èµ°UDPåè®®  # insertèµ°æ‰¹é‡æ¥å£  # å¦‚æœå†…å­˜å¤Ÿå¤§,å¢åŠ  LRUå¤§å° InfluxQL ç±»SQLæŸ¥è¯¢
SHOW MEASUREMENTS LIST SERIES # æŸ¥è¯¢ select * from mem where host=&amp;#39;moon&amp;#39; select \* from /.\*/ order by time desc limit 3 SHOW TAG VALUES FROM &amp;#34;mem&amp;#34; WITH KEY = &amp;#34;host&amp;#34; # åˆ é™¤ drop measurement mem delete from com\_load\_avg_one where time &amp;lt; now() -1h # æ—¶é—´æŸ¥è¯¢, æ ¼å¼now() æˆ–è€…2016-11-01 HH:MM:SS  # æ³¨: æ“ä½œç¬¦å’Œæ—¶é—´ä¹‹é—´éœ€è¦ ç©ºæ ¼; æ—¶é—´ä¸²éœ€è¦ä½¿ç”¨ å•å¼•å· &amp;#34;; å¦‚æœä¸æŒ‡å®šæ—¶é—´,é»˜è®¤ä¸º 00:00:00  # æ­£åˆ™åŒ¹é…, æ”¯æŒ measurements å’Œ tags  /.\*abc.\* / # åŒ…å«å­—ç¬¦ä¸²  /^abc/ # ä»¥æŒ‡å®šå­—ç¬¦ä¸²ä¸ºå¼€å¤´  /[ab]/ #åŒ…å« a æˆ– b  # WHEREå­è¯­å¥, =~ åŒ¹é…, !~ ä¸åŒ¹é…   Grafana # å¯åŠ¨æœåŠ¡  systemctl start grafana-server # é»˜è®¤åœ°å€ http://127.0.0.1:3000/  # é»˜è®¤ç”¨æˆ·å/å¯†ç :admin/admin  # é…ç½®æ–‡ä»¶ /etc/grafana/grafana.ini Javaåº”ç”¨çš„ç›‘æ§  Tomcatå¤§éƒ¨åˆ†é€šè¿‡æ’ä»¶å½¢å¼ç›‘æ§ Jolokia: Remote JMX with JSON over HTTP Servo : Netflixçš„ä¸€ä¸ªJavaåº“,JMXçš„æ–¹å¼ jmxtrans: ä¹Ÿæ˜¯é€šè¿‡JMXçš„æ–¹å¼  å…¶ä»–æ–¹æ¡ˆ  StatsD: è¿™å·²ç»æˆä¸ºäº‹å®ä¸Šçš„é€šç”¨åè®®,èšåˆåŠŸèƒ½å¾ˆå¼ºå¤§. ä½œä¸ºæ’ä»¶é…åˆtelegrafå·¥ä½œ bosun : StackExchnageå‡ºå“,ä¾§é‡äºå‘Šè­¦ Cabot NetData: è½»é‡çº§æç®€ç›‘æ§ monit: è½»é‡çº§ç›‘æ§  èµ„æºé“¾æ¥  Grafana/ä¸€äº›æ•°æ®åº“Dashboards InfluxDB Prometheus : SoundCloudå¼€æºçš„Graphiteçš„æ›¿ä»£å“/ Prometheusä¸å…¶ä»–ç³»ç»Ÿæ¯”è¾ƒ Open-Falcon Graphite Sensu Zabbix RRDtool / Cacti / Munin Nagios å¤§å®¶æ—  Nagios / æ‰©å±• nagios-herald å®¢æˆ·ç«¯AgentNSClient&#43;&#43; åˆ†æ”¯/ç»§ä»»Icinga 2  </content>
    </entry>
    
     <entry>
        <title>å¾®æœåŠ¡</title>
        <url>/blog/microservices/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>cloud</tag><tag>architecture</tag>
        </tags>
        <content type="html"> å¾®æœåŠ¡æ˜¯æœ€è¿‘ä¸¤å¹´æµè¡Œèµ·æ¥çš„ä¸€ç§æ¶æ„è®¾è®¡æ–¹æ³•,å¯ä»¥å¾ˆå¥½çš„å’ŒDocker,Kubernetesç»“åˆèµ·æ¥.

ä»æœ€æ—©çš„&amp;rdquo;å•ä½“åº”ç”¨&amp;rdquo;åˆ°&amp;rdquo;SOA(é¢å‘æœåŠ¡çš„æ¶æ„)&amp;ldquo;å†åˆ°&amp;rdquo;å¾®æœåŠ¡æ¶æ„&amp;rdquo;,è¿™äº›æ–°ä¸œè¥¿éƒ½æ˜¯å¤§å…¬å¸æå‡ºæ¥çš„æœ€ä½³å®è·µ.
è½¯ä»¶ç•Œçš„çœŸç†æ˜¯æ²¡æœ‰é“¶å¼¹,æ‰€ä»¥å¦‚æœè¦ä¸Šå¾®æœåŠ¡,ä½ å°±å¾—åœ¨éƒ¨ç½²,æµ‹è¯•å’Œç›‘æ§ç­‰å…¶ä»–åœ°æ–¹åšçš„æ›´å¥½(è‡ªåŠ¨åŒ–),å¦åˆ™ç³»ç»Ÿçš„å¤æ‚åº¦ä¼´éšåˆ†å¸ƒå¼ç³»ç»Ÿåè€Œä¸Šå‡äº†,å¾—ä¸å¿å¤±.
 ä¸å¾—ä¸è¯´ThoughtWorksææ•æ·,å¾®æœåŠ¡è¿™äº›æ–°æ¦‚å¿µçœŸçš„å¾ˆå…­,ä½†æ˜¯ä¸­å°å…¬å¸å¾—æ²‰ä½æ°”,æ™šç‚¹ä¸Šè½¦
 ä¸‹é¢è®°å½•ä¹‹å‰çš„ä¸€äº›æ•´ç†.
ä»€ä¹ˆæ˜¯å¾®æœåŠ¡ è¿™é‡Œå¿…é¡»æåˆ°å¤§ç¥Martin Floweræ—©åœ¨2014å¹´çš„è¿™ç¯‡æ–‡ç« .å¤§è‡´ä¸º:
 æœåŠ¡ç»„ä»¶åŒ–  ç»„ä»¶: å¯ä»¥ç‹¬ç«‹æ›´æ¢å’Œå‡çº§çš„å•å…ƒ æœåŠ¡ä»¶HTTPé€šè®¯  æŒ‰ä¸šåŠ¡ç»„ç»‡å›¢é˜Ÿ  å…¨æ ˆçš„è¦æ±‚  åšäº§å“çš„æ€åº¦(è€Œéé¡¹ç›®)  æŒç»­å…³æ³¨å¹¶æå‡  æ™ºèƒ½ç»ˆç«¯å’Œå“‘ç®¡é“: ç²—ç²’åº¦é€šè®¯(éRPC)  HTTP Rest è½»é‡çº§æ¶ˆæ¯ å¼ºè°ƒæ€§èƒ½ç”¨äºŒè¿›åˆ¶  å»ä¸­å¿ƒåŒ–æ²»ç†  æŠ€æœ¯é€‰å‹ç‹¬ç«‹  å»ä¸­å¿ƒè¯æ•°æ®ç®¡ç†/å­˜å‚¨  æ¯ä¸ªæœåŠ¡ç®¡ç†è‡ªå·±çš„æ•°æ®åº“ æ•°æ®ä¸€è‡´æ€§ä¿è¯  æœåŠ¡ä»¶&amp;rsquo;æ— äº‹åŠ¡&amp;rsquo;è°ƒç”¨ ä¿è¯æœ€ç»ˆä¸€è‡´æ€§   åŸºç¡€è®¾æ–½(è¿ç»´)è‡ªåŠ¨åŒ–  æŒç»­äº¤ä»˜  è‡ªåŠ¨åŒ–æµ‹è¯• è‡ªåŠ¨åŒ–éƒ¨ç½²   å®¹é”™è®¾è®¡  å¿«é€Ÿæ£€æµ‹æ•…éšœå¹¶è‡ªåŠ¨æ¢å¤  ç›‘æ§å’Œæ—¥å¿—  æœåŠ¡çŠ¶æ€,æ–­è·¯ç”±çŠ¶æ€,ååé‡,å»¶è¿Ÿ    æ¼”è¿›å¼è®¾è®¡  å•ä½“monolith åˆ° (éƒ¨åˆ†)å¾®æœåŠ¡   å¾®æœåŠ¡ç½‘ç»œ Service Mesh
åäºŒè¦ç´ åº”ç”¨å®£è¨€  è¿™ä¸ªå®£è¨€æ˜¯Herokuå‘å¸ƒçš„æ„å»ºSaaS(è½¯ä»¶å³æœåŠ¡)åº”ç”¨çš„æ–¹æ³•è®º.
è™½ç„¶å’Œå¾®æœåŠ¡ä¸ç›´æ¥ç›¸å…³,ä¹Ÿé€‚åˆä½œä¸ºå‚è€ƒ
 ä½¿ç”¨æ ‡å‡†åŒ–æµç¨‹è‡ªåŠ¨é…ç½®ï¼Œä»è€Œä½¿æ–°çš„å¼€å‘è€…èŠ±è´¹æœ€å°‘çš„å­¦ä¹ æˆæœ¬åŠ å…¥è¿™ä¸ªé¡¹ç›®ï¼›
 å’Œæ“ä½œç³»ç»Ÿä¹‹é—´å°½å¯èƒ½çš„åˆ’æ¸…ç•Œé™ï¼Œåœ¨å„ä¸ªç³»ç»Ÿä¸­æä¾›æœ€å¤§çš„å¯ç§»æ¤æ€§ï¼›
 é€‚åˆéƒ¨ç½²åœ¨ç°ä»£çš„äº‘è®¡ç®—å¹³å°ï¼Œä»è€Œåœ¨æœåŠ¡å™¨å’Œç³»ç»Ÿç®¡ç†æ–¹é¢èŠ‚çœèµ„æºï¼›
 å°†å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„å·®å¼‚é™è‡³æœ€ä½ï¼Œå¹¶ä½¿ç”¨æŒç»­äº¤ä»˜å®æ–½æ•æ·å¼€å‘ï¼›
 å¯ä»¥åœ¨å·¥å…·ã€æ¶æ„å’Œå¼€å‘æµç¨‹ä¸å‘ç”Ÿæ˜æ˜¾å˜åŒ–çš„å‰æä¸‹å®ç°æ‰©å±•ï¼›
   è¿™å¥—ç†è®ºé€‚ç”¨äºä»»æ„è¯­è¨€å’Œåç«¯æœåŠ¡ï¼ˆæ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ç¼“å­˜ç­‰ï¼‰å¼€å‘çš„åº”ç”¨ç¨‹åºã€‚
 åŸºå‡†ä»£ç :ä¸€ä»½åŸºå‡†ä»£ç ,å¤šä»½éƒ¨ç½² ä¾èµ–:æ˜¾å¼å£°æ˜ä¾èµ–å…³ç³» é…ç½®: æ¨èå°†åº”ç”¨çš„é…ç½®å­˜å‚¨äºç¯å¢ƒå˜é‡ åç«¯æœåŠ¡: å°†åç«¯æœåŠ¡å½“ä½œé™„åŠ èµ„æº æ„å»º,å‘å¸ƒ,è¿è¡Œ: ä¸¥æ ¼åŒºåˆ†ä¸‰ä¸ªæ­¥éª¤ è¿›ç¨‹:ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªæ— çŠ¶æ€è¿›ç¨‹è¿è¡Œåº”ç”¨ ç«¯å£ç»‘å®š å¹¶å‘ æ˜“å¤„ç†: å¿«é€Ÿå¯åŠ¨å’Œä¼˜é›…ç»ˆæ­¢å¯æœ€å¤§åŒ–å¥å£®æ€§ å¼€å‘ç¯å¢ƒå’Œçº¿ä¸Šç¯å¢ƒç­‰ä»· æ—¥å¿— ç®¡ç†è¿›ç¨‹  æ¦‚å¿µ  å¾ªè¯æ¶æ„:æ¶æ„åŸºäºå®è·µçš„è¯æ®ã€æ¥è‡ªå†å²é¡¹ç›®æˆ–äº²è‡ªè¯•éªŒçš„ç»éªŒ(é€‚åˆåº”ç”¨éœ€æ±‚çš„æ¶æ„), By Rod Johnson. ESB: ä¼ä¸šæœåŠ¡æ€»çº¿, SOAçš„ç»„æˆéƒ¨åˆ†. OSGi: Open Service Gateway Initiative, Javaæ¨¡å—åŒ–æŠ€æœ¯,æ…ç”¨.  èµ„æº  &amp;lt;å¾®æœåŠ¡è®¾è®¡&amp;gt; by Sam Newman &amp;lt;å¾®æœåŠ¡ï¼šä»è®¾è®¡åˆ°éƒ¨ç½²&amp;gt;åœ¨çº¿é˜…è¯» Chris Richardson å¾®æœåŠ¡ç³»åˆ— åäºŒè¦ç´  </content>
    </entry>
    
     <entry>
        <title>åˆ©å™¨ä¹‹ZSH</title>
        <url>/blog/zsh/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æœ‰äº›å·¥å…·çœŸçš„å¾ˆèƒ½æé«˜æ•ˆç‡, æ¯”å¦‚oh-my-zshè¿™ä¸ªæ‰©å±•(zshæœ¬èº«æ¯”bashæ›´å¼ºå¤§).
çºµè§‚è½¯ä»¶ä¸–ç•Œ,ä¸€ä¸ªè½¯ä»¶ç³»ç»Ÿèƒ½æµè¡Œèµ·æ¥å¾ˆå¤§åŸå› æ˜¯å…¶ç”Ÿæ€æ˜¯ä¸æ˜¯å¤Ÿä¸°å¯Œå’Œç¹è£,æ¯”å¦‚å®¹å™¨docker,Springæ¡†æ¶.
oh-my-zshæä¾›äº†ä¸°å¯Œçš„æ’ä»¶åŠä¸»é¢˜,æ˜¯æˆ‘çš„è£…æœºå¿…å¤‡. åœ¨è¿™é‡Œè®°å½•ä¸‹å¸¸ç”¨è®¾ç½®.

å®‰è£…åŠæ‰©å±• å®‰è£…zshå’Œon-my-zsh sudo apt install zsh sh -c &amp;#34;$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&amp;#34; å®‰è£…æ’ä»¶ # Ubuntu sudo apt install zsh-syntax-highlighting autojump # Mac brew install zsh-syntax-highlighting autojump å®‰è£…æ’ä»¶ç®¡ç†å·¥å…· antigen
https://github.com/zsh-users/antigen # Ubuntu sudo apt-get install zsh-antigen # Mac brew install antigen æ›´å‹å¥½çš„æ˜¾ç¤º ä½¿ç”¨powerline
sudo apt install powerline # æˆ–è€…ç”¨pipå®‰è£… pip install --user powerline-status å¸¸ç”¨é…ç½® æ ¹æ®åå¥½ä¿®æ”¹ ~/.zshrc
# æˆ‘å–œæ¬¢çš„ä¸»é¢˜ agnoster ZSH_THEME=&amp;#34;agnoster&amp;#34; # å¸¸ç”¨æ’ä»¶, gitå’Œautojumpå¿…å¤‡ plugins=(git autojump git-flow git-extras python sudo extract zsh-syntax-highlighting) # é…ç½®é»˜è®¤ç”¨æˆ· DEFAULT_USER=xulz å¸¸ç”¨å‘½ä»¤
# é‡æ–°åŠ è½½é…ç½®ä»¥ç”Ÿæ•ˆ source ~/.zshrc # æ›´æ–°é»˜è®¤shellä¸ºzsh chsh -s /bin/zsh ç¼©çŸ­è·¯å¾„æ˜¾ç¤º å¦‚æœæ–‡ä»¶è·¯å¾„å±‚çº§è¾ƒå¤š,æ˜¾ç¤ºè·¯å¾„æ¯”è¾ƒå è§†é‡. å¯ä»¥ä¿®æ”¹ä¸º:
# cd ~/.oh-my-zsh/themes cp agnoster.zsh-theme xulz.zsh-theme vi xulz.zsh-theme # ä¿®æ”¹ prompt_dir()æ–¹æ³• prompt_dir() { # å¦‚æœè·¯å¾„è¶…è¿‡5ä¸ªå±‚çº§,åªæ˜¾ç¤ºæœ€å2çº§ç›®å½•, Homeæ˜¾ç¤ºä¸º~ prompt_segment blue black &amp;#39;%(5~|%-1~/.../%2~|%4~)&amp;#39; }</content>
    </entry>
    
     <entry>
        <title>Goè¯­è¨€å­¦ä¹ ç¬”è®°</title>
        <url>/blog/golang/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> æ¥è§¦Goæœ‰æ®µæ—¶é—´äº†ï¼Œæ„Ÿè§‰æœ‰å‡ ä¸ªå­¦ä¹ èµ„æºå¾ˆæœ‰å¸®åŠ©ï¼š
 å®˜æ–¹GoæŒ‡å— : è¾¹å†™è¾¹å­¦, æœ€è½»æ¾ç®€å•çš„æ–¹å¼ ç³»ç»Ÿçš„å­¦ä¹ : æ¨èä¹¦ ï¼Œ æˆ‘æ˜¯å…ˆçœ‹çš„ä¸­æ–‡ç”µå­ç‰ˆä¹‹åä¹°çš„å®ä½“ä¹¦ã€‚ å®˜æ–¹æ–‡æ¡£&amp;rdquo;Effective Go/å®æ•ˆGoç¼–ç¨‹&amp;rdquo; : ç†è§£Goçš„å¿…è¯»æ–‡æ¡£

è‡ªå·±çš„ä½“ä¼šæ˜¯å¦‚æœåªçœ‹ä¸å†™ï¼Œç­‰å†™ä»£ç æ—¶ä¼šå‘ç°å®é™…æ²¡è®°ä½å¤šå°‘ã€‚è¿™äº›å¥½èµ„æ–™æœ‰çš„åœ°æ–¹éœ€è¦å¤šçœ‹å‡ éï¼Œå†ç»“åˆå¹³æ—¶å¤šå†™ä»£ç å»ç†è§£ã€‚
  ä¸‹é¢æ˜¯ä¸€äº›Goè¯­è¨€å­¦ä¹ ç¬”è®°ï¼Œä½œä¸ºå­¦ä¹ çš„æ±‡æ€»ã€‚
æœ¬åœ°è¿è¡ŒGoæŒ‡å— go get github.com/Go-zh/tour/gotour gotour  å¦‚æœä»¥ä¸Šå‘½ä»¤å¤±è´¥,è®¿é—®ä¸­æ–‡åœ¨çº¿ç‰ˆæœ¬
 æœ¬åœ°è¿è¡ŒGoæ–‡æ¡£ go get golang.org/x/tools/cmd/godoc godoc -http=:6060 //ä¹‹åç”¨æµè§ˆå™¨è®¿é—® http://127.0.0.1:6060/doc/ newå’Œmakeå‡½æ•°  newè¿”å›æŒ‡é’ˆ,makeè¿”å›å€¼
 new(T) : ä¸ºç±»å‹Tçš„æ–°å¯¹è±¡ç”³è¯·é›¶å€¼å†…å­˜å¹¶è¿”å›å†…å­˜åœ°å€,(ä¸åˆå§‹åŒ–å†…å­˜)çš„å¥½å¤„æ˜¯ä¸éœ€è¦åˆå§‹åŒ–å‡½æ•°.
 make(T, args) ï¼š ä¸ºslice,map,channelç­‰è¿”å›åˆå§‹åŒ–ç±»å‹Tåçš„å€¼(éæŒ‡é’ˆ)
   type Thing struct { Name string Num int } // å¦‚æœåŒ…é‡Œåªæœ‰ä¸€ä¸ªç±»å‹ï¼Œå‡½æ•°åå¯ä»¥ç®€å†™ä¸ºNew // æ„é€ å‡½æ•°ä½¿ç”¨çš„ç®€å†™æ ¼å¼ func NewThing(someParameter string) *Thing { return &amp;amp;Thing{someParameter, 33} } TBC&amp;hellip;
æ‰©å±•é˜…è¯»  Goåº“æ–‡æ¡£æŸ¥è¯¢ Effective Goä¸­è‹±åŒè¯­ç‰ˆ Goå¦‚ä½•åˆå§‹åŒ– Effective Go: newå’Œmakeçš„åŒºåˆ« </content>
    </entry>
    
     <entry>
        <title>Goç½‘ç»œå¼€å‘ç¬”è®°</title>
        <url>/blog/go-networking/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> ç”¨Goå¼€å‘ç½‘ç»œå¾ˆå¸¸è§,ç”±äºå¯¹ç³»ç»Ÿåº“è¿˜ä¸æ˜¯å¾ˆç†Ÿ,åšä¸‹ç®€å•çš„ç¬”è®°.

ç³»ç»Ÿåº“æ¨¡å—  net : TCPè¿æ¥ net.Conn net/http : HTTPå¤„ç† crypto/tls : SSL/TLSå¤„ç†ç½‘ç»œæ•°æ®å¤„ç† encoding/json encoding/binary  JSONçš„è¦ç‚¹  Goå¯¹è±¡ä¸JSONè½¬æ¢ï¼š  Marshal : æŠŠå¯¹è±¡ç¼–ç ä¸ºJSONæ•°æ®æ ¼å¼ Unmarshalï¼š æŠŠJSONæ•°æ®è§£ç ä¸ºGo å¯¹è±¡  streamså½¢å¼çš„JSONæ•°æ®è¯»å†™(Reader/Writer)ï¼š  NewDecoder ä»è¾“å…¥è¯»å–å¹¶ç¼–ç  NewEncoder ç¼–ç å¹¶å†™å…¥è¾“å‡º   type Foo struct { Bar string } body := new(bytes.Buffer) foo1 := Foo{&amp;#34;barTest&amp;#34;} json.NewEncoder(b).Encode(foo1) res, _ := http.Post(&amp;#34;https://httpbin.org/post&amp;#34;, &amp;#34;application/json; charset=utf-8&amp;#34;, body) foo2 := new(Foo) // newè¿”å›æŒ‡é’ˆ json.NewDecoder(r.Body).Decode(foo2) foo3 := Foo{} // æˆ–è€… var foo3 Foo json.NewDecoder(r.Body).Decode(&amp;amp;foo3)  *RawMessage:æŒ‡é’ˆ,å¤„ç†åµŒå¥—json  // æ¥å—æ”¶åˆ°jsonåµŒå¥—æ ¼å¼çš„å“åº”, {&amp;#34;name&amp;#34;:{&amp;#34;first&amp;#34;:&amp;#34;Michael&amp;#34;,&amp;#34;last&amp;#34;:&amp;#34;Xu&amp;#34;},&amp;#34;gender&amp;#34;:&amp;#34;male&amp;#34;}  //var dat map[string]*json.RawMessage  var dat map[string]interface{} json.Unmarshal(response, &amp;amp;dat) r := dat[&amp;#34;name&amp;#34;].(map[string]interface{}) firstName := r[&amp;#34;first&amp;#34;].(string) ä»£ç ç¤ºä¾‹ HTTPçš„ä¾‹å­ // å¿½ç•¥HTTPSè¯ä¹¦æ£€æŸ¥,å› ä¸ºæœ¬åœ°ç”¨çš„è‡ªç­¾å  tr := &amp;amp;http.Transport{TLSClientConfig: &amp;amp;tls.Config{InsecureSkipVerify: true}} // è‡ªå®šä¹‰å®¢æˆ·ç«¯  client := &amp;amp;http.Client{Transport: tr} payload := `{&amp;#34;username&amp;#34;:&amp;#34;xulz&amp;#34;}` // åˆ›å»ºè¯·æ±‚,æ³¨:ä¸ºç®€å•æœŸé—´å¿½ç•¥äº†é”™è¯¯æ£€æŸ¥  req, _ := http.NewRequest(&amp;#34;POST&amp;#34;, &amp;#34;https://xulizhao.com/api/login&amp;#34;, bytes.NewBuffer([]byte(payload))) // å®šåˆ¶å¤´ä¿¡æ¯  req.Header.Set(&amp;#34;Content-Type&amp;#34;, &amp;#34;application/json&amp;#34;) resp, _ := client.Do(req) // è®°å¾—å…³é—­è¿æ¥  defer resp.Body.Close() // æŠŠå“åº”è½¬æ¢ä¸ºå¯¹è±¡  var ret LoginResponse if err := json.NewDecoder(resp.Body).Decode(&amp;amp;ret); err != nil { log.Warn(&amp;#34;error in json decode&amp;#34;, err) } TCPçš„ä¾‹å­ type LoginReq struct { Username string `json:&amp;#34;username&amp;#34;` Password int `json:&amp;#34;password` } // è¯»æ•°æ®  func handleRead(conn net.Conn) []byte { buf := make([]byte, 1024) // æ³¨: è¿”å›è¯»åˆ°çš„å­—èŠ‚æ•°  rLen, err := conn.Read(buf) checkError(err) r := buf[:rLen-1] // å‡è®¾å‰2ä¸ªå­—èŠ‚ä¸ºå®é™…æ•°æ®å¤§å°  size := binary.BigEndian.Uint32(r[:2]) log.Debug(&amp;#34;Recv:&amp;#34;, string(r)) return r } // å†™æ•°æ®  func handleWrite(conn net.Conn, cmd []byte) { _, err := conn.Write(cmd) log.Debug(&amp;#34;Sent:&amp;#34;, string(cmd)) checkError(err) } func main() { // å®¢æˆ·ç«¯å¿½ç•¥TLSæ£€æŸ¥  conf := &amp;amp;tls.Config{InsecureSkipVerify: true} server := ServerHost &#43; &amp;#34;:&amp;#34; &#43; ServerPort // å»ºç«‹TCPè¿æ¥  conn, err := tls.Dial(&amp;#34;tcp&amp;#34;, server, conf) checkError(err) defer conn.Close() auth := LoginReq(&amp;#34;xulz&amp;#34;, &amp;#34;password&amp;#34;) handleWrite(conn, auth) handleRead(conn) }
æ‰©å±•é˜…è¯»  jsonçš„ç”¨æ³•è®²è§£ å®˜æ–¹åšå®¢, ä»£ç ç¤ºä¾‹ Go socketç¼–ç¨‹å®è·µ </content>
    </entry>
    
     <entry>
        <title>IntelliJ IDE</title>
        <url>/blog/intellij-ide/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æ¥è§¦æœ€æ—©æœ€å¤šçš„IDEæ˜¯Eclipse,å½“æ—¶ä¸€æœ‰å¤§ç‰ˆæœ¬æˆ‘å°±ä¸‹è½½æ›´æ–°,å´æ€»æ„Ÿè§‰å˜åŒ–ä¸å¤§.
åæ¥æ—¶ä¸æ—¶æœ‰äººå®‰åˆ©IntelliJ,æˆ‘è¯•ç”¨åä½“ä¼šä¸æ·±,å†è¯´å•†ä¸šç‰ˆå¾ˆè´µ(æ—©æœŸæ²¡æœ‰ç¤¾åŒºç‰ˆ),æ²¡æœ‰ç»§ç»­ä½¿ç”¨.
åšPythonå¼€å‘å,æ…¢æ…¢ä»Eclipse&#43;PyDevé€æ¸åˆ‡æ¢åˆ°PyCharm,æ„Ÿè§‰è¿™æ‰æ˜¯IDEçš„æ ·å­,ä¹Ÿå°±æ˜¯è¶³å¤Ÿæ™ºèƒ½.
ä¹‹åè¶Šæ¥è¶Šå–œæ¬¢å…¨å®¶æ¡¶,IDEA,DataGrip,GoLand, æ¯•ç«Ÿæ“ä½œä¹ æƒ¯äº†,è€Œä¸”æˆ‘æ¯æ¬¡å®‰è£…å®Œå¿…é¡»ç»™ç•Œé¢æ¢æˆDarculaçš„é»‘è‰²ä¸»é¢˜.

 è¯è¯´æœ€æ—©å–œæ¬¢JetBrainså®¶çš„äº§å“å¯ä»¥è¿½æº¯åˆ°ä»–å‡ºå“çš„RSSé˜…è¯»å™¨:Omea Reader
 è¯´è¿™äº›åªæƒ³åˆ†äº«é¼“åŠ±æ›´å¤šäººä½¿ç”¨è¿™ä¸ªå…¨çƒæœ€å¥½ç”¨çš„IDEç³»åˆ—.
ä¸‹é¢æ˜¯ä¸€äº›ä½¿ç”¨æŠ€å·§,ä¹Ÿè®¸ä½ å·²ç»çŸ¥é“.
è¿è¡ŒGoä»£ç å‰å…ˆæ ¼å¼åŒ– é—®é¢˜: åšè°ƒè¯•ä¸´æ—¶æ³¨é‡Šå,æ¯æ¬¡è¿è¡Œè¦å…ˆæ³¨é‡Šæ‰ä¸ç”¨çš„import,çœŸçš„æŒºçƒ¦äºº
è§£å†³: å…ˆä¸‹è½½ File Watchersè¿™ä¸ªå®˜æ–¹æ’ä»¶,ä¹‹ååˆ° [Preference]-[Tools]-[File Watchers]å»ºç«‹è§„åˆ™(ç¨‹åºè·¯å¾„æ ¹æ®æœ¬æœºæƒ…å†µè°ƒæ•´):
  Go Imports  </content>
    </entry>
    
     <entry>
        <title>Goå¼€å‘é‡åˆ°çš„å‘</title>
        <url>/blog/go-fix-it/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> ç”±äºä¹‹å‰ä¸»è¦ç”¨çš„æ˜¯Pythonè¿™ç±»åŠ¨æ€è¯­è¨€,åˆ‡æ¢åˆ°Goè¿˜æœ‰äº›ä¸é€‚åº”.
è¿™äº›å‡ºé”™ä¿¡æ¯çœ‹çš„ä¸€å¤´é›¾æ°´,è®°ä¸‹æ¥ä¾›å‚è€ƒ.

å‘1: invalid memory address or nil pointer dereference åœºæ™¯: ç”¨httpåŒ…ç»™æŒ‡å®šçš„apiå‘é€POSTä¸€æ®µjsonæ•°æ®
åŸå› : æˆ‘ä½¿ç”¨çš„URLæ˜¯è‡ªç­¾åçš„httpsæœåŠ¡,éœ€è¦å£°æ˜å¿½ç•¥SSLæ£€æŸ¥
tr := &amp;amp;http.Transport{TLSClientConfig:&amp;amp;tls.Config{InsecureSkipVerify:true},} client := &amp;amp;http.Client{Transport:tr}</content>
    </entry>
    
     <entry>
        <title>Kubernetes</title>
        <url>/blog/kubernetes/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>kubernetes</tag><tag>ops</tag>
        </tags>
        <content type="html"> Kubernetes(ç¼©å†™ä¸ºk8s)æ˜¯æœ€æµè¡Œçš„å¼€æºå®¹å™¨ç®¡ç†å¹³å°, ç°åœ¨ä¹Ÿæ˜¯äº‹å®ä¸Šçš„å®¹å™¨ç¼–æ’è°ƒåº¦æ ‡å‡†.
æ‰“ç®—å†™ç³»åˆ—çš„ç›¸å…³æ–‡ç« ,è®°å½•è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹.
 Kuberneteséƒ¨ç½²ç¯‡:æœ¬åœ°å¼€å‘æµ‹è¯•ç¯å¢ƒæ­å»º Kuberneteséƒ¨ç½²ç¯‡:Kubesprayæ–¹å¼è‡ªåŠ¨åŒ– ç”¨kubeadmæ‰‹åŠ¨æ­å»ºKubernetesé›†ç¾¤ kubectlå‘½ä»¤æ±‡æ€» Kuberneteså‘½åç©ºé—´çš„åº”ç”¨  
ä¸€äº›å…¶ä»–ç¬”è®°.
æœ€ä½³å®è·µ  ä¸è¦è®¾ç½®æ¯”å¿…è¦çš„é»˜è®¤å€¼ ä¸è¦ä½¿ç”¨è£¸Pod, ä½¿ç”¨Deployment,ReplicaSet,Job ä½¿ç”¨å‰æå‰åˆ›å»ºService, ä½¿ç”¨åŸŸå å–„ç”¨label å®¹å™¨é•œåƒä¸è¦ä½¿ç”¨:latestæ ‡ç­¾ (é»˜è®¤çš„imagePullPolicyæ˜¯IfNotPresent,å³æœ¬åœ°ä¸å­˜åœ¨é•œåƒæ—¶æ‰pull) çµæ´»ä½¿ç”¨ç›®å½•, kubectl apply/create -f  å¿«é€Ÿåˆ›å»ºå•å®¹å™¨çš„éƒ¨ç½²/æœåŠ¡: kubectl run/expose  ç¼©å†™    ç¼©å†™ æè¿°     CRD Custom Resource Definition, k8s 1.7å¼•å…¥    è¿è¡Œåº”ç”¨ Deployment ä¸º Pod å’Œ ReplicaSet æä¾›äº†ä¸€ä¸ªå£°æ˜å¼å®šä¹‰(declarative)æ–¹æ³•ï¼Œç”¨æ¥æ›¿ä»£ä»¥å‰çš„ReplicationController æ¥æ–¹ä¾¿çš„ç®¡ç†åº”ç”¨ã€‚
åœ¨æ–°ç‰ˆæœ¬çš„Kubernetesä¸­å»ºè®®ä½¿ç”¨ReplicaSetæ¥å–ä»£ReplicationControllerã€‚
å°†kubectlçš„ &amp;ndash;record çš„ flag è®¾ç½®ä¸º trueå¯ä»¥åœ¨ annotation ä¸­è®°å½•å½“å‰å‘½ä»¤åˆ›å»ºæˆ–è€…å‡çº§äº†è¯¥èµ„æºã€‚
# æ£€æŸ¥ Deployment å‡çº§çš„å†å²è®°å½• kubectl rollout history deployment/nginx-deployment # å•ä¸ªå˜æ›´çš„è¯¦æƒ… kubectl rollout history deployment/nginx-deployment --revision=2 é›†ç¾¤èµ„æºç®¡ç† Label  &amp;ldquo;release&amp;rdquo; : &amp;ldquo;stable&amp;rdquo;, &amp;ldquo;release&amp;rdquo; : &amp;ldquo;canary&amp;rdquo; &amp;ldquo;environment&amp;rdquo; : &amp;ldquo;dev&amp;rdquo;, &amp;ldquo;environment&amp;rdquo; : &amp;ldquo;qa&amp;rdquo;, &amp;ldquo;environment&amp;rdquo; : &amp;ldquo;production&amp;rdquo; &amp;ldquo;tier&amp;rdquo; : &amp;ldquo;frontend&amp;rdquo;, &amp;ldquo;tier&amp;rdquo; : &amp;ldquo;backend&amp;rdquo;, &amp;ldquo;tier&amp;rdquo; : &amp;ldquo;cache&amp;rdquo;  æ‰©å±•é˜…è¯»  Configuration Best Practices Kubernetesä¸­æ–‡æŒ‡å—  æ³¨: å®˜æ–¹æ–‡æ¡£æ˜¯å­¦ä¹ çš„å¼€å§‹,åšå®¢æ–‡ç« é€šå¸¸æœ‰æ—¶æ•ˆæ€§,è€ŒKubernetesçš„ç‰ˆæœ¬æ›´æ–°å¾ˆå¿«.
</content>
    </entry>
    
     <entry>
        <title>DockeråŸºç¡€</title>
        <url>/blog/docker/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>container</tag><tag>docker</tag><tag>ops</tag>
        </tags>
        <content type="html"> æœ€è¿‘ä¸¤å¹´éšç€å¾®æœåŠ¡è€Œæµè¡Œèµ·æ¥çš„Dockeræ˜¯ä¸€ç§è½»é‡çº§å®¹å™¨æŠ€æœ¯(ç›¸å¯¹äºVMWare,KVMç­‰Hypervisorè§£å†³æ–¹æ¡ˆ).
å®ƒèƒ½ç»™å¼€å‘,æµ‹è¯•,è¿ç»´å„å›¢é˜Ÿæä¾›ä¸€ä¸ªç»Ÿä¸€çš„è¿è¡Œç¯å¢ƒ, è¿™ç‚¹å¾ˆå®ç”¨.
Dockerå¯ä»¥çœ‹åšåœ¨å†…æ ¸å®¹å™¨æŠ€æœ¯(Cgroupå’ŒNamespace)çš„åŸºç¡€ä¸Šæä¾›æ›´é«˜çº§åŠŸèƒ½çš„æ§åˆ¶å·¥å…·,ä¸»è¦ç‰¹æ€§:
(1)è·¨ä¸»æœºéƒ¨ç½²(2)ä»¥åº”ç”¨ä¸ºä¸­å¿ƒ (3)è‡ªåŠ¨æ„å»º (4)ç‰ˆæœ¬ç®¡ç† (5)ç»„å»ºé‡ç”¨ (6)å…±äº« (7)å·¥å…·ç”Ÿæ€é“¾

 è¡¥å……: å…³äºè™šæ‹ŸåŒ–çš„ä¸»æµåˆ†ç±»
 æ“ä½œç³»ç»Ÿ(æœåŠ¡å™¨)çº§åˆ«çš„è™šæ‹ŸåŒ–: åœ¨ç¡¬ä»¶å±‚ä¹‹ä¸ŠåšHypervisor,å†…æ ¸çº§éš”ç¦». å¸¸è§çš„æœ‰VMWare vsphere, XEN,KVM, Hyper-V
 è¿›ç¨‹(å®¹å™¨)çº§åˆ«çš„è™šæ‹ŸåŒ–: Docker å’ŒLXC(Linux Container)
   é…ç½®å›½å†…é•œåƒ å›½å†…ä½¿ç”¨å‰Dockerçš„ç¬¬ä¸€ä»¶äº‹,å¿…é¡»å…ˆé…ç½®å›½å†…é•œåƒåŠ é€Ÿå™¨,å¦åˆ™ä¸‹è½½å®¹å™¨é•œåƒé¾Ÿé€Ÿ(æœ€è¿‘å®‰è£…dockerä¹Ÿä¸ç”¨äº†)
 ä¸­ç§‘å¤§é•œåƒ(æ¨è):docker CEæºä½¿ç”¨æ‰‹å†Œ/Docker HUBæºä½¿ç”¨æ‰‹å†Œ Aliyun DaoCloud : éœ€è¦å…ˆæ³¨å†Œ Docker ä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ:è¿è¡Œäº†å‡ ä¸ªæœˆå°±ä¸å¯ç”¨äº†,å¤Ÿå‘çˆ¹çš„ğŸ˜¤  ä½¿ç”¨ç¤ºä¾‹ï¼š
# å¦‚æœæƒ³æ°¸ä¹…ä¿å­˜ï¼Œç¼–è¾‘/etc/docker/daemon.jsonå¹¶æ·»åŠ   { &amp;#34;registry-mirrors&amp;#34;: [&amp;#34;https://docker.mirrors.ustc.edu.cn/&amp;#34;] } # å¿…é¡»é‡å¯æœåŠ¡ä»¥ç”Ÿæ•ˆ  sudo service docker restart å®‰è£…  Ubuntu Guide Docker CE for Mac Docker CE for Windows  Ubuntuç¯å¢ƒå®‰è£… # å®‰è£…Docker  sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common curl -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository &amp;#34;deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu $(lsb_release -cs)stable&amp;#34; sudo apt-get -y update sudo apt-get -y install docker-ce # å®‰è£…docker-compose  sudo curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose sudo chmod &#43;x /usr/local/bin/docker-compose CentOSç¦»çº¿å®‰è£… ä¾èµ–åº“: libcgroupå’Œdevice-mapper-*
# ç¦»çº¿åŒ…ä¸‹è½½: http://rpmfind.net/linux/rpm2html/search.php rpm -ivh clibcgroup-* rpm -ivh device-mapper-* --force --nodeps # è¿½åŠ ä¸€è¡Œåˆ°/etc/fstab none /sys/fs/cgroup cgroup defaults 0 0 # é‡å¯ä»¥ç”Ÿæ•ˆ shutdown -r now # å¯åŠ¨cgroup service cgconfig start # ä¸‹è½½docker: https://yum.dockerproject.org/repo/main/centos/6/Packages/ rpm -ivh docker-engine-*.rpm service docker start åŸºç¡€å‘½ä»¤  docker docker-compose : ç¼–æ’ docker-machine (Docker Toolboxå·²è¿‡æ—¶,ä¸æ¨èä½¿ç”¨)  # æŠŠå½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç»„  sudo usermod -aG docker xulz ## docker  docker run # åœ¨æ–°å®¹å™¨è¿è¡Œå‘½ä»¤  docker start # å¯åŠ¨å®¹å™¨  # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨  docker ps -a docker ps -a --no-trunc # æ˜¾ç¤ºå®Œæ•´çš„å‘½ä»¤  # æŸ¥çœ‹æ‰€æœ‰é•œåƒ  docker images docker stop/rm xxx # åˆ é™¤  docker rm &amp;lt;container_id&amp;gt; docker rmi &amp;lt;image_id&amp;gt; # åŠ è½½é•œåƒ  docker load &amp;lt; &amp;lt;image_file&amp;gt; # å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨  docker cp source_file &amp;lt;container_name&amp;gt;:destination # åˆ‡æ¢åˆ°å®¹å™¨ç»ˆç«¯  docker exec -it container_name /bin/bash # åœ¨åå°å¯åŠ¨  docker start `docker ps -q -l` # restart it in the background  docker attach `docker ps -q -l` # reattach the terminal &amp;amp; stdin  # Detatch: Ctrl&#43;p &#43; Ctrl&#43;q  ## å¸¸ç”¨composeå‘½ä»¤  docker-compose up â€”build docker-compose ps docker-compose stop ## docker-machine  docker-machine ip docker-machine env Docker Hub åˆ°hub.docker.comæ³¨å†Œè‡ªå·±çš„ID, æä¾›ä¸€ä¸ªç§æœ‰ä»“åº“åŠä¸é™å…±æœ‰ä»“åº“ï¼
ä»Šå¤©ä¸ºäº†å›½å†…è®¿é—®kubernetesçš„å­¦ä¹ é¡¹ç›®æ–¹ä¾¿ï¼Œå»ºç«‹äº†ä¸€ä¸ªé•œåƒï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š
# éœ€è¦å…ˆåœ¨ç½‘é¡µåˆ›å»ºä»“åº“  # å†å‘½ä»¤è¡Œç™»å½•hub  docker login docker pull gcr.io/google-samples/kubernetes-bootcamp:v1 docker tag gcr.io/google-samples/kubernetes-bootcamp:v1 xulz/kubernetes-bootcamp:v1 docker push xulz/kubernetes-bootcamp:v1 ç”¨Dockeréƒ¨ç½²Flask Web Appçš„ç¤ºä¾‹ ä¸»è¦ç”¨åˆ°çš„é…ç½®æ–‡ä»¶:
 Dockerfile : å­˜æ”¾è‡ªåŠ¨åŒ–çš„åˆ›å»ºé•œåƒçš„å…¨éƒ¨æŒ‡ä»¤&amp;gt; docker build docker-compose.yml : åˆ›å»ºå¤šä¸ªå®¹å™¨çš„æ¨¡æ¿æ–‡ä»¶,ä¸»è¦åŒ…å«services,volumns,network .env : è®¾ç½®ç¯å¢ƒå˜é‡ .dockerignore : å¿½ç•¥æ–‡ä»¶  æ‰©å±•  Portainer : Dockerç®¡ç† Webç•Œé¢ docker-compose-ui: Docker Compose Webç•Œé¢  ä¸Vagrantæ¯”è¾ƒ  docker-compose exec CONTAINER /bin/sh == vagrant ssh docker cp == vagrant scp  èµ„æºå‚è€ƒ  Dockerä»å…¥é—¨åˆ°å®è·µ Dockerå…¥é—¨æ•™ç¨‹-è‹±æ–‡ Awesome Docker Docker Cheat Sheet </content>
    </entry>
    
     <entry>
        <title>åˆ©å™¨ä¹‹TMUX</title>
        <url>/blog/tmux/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>linux</tag>
        </tags>
        <content type="html">  ç”¨æ³•  tmux ls : list sessions tmux attach -t 0 : -t ä»£è¡¨â€œtargetâ€ , 0 æ˜¯sessionå tmux kill-session -t 0 : ç»“æŸä¼šè¯ tmux source ~/.tmux.conf : é‡æ–°åŠ è½½é…ç½® å¤åˆ¶å’Œç²˜è´´: ä½¿ç”¨Shiftä¸´æ—¶ç¦ç”¨tmux,ç„¶åCtrl&#43;Shift&#43;C  å¸¸ç”¨å¿«æ·é”®    Key Description     C-b (Ctrl-b) Send the prefix key   M (Alt, meta key)    prefix c new-window   prefix &amp;ldquo; split-window   prefix % split-window -h   prefix z resize-pane -Z   prefix $ Rename the current session   prefix , Rename the current window   prefix M-1 select-layout even-horizontal   prefix M-2 select-layout even-vertical   prefix M-3 select-layout main-horizontal   prefix M-4 select-layout main-vertical   prefix M-5 select-layout tiled    æµè¡Œé…ç½® å¦‚æœæ‡’å¾—æŠ˜è…¾ï¼Œæœ‰ä¸ªæµè¡Œçš„é€šç”¨é…ç½®å·²ç»å¤Ÿç”¨ã€‚è§ä¸€å¥—å¸¸ç”¨é…ç½®
cd git clone https://github.com/gpakosz/.tmux.git ln -s -f .tmux/.tmux.conf cp .tmux/.tmux.conf.local . # ç¼–è¾‘ï½/.tmux.conf.local ä»¥å®šåˆ¶è‡ªå·±çš„æ–°éœ€æ±‚ ä½¿ç”¨ä¼šè¯ä¿å­˜å’Œæ¢å¤æ’ä»¶ æˆ‘ç²¾å½©ä½¿ç”¨è‡ªåŠ¨ä¿å­˜å’Œæ¢å¤çš„åŠŸèƒ½ï¼Œç”¨åˆ°äº†æ’ä»¶ç®¡ç†å’Œå‡ ä¸ªæ’ä»¶ã€‚ ä½¿ç”¨æ­¥éª¤å¦‚ä¸‹ï¼š
# 1. å®‰è£… Plugin Manager git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm # 2. ç¼–è¾‘ .tmux.conf æˆ–.tmux.conf.local set -g @plugin &amp;#39;tmux-plugins/tpm&amp;#39; set -g @plugin &amp;#39;tmux-plugins/tmux-resurrect&amp;#39; set -g @plugin &amp;#39;tmux-plugins/tmux-continuum&amp;#39; set -g @continuum-restore &amp;#39;on&amp;#39; run &amp;#39;~/.tmux/plugins/tpm/tpm&amp;#39; # 3. å®‰è£…é…ç½®é‡Œçš„æ’ä»¶ prefix &#43; I # å¤§å†™çš„Iä»£è¡¨Install prefix &#43; U # æ›´æ–°æ’ä»¶  # 4. é‡å¯åæ¢å¤ä¼šè¯ prefix &#43; Ctrl-s # ä¿å­˜ prefix &#43; Ctrl-r # æ¢å¤ å…¶ä»–æ’ä»¶ # .tmux.conf set -g @plugin &amp;#39;tmux-plugins/tmux-sensible&amp;#39; # å¸¸ç”¨é…ç½® set -g @plugin &amp;#39;tmux-plugins/tmux-yank&amp;#39; # å¤åˆ¶/ç²˜è´´  Vim Tmux Navigator Tmuxinator ä¹Ÿæ˜¯ç”¨äºç®¡ç†ä¼šè¯çš„  å°æŠ€å·§ æŠ€å·§1: æ€»æ˜¯ä¿ç•™ä¸€ä¸ªä¼šè¯ ç»ˆç«¯å¯åŠ¨æ—¶å…ˆè¿è¡Œ tmux attach -t base || tmux new -s base
æŠ€å·§2: å¤šé¢æ¿å‘½ä»¤åŒæ­¥ æŠŠå½“å‰è¾“å…¥å‘é€åˆ°å½“å‰çª—å£çš„æ‰€æœ‰é¢æ¿ setw synchronise-panes
æŠ€å·§3: ç¼©æ”¾ prefix &#43; zæ”¾å¤§å½“å‰é¢æ¿, å†æ¬¡è¾“å…¥æ¢å¤ã€‚
èµ„æºåŠå‚è€ƒ  Manual 10 Killer Tmux Tips  </content>
    </entry>
    
     <entry>
        <title>Goæµè¡Œåº“ç®€ä»‹</title>
        <url>/blog/go-lib/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> Goä½œä¸ºæœ€è¿‘å‡ å¹´éšå¤§æ•°æ®,Dockerè€Œç«çƒ­èµ·æ¥(ä¾ç„¶åå°ä¼—)çš„æœåŠ¡ç«¯è¯­è¨€,æœ€è¿‘æ¥è§¦ä¸‹æ¥çš„æ„Ÿè§‰æ˜¯ç¬¬ä¸‰æ–¹åº“/æ¡†æ¶è¿˜æ˜¯ä¸å¤Ÿç¨³å®šå’Œä¸°å¯Œ,å¾ˆå¤šåº”ç”¨åœºæ™¯è¿˜æ²¡æœ‰ä¸€ä¸ªç»å¯¹åœ°ä½çš„é¦–é€‰åº“.
å¶å°”å‘ç°LibHuntè¿˜ä¸é”™,å¯ä»¥åœ¨åº“é€‰å‹æ—¶åšäº›å¯¹æ¯”.

æ•°æ®å¤„ç†  go.uuid gjson  ç³»ç»Ÿæ‰©å±•  logrus  import ( // UUIDç”Ÿæˆ,æ”¯æŒv1~v4  &amp;#34;github.com/satori/go.uuid&amp;#34; // logging/æ—¥å¿—æ‰©å±•å¿…å¤‡  // ä½¿ç”¨åˆ«å logæ›¿ä»£ç³»ç»Ÿæ¨¡å—  log &amp;#34;github.com/sirupsen/logrus&amp;#34; //JSON Parser,å°¤å…¶é€‚ç”¨äºåµŒå¥—å¤šå±‚çš„json  &amp;#34;github.com/tidwall/gjson&amp;#34; ) // UUIDç¤ºä¾‹ id := uuid.NewV4().String() // æ”¯æŒå®šä¹‰æ—¥å¿—çº§åˆ« log.SetLevel(log.DebugLevel) log.Debug(resp.StatusCode) log.WithFields(log.Fields{&amp;#34;username&amp;#34;: username}).Debug(&amp;#34;Login info:&amp;#34;) // ç”¨å†…ç½®jsonå¤„ç†ä¼šæ¯”è¾ƒç¹ç const json = `{&amp;#34;name&amp;#34;:{&amp;#34;first&amp;#34;:&amp;#34;Michael&amp;#34;,&amp;#34;last&amp;#34;:&amp;#34;Xu&amp;#34;},&amp;#34;age&amp;#34;:30}` value := gjson.Get(json, &amp;#34;name.last&amp;#34;) TBC..
</content>
    </entry>
    
     <entry>
        <title>SSHä½¿ç”¨åŠæ‰©å±•</title>
        <url>/blog/ssh/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> ç»å¸¸å’ŒLinuxæœåŠ¡å™¨æ‰“äº¤é“å°±ç¦»ä¸å¼€SSH.

å¸¸ç”¨å‘½ä»¤ # ç”Ÿæˆkey ssh-keygen -t rsa -C &amp;#34;admin[at]xulizhao.com&amp;#34; # åˆ é™¤æ— æ•ˆçš„å…¬é’¥,é€šå¸¸ç”±äºå˜æ›´IPé€ æˆ ssh-keygen -f &amp;#34;~.ssh/known_hosts&amp;#34; -R 8.8.8.8 # å¤åˆ¶å…¬é’¥ä¿¡æ¯åˆ°ç²˜è´´æ¿ xclip -selection clipboard &amp;lt; ~/.ssh/id_rsa.pub # å¦‚æœæœåŠ¡å™¨æ²¡æœ‰å¼€å¯SSHæœåŠ¡, éœ€è¦å…ˆå®‰è£… apt install openssh-server # æ‰“å°DEBUGä¿¡æ¯ç”¨ä»¥è°ƒè¯• ssh -v ... # è¿œç¨‹è¿è¡Œæœ¬åœ°è„šæœ¬ ssh xulz@moon bash &amp;lt; /path/to/local/script.sh ç›®å½•ç»“æ„ ä¸€èˆ¬sshç›¸å…³æ–‡ä»¶å­˜æ”¾åœ¨~/.sshç›®å½•, Windowsåœ¨ %userprofile%/.ssh
 å…¬é’¥: id_rsa.pub
 ç§é’¥: id_rsa
 è®¤è¯å…¬é’¥: authorized_keys
 é…ç½®æ–‡ä»¶: config
æ ·ä¾‹ ServerAliveInterval 60 TCPKeepAlive yes
é…ç½®åˆ«å,å¾ˆæœ‰ç”¨ Host moon HostName moon.xulizhao.com user ubuntu Port 22 IdentityFile ~/.ssh/github.key
 æœåŠ¡ç«¯é…ç½®: /etc/ssh/sshd.config   æ— å¯†ç ç™»å½• # Macéœ€è¦å…ˆå®‰è£… brew install ssh-copy-id # å…³é”®å‘½ä»¤ ssh-copy-id username@remotehost # æœ‰æ—¶ä¹Ÿéœ€è¦ä¿®æ”¹æƒé™ chmod 600 ~/.ssh/authorized_keys timed out waiting for input: auto-logout echo $TMOUT vi /etc/profile export TMOUT=600 source /etc/profile æ‰©å±•åº”ç”¨ Mosh æ›´ç¨³å®šçš„SSH,é€‚åˆç§»åŠ¨ç«¯ç­‰ç½‘ç»œä¸å¯é ç¯å¢ƒ
sshfs æŠŠè¿œç¨‹æœåŠ¡å™¨çš„è·¯å¾„æ˜ å°„ä¸ºæœ¬åœ°è·¯å¾„
# å®‰è£… sudo apt-get install sshfs # æ˜ å°„è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ mkdir ~/remote_code sshfs remote.xulizhao.com:/home/$USER/code ~/remote_code å®¢æˆ·ç«¯å·¥å…· å…è´¹/å¼€æºçš„:
 bitvise ssh client : Windowsä¸‹æœ€å¥½ç”¨çš„
 Remmina : Linuxæ ‡é…
 PAC Manager
 Dropbear : è½»é‡çº§å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯
  æ”¶è´¹ä¸­æœ€å¥½ç”¨çš„:
 SecureCRT&#43;SecureFX </content>
    </entry>
    
     <entry>
        <title>Nginx</title>
        <url>/blog/nginx/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>ops</tag>
        </tags>
        <content type="html">  æ—¶å¸¸ä¼šç”¨åˆ°Nginx,ä¸€ç›´æ²¡æœ‰å¥½å¥½çš„æ¢³ç†ä¸‹,ä»¥åæ›´æ–°åœ¨è¿™é‡Œ.
åŸºç¡€ä½¿ç”¨ å®‰è£… ç…§å®˜æ–¹æ•™ç¨‹æ¥å°±å¥½,æ²¡å•¥å¥½è¯´çš„.
# CentOSä¸­ $releaseveræ›¿æ¢ä¸ºä¸»ç‰ˆæœ¬å·,æ¯”å¦‚7; $basearch æ›¿æ¢ä¸ºæ¶æ„, ç”¨archå‘½ä»¤æŸ¥çœ‹ # Ubuntuä¸­ ç”¨ä»¥ä¸‹å‘½ä»¤ä¿®å¤é”™è¯¯: GPG error: http://nginx.org/packages/ubuntu xenial Release: The following signatures couldn&amp;#39;t be verified because the public key is not available: NO_PUBKEY $key; # sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys $key# CentOS sudo tee /etc/yum.repos.d/nginx.repo &amp;lt;&amp;lt;-&amp;#39;EOF&amp;#39; [nginx] name=nginx repo baseurl=http://nginx.org/packages/centos/$releasever/$basearch/ gpgcheck=0 enabled=1 EOF å¸¸ç”¨å‘½ä»¤:
# æ‰‹åŠ¨å¯åŠ¨ /etc/init.d/nginx start # å¼€æœºå¯åŠ¨æœåŠ¡ chkconfig nginx on # ä¿®æ”¹é…ç½®æ–‡ä»¶å,éªŒè¯è¯­æ³•æ­£ç¡® nginx -t # é‡æ–°åŠ è½½é…ç½®è®©ä¿®æ”¹ç«‹å³ç”Ÿæ•ˆ sudo nginx -s reload é…ç½®  /etc/nginx/nginx.conf é»˜è®¤å¸¸ç”¨Document Root : /var/www/, /srv, /usr/share/www  æŒ‡ä»¤: Location  ä½¿ç”¨æ­£åˆ™:å¿…é¡»ä»¥ä¸‹é¢2ç§å‰ç¼€å¼€å§‹  &amp;ldquo;~&amp;rdquo; å¤§å°å†™åŒ¹é… &amp;ldquo;~*&amp;rdquo; å¿½ç•¥å¤§å°å†™åŒ¹é… ä¸åšåŒ¹é…æ£€æŸ¥ä½¿ç”¨ç©ºblock,å³ &amp;ldquo;/ /&amp;rdquo;  ä¸ä½¿ç”¨æ­£åˆ™(literal): é€å­—åŒ¹é…,ä¸€æ—¦åŒ¹é…åœæ­¢ç»§ç»­æ£€ç´¢  = å‰ç¼€å¼ºåˆ¶URIå’ŒLocationå‚æ•°çš„åŒ¹é…    æ­£åˆ™å¤‡å¿˜: ^ ä»£è¡¨ä»¥xxå¼€å§‹, $ä»£è¡¨ä»¥xxç»“å°¾
 location = / { # åªåŒ¹é… / æŸ¥è¯¢ } location /test { # å¼€å¯ç›®å½•è‡ªåŠ¨ç´¢å¼• autoindex on; } URLé‡å†™ rewrite (PCRE, perlå…¼å®¹æ­£åˆ™)
try_files # é¦–å…ˆæ‰¾ç›¸åº”çš„URI # å¦‚æœæ²¡æœ‰,å°è¯•æ·»åŠ /ä½œä¸ºç›®å½•å»åŒ¹é… # å¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°,è½¬å‘ç»™ä»£ç† try_files $uri $uri/ @proxy; ä¸»è¦å˜é‡:  $server_name : è™šæ‹Ÿä¸»æœºå  æœ¬åœ°å¼€å‘ç¯å¢ƒ Macå®‰è£… brew install nginx # ä»¥æœåŠ¡çš„å½¢å¼éšç³»ç»Ÿå¯åŠ¨ brew services start nginx # ä¸»è¦é…ç½®ç›®å½• /usr/local/var/www # Doc Root /usr/local/etc/nginx/nginx.conf /usr/local/etc/nginx/servers/ ## è™šæ‹Ÿserver  Windowsä½¿ç”¨æœåŠ¡ å€ŸåŠ©äº winsw å¯ä»¥æŠŠNginxå®‰è£…æˆæœåŠ¡.
 winsw.exe install/uninstall/start/stop/restart/status
 Troubleshooting Q: åœ¨CentOSå®‰è£…å®Œ,ç»‘å®š8443ç«¯å£å‡ºé”™: bind() to 0.0.0.0:8443 failed, Permission denied A: åŸå› : SELinux é˜»æ­¢äº†è¿æ¥ è§£å†³1: semanage port -a -t http_port_t -p tcp 8443 è§£å†³2: tsebool httpd_can_network_connect on -P
# è¾…åŠ©è°ƒè¯•å‘½ä»¤ sestatus tail -f /var/log/audit/audit.log semanage port -l | grep http_port_t getsebool -a | grep httpd # å¦‚æœæ‰¾ä¸åˆ°semanageå‘½ä»¤: yum provides /usr/sbin/semanage yum -y install policycoreutils-python å¸¸è§é…ç½®åœºæ™¯ ç«¯å£é‡å®šå‘ location /test { # é‡å†™URLs,æŠŠè¯·æ±‚/testXXXXè½¬æ¢æˆ/XXXXäº¤ç»™AppServer. rewrite ^/test(.*) /$1 break; proxy_pass http://127.0.0.1:8000; proxy_set_header X-Forwarded-For $remote_addr; proxy_set_header Host $http_host; } å¯ç”¨HTTPS # åˆ©ç”¨å¤šæ ¸ worker_processes auto; http { # ç¼“å­˜ssl sessionä»¥æé«˜æ€§èƒ½ ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; server { listen 443 ssl; ssl_certificate /etc/ssl/xulizhao.com.crt; ssl_certificate_key /etc/ssl/xulizhao.com.key; # ä¼˜å…ˆé‡‡ç”¨serverç«¯ç®—æ³• ssl_prefer_server_ciphers on; ... å¯¹æŸè·¯å¾„å¯ç”¨è®¤è¯å¯†ç ä¿æŠ¤ # ä½¿ç”¨htpasswdå·¥å…·åŠ å¯†å¯†ç  sudo apt-get install apache2-utils sudo htpasswd -c /etc/nginx/.htpasswd admin # ç¼–è¾‘é…ç½®,æ·»åŠ  sudo vi /etc/nginx/sites-available/default auth_basic &amp;#34;Private Property&amp;#34;; auth_basic_user_file /etc/nginx/.htpasswd; sudo service nginx reload ä¿®æ”¹è¶…æ—¶è®¾ç½® Nginxè¿æ¥Tomcatçš„é»˜è®¤è¶…æ—¶æ˜¯1åˆ†é’Ÿ
vi /etc/nginx/conf.d/default.conf # ä¿®æ”¹proxy_read_timeoutçš„å€¼ location / { proxy_pass http://127.0.0.1:8080; proxy_read_timeout 180; } çŠ¶æ€é¡µ location /nginx_status { stub_status on; access_log off; # Security allow 192.168.1.100; deny all; } blog äºŒçº§åŸŸåä¸å­ç›®å½•æ˜ å°„ location / { rewrite ^/(.*)$ /blog/$1 last; } location ~* ^/blog/.*$ { proxy_pass http://127.0.0.1:8080; }  æ—¥å¿—è®°å½•å“åº”æ—¶é—´ # åœ¨é¢„åˆ¶æ ¼å¼combinedçš„æœ€å # æ·»åŠ  $request_time å’Œ $upstream_response_time log_format combined_timed &amp;#39;$remote_addr - $remote_user [$time_local] &amp;#34;$request&amp;#34; &amp;#39; &amp;#39;$status $body_bytes_sent &amp;#34;$http_referer&amp;#34; &amp;#39; &amp;#39;&amp;#34;$http_user_agent&amp;#34; &amp;#34;$http_x_forwarded_for&amp;#34; $request_time $upstream_response_time&amp;#39;; access_log /var/log/nginx/access.log combined_timed; è¯­è¨€æ”¯æŒ æ”¯æŒphp # æ·»åŠ ä»¥ä¸‹å†…å®¹ location ~ \.php$ { try_files $uri =404; fastcgi_split_path_info ^(.&#43;\.php)(/.&#43;)$; fastcgi_pass unix:/var/run/php/php7.0-fpm.sock; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } èµ„æº  locationæŒ‡ä»¤å®˜æ–¹æ–‡æ¡£ Nginx é…ç½® HTTPS æœåŠ¡å™¨ Open Resty: Nginxå¢å¼ºç‰ˆ, ä½¿ç”¨Luaæ‰©å±•åŠŸèƒ½.  ç‰¹ç‚¹: å¯ä»¥ç›´æ¥è®¿é—® Redis/MemCached; ä½¿ç”¨åœºæ™¯: å®‰å…¨è¿‡æ»¤æ¨¡å—, æ•°æ®æŠ¥è¡¨; åº”ç”¨: æ·˜å®é‡å­ç»Ÿè®¡, å»å“ªç½‘  OpenResty æœ€ä½³å®è·µ  </content>
    </entry>
    
     <entry>
        <title>Pythoné…ç½®å¤‡å¿˜</title>
        <url>/blog/python/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>python</tag>
        </tags>
        <content type="html"> Pythonå¼€å‘ç¯å¢ƒé—®é¢˜è®°å½•.

é•œåƒåŠ é€Ÿ åœ¨å›½å†…è®¿é—®å®˜æ–¹çš„åº“æ¯”è¾ƒæ…¢ï¼Œå»ºè®®ä½¿ç”¨å›½å†…çš„é•œåƒç«™ã€‚
mkdir ~/.pip vi ~/.pip/pip.conf [global] timeout = 6000 index-url = https://pypi.douban.com/simple/ [install] use-mirrors = true mirrors = https://pypi.douban.com/ æ¸…åé•œåƒ # ä¸´æ—¶ä½¿ç”¨ pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pipenv # è®¾ä¸ºé»˜è®¤, ä¿®æ”¹ # ~/pip/pip.conf (Linux) # %APPDATA%\pip\pip.ini (Windows 10) # $HOME/Library/Application Support/pip/pip.conf (macOS) [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple Anacondaé•œåƒ
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ conda config --set show_channel_urls yes # ç¬¬ä¸‰æ–¹æº conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge/ åœ¨Macä¸ŠåŒæ—¶å®‰è£…Python2å’ŒPython3 ç¼˜èµ·: åœ¨High Sierra 10.12åŠæ›´é«˜ç‰ˆæœ¬,ç»™ç³»ç»Ÿè‡ªå¸¦çš„Python2å®‰è£…ä¸€äº›ç¬¬ä¸‰æ–¹åº“(å¦‚gevent)ä¼šå› ä¸ºç³»ç»Ÿå¼€å¯SIPå¯¼è‡´å¤±è´¥.
 SIPå³ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤,è¦æŸ¥çœ‹SIPçš„çŠ¶æ€:&amp;gt; csrutil status
å—åˆ°SIPä¿æŠ¤çš„è·¯å¾„ï¼š/System, /usr, /bin, /sbin
 æ¯”è¾ƒå¥½çš„æ–¹å¼æ˜¯ä½¿ç”¨brewå®‰è£…æœ€æ–°ç‰ˆçš„Python2/3
brew install python2 # æœ‰é—®é¢˜é‡è£… # brew reinstall python@2 brew install python3 # å®‰è£…ä¹‹åä¹Ÿç›¸åº”çš„å®‰è£…äº†å¯¹åº”çš„pip2, pip3 python2 -V pip2 -V # å»ºç«‹å¿«æ·æ–¹å¼ brew link python3 pip3å®‰è£…ç¬¬ä¸‰æ–¹åº“ # éœ€è¦æ·»åŠ åˆ°PATH export PATH=/Users/xulz/Library/Python/3.6/bin:$PATH å®‰è£…pip3 python3 -m ensurepip è¸©è¿‡çš„å‘  ç‰ˆæœ¬å†²çª
å‘: å…ˆå‘å¸ƒäº†ç‰ˆæœ¬1.0, ä¹‹åå‘å¸ƒäº†1.0.1, ç»“æœpip install package_nameæ€»æ˜¯å¾—ä¸åˆ°æ›´æ–°
åŸå› : pipç‰ˆæœ¬åˆ¤æ–­æ—¶ä¼šè®¤ä¸º 1.0 &amp;gt; 1.0.1
æœ€ä½³å®è·µ: å‘½åå‘å¸ƒç‰ˆæœ¬æ—¶è¦éµå¾ªx.x.xçš„æ ¼å¼
  å‚è€ƒ  æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ </content>
    </entry>
    
     <entry>
        <title>JenkinsæŒç»­é›†æˆå·¥å…·</title>
        <url>/blog/jenkins/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>release</tag>
        </tags>
        <content type="html">  æ—¶ä¸æ—¶ä¼šå’ŒæŒç»­é›†æˆå·¥å…·Jenkinsæ‰“äº¤é“.
Python APIè°ƒç”¨ æ— è®¤è¯ import requests api_url = &amp;#34;http://jenkins.xulizhao.com/job/test_job/api/json?tree=lastSuccessfulBuild[number]&amp;#34; r = requests.get(api_url) build_number = r.json()[&amp;#39;lastSuccessfulBuild&amp;#39;][&amp;#39;number&amp;#39;] éœ€è¦è®¤è¯ # å…ˆå®‰è£…ä¾èµ–åº“ pip install python-jenkins # ä»£ç ç¤ºä¾‹ import jenkins server = jenkins.Jenkins(&amp;#39;http://jenkins.xulizhao.com&amp;#39;, username=&amp;#39;user&amp;#39;, password=&amp;#39;password&amp;#39;) last_build_number = server.get_job_info(&amp;#39;test_job&amp;#39;)[&amp;#39;lastSuccessfulBuild&amp;#39;][&amp;#39;number&amp;#39;] curlæ–¹å¼ # æ£€ç´¢æœ€è¿‘å˜æ›´è®°å½• curl -u xulz:0f945a8f -s &amp;#34;http://jenkins.xulizhao.com/job/test-job/123/api/xml?wrapper=changes&amp;amp;xpath=//changeSet//comment&amp;#34; æ¯”è¾ƒé—æ†¾çš„æ˜¯Jenkins çš„API Tokenåªé€‚ç”¨äºæ„å»ºjob,å…¶ä»–æ¥å£éœ€è¦ç”¨æˆ·å/å¯†ç ç™»å½•.
 build_job_url(name, parameters=None, token=None) build_job(name, parameters=None, token=None)  å¸¸ç”¨è®¾ç½® Android æ„å»º android update project -p &amp;lt;project_path&amp;gt; # æ›´æ–°SDK ./tools/android update sdk --no-ui ä¿®æ”¹æ—¶åŒº -Duser.timezone=&amp;ldquo;Asia/Chongqing&amp;rdquo;
ä¿®å¤é”™è¯¯ stderr: Host key verification failed å¤åˆ¶sshå…¬é’¥åˆ° .sshæ–‡ä»¶å¤¹, å¯¹äºUbuntuåœ¨/var/lib/jenkins/.ssh, å¯èƒ½éœ€è¦ç›¸åº”çš„ä¿®æ”¹æ–‡ä»¶å¤¹æƒé™.
å¸¸ç”¨æ’ä»¶  Email Extension Plugin: é‚®ä»¶å¢å¼ºæ‰©å±• Extended Choice Parameter Plug-In: å‚æ•°é€‰æ‹©æ‰©å±•  æ‰©å±•é˜…è¯»  Jenkins APIä½¿ç”¨æ–‡æ¡£ python-jenkinsæ–‡æ¡£  </content>
    </entry>
    
     <entry>
        <title>Golangå¼€å‘ç¯å¢ƒ</title>
        <url>/blog/go-basic/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          <tag>go</tag>
        </tags>
        <content type="html"> ç®€å•è®°å½•ä¸‹Goè¯­è¨€å¼€å‘ç¯å¢ƒçš„æ­å»ºå’ŒåŸºæœ¬ç”¨æ³•.

å®‰è£… å¦‚æœè¦ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤å®‰è£…:
# Ubuntu apt install golang # Mac brew install golang å¦‚æœæƒ³å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„è¯,å¯ä»¥ç›´æ¥åˆ°é•œåƒç«™ä¸‹è½½ç³»ç»Ÿå¯¹åº”ç‰ˆæœ¬æˆ–è€…å‚è€ƒUbuntuå®‰è£…æœ€æ–°ç‰ˆ.
å¦‚æœåœ¨Linuxçš„è¯è§£å‹ç¼©ä¹‹åéœ€è¦è®¾ç½®ä¸‹ç¯å¢ƒå˜é‡:
# vi ~/.zshrc æ·»åŠ  export GOPATH=$HOME/go export GOBIN=$HOME/go/bin export PATH=$GOPATH/bin:$PATH  æ³¨: åœ¨æ–°ç‰ˆå‘½ä»¤è¡Œå®‰è£…ä¹‹å, GOROOT(è®¾ç½®å®‰è£…è·¯å¾„)å’ŒGOPATHéƒ½ä¸ç”¨è®¾ç½®.
GOPATH é»˜è®¤ä½ç½®ä¸º $HOME/go, è¯¥ç›®å½•ç”¨æ¥åœ¨æ ‡å‡†Goç›®å½•ä¹‹å¤–å­˜æ”¾get, buildå’Œinstallç­‰ä¸‹è½½çš„ä¾èµ–åŒ….
go env æŸ¥çœ‹å½“å‰ç¯å¢ƒå˜é‡
 Goæ‰©å±•åŒ…çš„ä¸‹è½½ å¦‚æœè¦ç¼–è¯‘ä¸€ä¸ªå¼€æºé¡¹ç›®,åœ¨å›½å†…çš„ç¯å¢ƒä¸‹, go get çš„æ–¹å¼é€šå¸¸ä¼šå› ä¸ºè®¿é—® golang.org/x è€Œå¤±è´¥.
ç»•è¿‡æ–¹å¼ä¸ºæ‰‹åŠ¨ä¸‹è½½ä¾èµ–:
cd $GOPATH/src mkdir -p golang.org/x cd golang.org/x # é€šå¸¸ä¸‹è¾¹å‡ ä¸ªåº“å°±å¤Ÿç”¨äº†,å…·ä½“ä»¥é”™è¯¯æç¤ºç›¸åº”çš„ä¸‹è½½  git clone https://github.com/golang/net.git git clone https://github.com/golang/sys.git git clone https://github.com/golang/crypto.git å¸¸ç”¨å‘½ä»¤ # è¿è¡Œ  go run hello.go # ç¼–è¯‘å¹¶æŒ‡å®šè¿è¡Œç¯å¢ƒ  GOOS=linux GOARCH=amd64 go build -o hello hello.go # æ‰“åŒ…  go install hello.go # æ ¼å¼åŒ–, -w:ç›´æ¥è¦†ç›–åŸä»£ç ,ä¸è¾“å‡ºåˆ°æ§åˆ¶å°  gofmt -w hello.go ## æŸ¥çœ‹æ–‡æ¡£  godoc fmt ä¾èµ–ç®¡ç† å¯ä»¥é€šè¿‡Depè¿™ä¸ªå·¥å…·æ¥ç®¡ç†é¡¹ç›®ä¾èµ–.
# Macå®‰è£… brew install dep # æˆ–è€…Linux curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh dep init # ä¼šåœ¨é¡¹ç›®ç›®å½•åˆ›å»ºä¾èµ–é…ç½®æ–‡ä»¶Gopkg.toml [[constraint]] branch = &amp;#34;master&amp;#34; name = &amp;#34;golang.org/x/net&amp;#34;</content>
    </entry>
    
     <entry>
        <title>Gitå¤‡å¿˜</title>
        <url>/blog/git/</url>
        <categories>
          <category>Tech</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> å­¦ä¹ èµ„æº å¦‚æœæ˜¯æ–°æ‰‹,å¼ºçƒˆæ¨èé˜…è¯»Gitç®€æ˜æ•™ç¨‹, è¿›é˜¶å¿…è¯» Pro Gitä¸­æ–‡ç‰ˆ
Gitå¸¸ç”¨å‘½ä»¤ 
æ–°å»ºé¡¹ç›®ä»“åº“ # æŠŠå½“å‰é¡¹ç›®åŠ å…¥gitç‰ˆæœ¬ç®¡ç†  git init # æäº¤æ–‡ä»¶å˜æ›´  echo &amp;#34;xulz&amp;#34; &amp;gt;&amp;gt; contributors.txt git add contributors.txt git commit -m &amp;#39;Initial commit with contributors&amp;#39; æ¨é€å˜æ›´ # å…³è”è¿œç¨‹ä»“åº“  git remote add origin git@github.com:xulz/test.git # æ¨é€æœ¬åœ°å˜æ›´åˆ°è¿œç¨‹ä»“åº“  git push -u origin master # ä»¥ä¸Šç®€å†™ä¸º$ git push  git push -u origin --all # pushes up the repo and its refs for the first time  git push -u origin --tags # pushes up any tags# pushé‡åˆ°é”™è¯¯ ! [rejected] master -&amp;gt; master (non-fast-forward) # é£é™©: å¯èƒ½ä¼šé€ æˆremoteä¸¢å¤±æäº¤ git push --force --set-upstream origin master åŸºæœ¬é…ç½® # åˆ—å‡ºå½“å‰é¡¹ç›®ä¸»è¦é…ç½®  git config --list # ç¼–è¾‘å½“å‰é¡¹ç›®é…ç½®æ–‡ä»¶  vi .git/config # ä¿®æ”¹å…¨å±€é…ç½®  vi ~/.gitconfig  Branch åˆ†æ”¯ åˆ†æ”¯çš„ä¹ æƒ¯ç”¨æ³•:
origin/master åº”è¯¥å§‹ç»ˆä¿æŒç”Ÿäº§ç¯å¢ƒå¯ç”¨çš„çŠ¶æ€,å³å¯éƒ¨ç½².
origin/develop ä»£è¡¨æœ€æ–°çš„code, æ˜¯nightlyæµ‹è¯•çš„é‡ç‚¹. å¦‚æœç¨³å®šåˆ°å¯ä»¥release,éœ€è¦ä¸ºæ–°å‘å¸ƒåˆ›å»ºæ–°tag,å¹¶mergeå› master.
å¸¸ç”¨å‘½ä»¤ # åŒæ­¥è¿œç¨‹åˆ†æ”¯  git fetch # åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯  git branch -a # åˆ‡æ¢åˆ†æ”¯  git checkout new_branch # pushåˆ°è¿œç¨‹  git push --set-upstream origin new_branch ForkåŒæ­¥ä¸Šæ¸¸ä»“åº“ # æŸ¥çœ‹å½“å‰è¿œç¨‹ä»“åº“ git remote -v git remote add upstream https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY.git # è·å–æ›´æ–° git fetch upstream git checkout master git merge upstream/master Tag æ ‡ç­¾ æ¨èä¸ºæ¯æ¬¡è½¯ä»¶å‘å¸ƒåˆ›å»ºæ ‡ç­¾.
# ä¸ºå½“å‰ç‰ˆæœ¬åˆ›å»ºtag git tag v1.0.0 ## Gitå·¥ä½œæµ
 Git å·¥ä½œæµç¨‹ </content>
    </entry>
    
     <entry>
        <title>æ–°åšå®¢</title>
        <url>/play/blog-ghost/</url>
        <categories>
          <category>Play</category>
        </categories>
        <tags>
          
        </tags>
        <content type="html"> æœ¬åšå®¢åŸºäºGhostå¼€æºåšå®¢å¹³å°æ­å»º,ç³»ç»ŸåŸºäºNode.jså¼€å‘.
ä¸»è¦çœ‹ä¸­å¥¹çš„ç®€æ´å’Œè½»é‡,ç¼–è¾‘å™¨ä½¿ç”¨Markdown,èµ„æºå ç”¨æ¯”è¾ƒä½(æ€§èƒ½æ¯”WordPresså¥½å¾ˆå¤š).

è¯´ä¸‹å®‰è£…å®Œéœ€è¦å®šåˆ¶çš„éƒ¨åˆ†,ä¾›å‚è€ƒ:
ä»£ç é«˜äº® ç”±äºç»å¸¸ä½¿ç”¨ä»£ç ç‰‡æ®µ,ç”¨PrismJSæ·»åŠ äº†ä»£ç é«˜äº®,ä¸»è¦ä½¿ç”¨äº†Code injectionåŠŸèƒ½,å¯å‚è€ƒç½‘ä¸Šè¿™ç¯‡æ–‡ç« .
å¼€å¯è¯„è®º ç³»ç»Ÿæ²¡æœ‰è¯„è®ºåŠŸèƒ½,é›†æˆäº†ç¬¬ä¸‰æ–¹çš„Disqus,æ•´åˆæ–¹å¼å‚è€ƒè¿™é‡Œ.
ä½¿ç”¨HTTPS æœ€è¿‘å…³è”åŸŸååå¯ç”¨äº†HTTPS.
ghost config url https://xulizhao.com ghost setup nginx ssl # ä¹‹åéœ€è¦æ›´æ–°Ngxinçš„é…ç½®å¹¶reload  # ä½¿ç”¨Let&amp;#39;s Encryptçš„å…è´¹è¯ä¹¦,è¿™ä¸ªè‡ªåŠ¨è·å–è¯ä¹¦acme.shè„šæœ¬å¤ªå¥½ç”¨äº† æ–‡ç« ç›®å½• æŠ˜è…¾äº†å¤šåŠå¤©,æ·»åŠ äº†æ–‡ç« ç›®å½•(TOC).
ä¸»è¦ä½¿ç”¨äº†jQuery-TOCæ’ä»¶,å¹¶ä»¿ç…§floating-headeråšäº†ä¸€ä¸ªæ–°å›¾å±‚
cd &amp;lt;GHOST_DIR&amp;gt;/content/themes/casper/assets/js wget https://github.com/idiotWu/jQuery-TOC/raw/master/dist/jquery.toc.min.js cd ../.. // ä¿®æ”¹ default.hbs,åœ¨fitvidsä»¥ä¸‹æ·»åŠ ä¸€è¡Œå¼•å…¥  &amp;lt;script type=&amp;#34;text/javascript&amp;#34; src=&amp;#34;{{asset &amp;#34;js/jquery.fitvids.js&amp;#34;}}&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; &amp;lt;script type=&amp;#34;text/javascript&amp;#34; src=&amp;#34;{{asset &amp;#34;js/jquery.toc.min.js&amp;#34;}}&amp;#34;&amp;gt;&amp;lt;/script&amp;gt; // vi assets/css/screen.css .sidebar { visibility: visible; position: fixed; right: 0; top: 300px; z-index: 1000; display: flex; align-items: center; width: 300px; border-bottom: rgba(0,0,0,0.06) 1px solid; background: rgba(255,255,255,0.95); } // æ‰‹æœºä¸æ˜¾ç¤ºæ–‡ç« ç›®å½• @media screen and (max-width: 600px) { #toc { visibility: hidden; } } // vi post.hbs &amp;lt;div id=&amp;#34;toc&amp;#34; class=&amp;#34;sidebar&amp;#34;&amp;gt;&amp;lt;/div&amp;gt; // åœ¨ç»“æŸæ ‡è®°å‰æ·»åŠ {{/post}} // åœ¨è„šæœ¬éƒ¨åˆ†çš„readyéƒ¨åˆ†æ·»åŠ  $(document).ready(function () {  $(&amp;#39;#toc&amp;#39;).initTOC({ selector: &amp;#39;h1, h2, h3, h4&amp;#39;, scope: &amp;#39;.post-full-content&amp;#39;, overwrite: false, prefix: &amp;#39;toc&amp;#39; });  PS:
ä»åšå®¢å¼€å§‹æµè¡Œæ—¶çš„ç¬¬ä¸‰æ–¹åšå®¢å¹³å°åˆ°åæ¥è‡ªå·±æ­å»ºWordpress,æœ€è¿‘å‡ å¹´åˆæµè¡Œçš„åŸºäºgithubé™æ€å»ºç«™éƒ½æœ‰æ‰€å°è¯•, å¯æ˜¯ä¼¼ä¹è„±ç¦»äº†å»ºç«™çš„åˆå¿ƒ: è®°å½•æˆé•¿å†ç¨‹,ç»ƒä¹ è¡¨è¾¾.
å¸Œæœ›åœ¨è¿™åšæŒä¸‹å».
</content>
    </entry>
    
     <entry>
        <title>Flaskå¼€å‘ç¬”è®°</title>
        <url>/blog/flask/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>web</tag><tag>python</tag>
        </tags>
        <content type="html">  å¼€å‘åŸºç¡€ åˆ›å»º Flask Starter Project pip3 install cookiecutter cookiecutter https://github.com/realpython/cookiecutter-flask-skeleton.git å…·ä½“ä½¿ç”¨å‚è€ƒ é¡¹ç›®åœ°å€
å¸¸ç”¨ç¬¬ä¸‰æ–¹ # requirements.txt Flask Flask-Bcrypt Flask-Login Flask-WTF Flask-Bootstrap Flask-DebugToolbar Flask-Testing Flask-Migrate Flask-SQLAlchemy celery ä¾‹å­ # -- coding: utf-8 -- from flask import Flask, request, make_response, redirect, abort app = Flask(__name__) # routeå»ºç«‹è¯·æ±‚è·¯å¾„å’Œå‡½æ•°ä¹‹é—´çš„æ˜ å°„ # ç­‰åŒäº app.add_url_rule() # app.url_map å­˜æ”¾æ‰€ä»¥æ˜ å°„ @app.route(&amp;#34;/&amp;#34;) # è§†å›¾å‡½æ•° def index(): return &amp;#34;&amp;lt;h1&amp;gt;Hello World!&amp;lt;/h1&amp;gt;&amp;#34; # routeæ”¯æŒç±»å‹: int, fload, path, æ¯”å¦‚ &amp;lt;int:id&amp;gt; @app.route(&amp;#34;/user/&amp;lt;name&amp;gt;&amp;#34;) def greeting(name): return &amp;#34;Hello, %s&amp;#34; % name @app.route(&amp;#34;ua&amp;#34;) def user_agent(): ua = request.headers.get(&amp;#34;User-Agent&amp;#34;) return &amp;#34;Your UA:%s&amp;#34; %ua @app.route(&amp;#34;/error/400&amp;#34;) def error400(): return &amp;#34;&amp;lt;h1&amp;gt;Bad Request&amp;lt;/h1&amp;gt;&amp;#34;, 400 # ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥å…¶ä»–headers @app.route(&amp;#34;/cookie&amp;#34;) def respone_with_cookie(): response = make_response(&amp;#34;Response with Cookie&amp;#34;) response.set_cookie(&amp;#39;user&amp;#39;, &amp;#39;xulz&amp;#39;) return response # 302 Response @app.route(&amp;#34;/redirect&amp;#34;) def redirect_test(): return redirect(&amp;#34;http://127.0.0.1:5000&amp;#34;) # abort ä¼šæŠŠæ§åˆ¶æƒäº¤ç»™web serverç„¶åæŠ›å‡ºå¼‚å¸¸ @app.route(&amp;#34;/abort&amp;#34;) def abort_test(): abort(404) if __name__ == &amp;#34;__main__&amp;#34;: # æ¿€æ´» debuggerå’Œreloader app.run(debug=True) Context    å˜é‡å Context æè¿°     current_app åº”ç”¨ä¸Šä¸‹æ–‡ å½“å‰æ´»è·ƒçš„åº”ç”¨å®ä¾‹   g åº”ç”¨ä¸Šä¸‹æ–‡ ç”¨äºä¸€ä¸ªrequestçš„ä¸´æ—¶å­˜å‚¨,æ¯æ¬¡ä¼šé‡ç½®   request è¯·æ±‚ä¸Šä¸‹æ–‡ requestå¯¹è±¡   session è¯·æ±‚ä¸Šä¸‹æ–‡ å›è¯,requestsé—´å¯è®¿é—®    request Hooks  before_first_request before_request after_request: æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸æ—¶,æ³¨å†Œ teardown_request æ¯æ¬¡requestä¹‹åæ³¨å†Œ,å³ä½¿å‘ç”Ÿå¼‚å¸¸   ä¸€èˆ¬æŠŠhookå’Œfunctions viewçš„å…±äº«æ•°æ®å­˜æ”¾åœ¨gåº”ç”¨ä¸Šä¸‹æ–‡
 Flask æ‰©å±• å¶ç„¶å‘ç°ä¸€ä¸ªå¢å¼ºç‰ˆFlaské¡¹ç›®,æä¾›äº†æ›´å¥½çš„å®‰å…¨å’Œè‡ªåŠ¨CRUDæ“ä½œç­‰è®¸å¤šå¸¸ç”¨ç‰¹æ€§(æœ‰ç‚¹å­¦ä¹ Djangoçš„æ„æ€), å¼ºçƒˆæ¨è.
Flask App Builder
æŠ€å·§ ç¦æ­¢æ§åˆ¶å°è¾“å‡º log = logging.getLogger(&amp;#39;werkzeug&amp;#39;) log.setLevel(logging.ERROR) å¢åŠ å“åº”å»¶è¿Ÿ def get_fake_latency(): return random.uniform(0.1, 0.2) @app.after_request def apply_latency(response): time.sleep(get_fake_latency()) return response éƒ¨ç½² ç”Ÿäº§ç¯å¢ƒ  ä¸è¦ä½¿ç”¨ï½€app.run()ï½€æ–¹å¼è¿è¡Œ ä½¿ç”¨gunicorn  pythonå®ç°ï¼Œç®€å•æ˜“ç”¨ è¿è¡Œ: gunicorn app:app  ä½¿ç”¨uWsgi  Cå®ç°ï¼ŒCPUå ç”¨ä½ é€šå¸¸ä¸Nginxåå‘ä»£ç†ä¸€èµ·ä½¿ç”¨   é“¾æ¥  Patterns for Flask å®˜æ–¹è¿›é˜¶ Explore Flask æ•™ç¨‹ Flask Web Development ä½œè€…åšå®¢ ä½¿ç”¨Dockeréƒ¨ç½²Flaskåº”ç”¨  </content>
    </entry>
    
     <entry>
        <title>ZooKeeper</title>
        <url>/blog/zookeeper/</url>
        <categories>
          <category>tech</category>
        </categories>
        <tags>
          <tag>distributed</tag>
        </tags>
        <content type="html">  ä½œç”¨åŠåŸç† ä½œç”¨: åˆ†å¸ƒå¼åè°ƒ, æä¾›æ“ä½œAPI
 é…ç½®ç®¡ç† é›†ç¾¤ç®¡ç†:  ç¾¤ä¸»é€‰ä¸¾ èµ„æºå®šä½  åŒæ­¥çŠ¶æ€ ç»Ÿä¸€å‘½åæœåŠ¡  ä½¿ç”¨æ¡ˆä¾‹:
 HBase Hadoop Kafka  é€‰ä¸¾ç®—æ³• ä¸€ä¸ªLeader,å…¶ä»–èŠ‚ç‚¹ä¸ºFollower
Leaderé€‰ä¸¾ç®—æ³• (åˆ†å¸ƒå¼é€‰ä¸¾ç®—æ³•ä½¿ç”¨ZAB,æ˜¯Paxosçš„å˜ç§)
ä¸€è‡´æ€§ä¿è¯:
 æ•°æ®å˜æ›´å…ˆå†™ç£ç›˜å†è¯»å…¥å†…å­˜ è¯»å†™åŸå­ åŒæ­¥æ¶ˆæ¯åŸå­æ€§ äº‹åŠ¡æ—¥å¿—å’Œå¿«ç…§æ˜¯æŒä¹…åŒ–å­˜å‚¨.  å†™è¯·æ±‚è¿æ¥Leader, è¯»è¯·æ±‚è¿æ¥ä»»æ„èŠ‚ç‚¹è¯»å–æœ¬åœ°çš„å¤åˆ¶.
é…ç½® è®¾ç½®æ ¹ç›®å½•ï¼š ZOOKEEPER_HOME
æ—¥å¿—æ–‡ä»¶ï¼š zookeeper.out
é›†ç¾¤æ¨èä¸å°‘äº3å°ï¼Œæ¨èå¥‡æ•°ä¸ªèŠ‚ç‚¹,åªè¦è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹OK(æœ‰æ•ˆå‚ä¸é€‰ä¸¾çš„èŠ‚ç‚¹æ•°è¿‡åŠ), ZooKeeperå°±èƒ½æ­£å¸¸æœåŠ¡. æœ€å¥½åˆ†å¸ƒåœ¨ä¸åŒçš„ç‰©ç†æœºä¸Šã€‚
# server.N, åœ¨zoo.cfgæŒ‡å®šçš„dataDirç›®å½•ä¸‹å»ºç«‹ä»¥æœåŠ¡å™¨èŠ‚ç‚¹å¯¹åº”çš„myidæ–‡ä»¶,å¹¶æ›´æ–°å†…å®¹ä¸ºN  initLimit=5 syncLimit=2 server.1=zoo1:2888:3888 server.2=zoo2:2888:3888 server.3=zoo3:2888:3888# Ubuntu éšç³»ç»Ÿå¯åŠ¨ apt-get install zookeeperd æ€§èƒ½ æ€§èƒ½: åœ¨è¯»å¤§äºå†™æ—¶æ€§èƒ½æ›´å¥½(è¯»å†™10:1)
æ³¨ï¼šæ¥è‡ªè…¾è®¯å¹¿å‘Šå›¢é˜Ÿåˆ†äº«
é—®é¢˜ï¼šå¦‚æœè¯»å†™æ“ä½œé¢‘ç¹ï¼Œåˆ™Zookeeper serverå¾ˆå®¹æ˜“ä¸å ªé‡è´Ÿã€‚
workaroundï¼šç”¨C&#43;&#43;å†™äº†ä¸€ä¸ªproxyï¼Œå®šæœŸload Zookeeperæ•°æ®ï¼Œä»£æ›¿Zookeeperå¤„ç†è¯»æ“ä½œï¼ŒæŠŠå†™æ“ä½œproxyç»™åé¢çš„Zookeeperã€‚
æ›¿ä»£æ–¹æ¡ˆï¼šetcd </content>
    </entry>
    
     <entry>
        <title>reborn</title>
        <url>/read/reborn/</url>
        <categories>
          <category>essay</category>
        </categories>
        <tags>
          <tag>read</tag>
        </tags>
        <content type="html"> &amp;ldquo;ä¹¦ç±æ˜¯äººç±»çš„å¥½æœ‹å‹&amp;rdquo;,è¿™æ˜¯å¥çœŸç†. åœ¨å¦‚ä»Šä¿¡æ¯çˆ†ç‚¸,ç¢ç‰‡å……æ–¥çš„å¹´ä»£,ä¸€å¹´è¯»åå‡ /å‡ åæœ¬ä¹¦å·²æˆå¥¢è°ˆ.
åœ¨æ‰‹æœºä¸Šç¢ç‰‡é˜…è¯»æç¬‘æ¥è€å¸ˆçš„ä¹¦å¯è¿½æº¯åˆ°å‡ å¹´å‰çš„&amp;lt;æŠŠæ—¶é—´å½“ä½œæœ‹å‹&amp;gt;,å»å¹´æ˜¯&amp;lt;æˆé•¿-YCåˆ›ä¸šè¯¾è¯»ä¹¦ç¬”è®°&amp;gt;, æœ€è¿‘è¿˜åœ¨è¯»çš„æ˜¯&amp;lt;æ–°ç”Ÿ-ä¸ƒå¹´å°±æ˜¯ä¸€è¾ˆå­&amp;gt;.
ç¬‘æ¥è€å¸ˆçš„ä¹¦éƒ¨éƒ¨ç²¾å“,è¿˜æœ‰æ­£ç‰ˆå…è´¹å¯è¯»,ä½ è¿˜å¥¢æ±‚ä»€ä¹ˆ.

æ–°ç”Ÿé‡Œçš„è¯é¢˜æœ‰çš„åœ¨æˆé•¿å·²ç»æè¿‡,æœ€è¿‘è¯»åˆ°äººæˆé•¿å’Œè®¡ç®—æœºå‡çº§çš„ç±»æ¯”,è§‰å¾—å¾ˆæ˜¯ç»å…¸.
è®¡ç®—æœºç¡¬ä»¶çš„å‡çº§å¯¹åº”äººèº«ä½“çš„é”»ç‚¼,ä¿æŒå¥åº·æ›´æ–°; è€Œæ›´é¢‘ç¹çš„è½¯ä»¶å‡çº§åˆ™å¯¹åº”äººè„‘çš„å­¦ä¹ æˆé•¿æé«˜. å¦‚æœäººæ‹’ç»å­¦ä¹ æé«˜,å’Œè€å¤è‘£ç”µè„‘å°±æ²¡å•¥åŒºåˆ«äº†,æƒ³æ¥ä¹Ÿæ˜¯æ¯ä¸ªäººä¸ä¹æ„çœ‹åˆ°çš„.
è¿‘åå‡ å¹´çš„è®¡ç®—æœºè¡Œä¸šé«˜é€Ÿå‘å±•,æå¤§çš„æ”¹å˜äº†äººçš„ç”Ÿæ´»æ–¹å¼,å¸¦æ¥äº†ç¤¾ä¼šçš„å·¨å¤§è¿›æ­¥. è¿™ä¸ªè¡Œä¸šæ±‡èšç€è®¸å¤šé¡¶çº§èªæ˜çš„äºº, æœ‰ä¼˜ç§€çš„äº§å“å¯ç”¨, å¼€æºçš„ä»£ç å¯å­¦ä¹ .
æ²¡æœ‰ç†ç”±ä¸æ›´æ–°è‡ªå·±,å»å…³æ³¨è‡ªå·±å®è´¨çš„æˆé•¿. è€Œä¸æ˜¯æ´»åœ¨ä¿¡æ¯è¿‡è½½é‡Œ,ç¢ç‰‡è™šæ— é‡Œ.
å·¥ä½œçš„æœ‰è¶£æœ‰æ„ä¹‰,è‡ªèº«çš„æå‡å’Œä»·å€¼çš„æé«˜, è¿›ä¸€æ­¥æ”¹å–„ç”Ÿæ´», åº”è¯¥ç”Ÿæ´»åœ¨ä¸€ä¸ªæ­£å¾ªç¯é‡Œ.
</content>
    </entry>
    
     <entry>
        <title>Go In Action</title>
        <url>/play/blog-hugo/</url>
        <categories>
          <category>play</category>
        </categories>
        <tags>
          <tag>blog</tag>
        </tags>
        <content type="html"> æ›´æ–°ä¸‹å…³äºé™æ€åšå®¢Hugoçš„æ—§æ–‡, æœ¬åšå®¢ç°åœ¨å°±æ˜¯ä½¿ç”¨Hugoç”Ÿæˆ.
æœ€æ—©çŸ¥é“Hugoæ˜¯åœ¨å¬å®Œ&amp;rsquo;å†…æ ¸ææ…Œ&amp;rsquo;æ’­å®¢çš„ä¸€æœŸèŠ‚ç›®,å…¶å®ä¹‹å‰å·²ç»é€šè¿‡Github Pagesè¯•ç”¨è¿‡å‡ ä¸ªé™æ€åšå®¢ç³»ç»Ÿ.
æœ€è¿‘å‡ ä¸ªæœˆä¸€ç›´å¼ºè¿«è‡ªå·±ç”¨Githubå’ŒMarkdownåšå­¦ä¹ è®°å½•.
BTW,å–œæ¬¢æŠ˜è…¾çš„åŒå­¦, å¯ä»¥é€šè¿‡StaticGenè¿™ä¸ªæ±‡æ€»ç«™ç‚¹è¿›ä¸€æ­¥äº†è§£æ›´å¤šé™æ€åšå®¢.
</content>
    </entry>
    
     <entry>
        <title>Posts</title>
        <url>/post/</url>
        <categories>
          
        </categories>
        <tags>
          
        </tags>
        <content type="html"> </content>
    </entry>
    
</search>